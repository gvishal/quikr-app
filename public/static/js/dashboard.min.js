function Vector(){}function Matrix(){}function Line(){}function Plane(){}(function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,a=Function.prototype,o=r.push,s=r.slice,u=r.concat,l=i.toString,c=i.hasOwnProperty,h=r.forEach,f=r.map,g=r.reduce,d=r.reduceRight,p=r.filter,m=r.every,v=r.some,y=r.indexOf,_=r.lastIndexOf,b=Array.isArray,w=Object.keys,x=a.bind,M=function(t){return t instanceof M?t:this instanceof M?void(this._wrapped=t):new M(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports._=M):t._=M,M.VERSION="1.5.2";var k=M.each=M.forEach=function(t,e,r){if(null!=t)if(h&&t.forEach===h)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var o=M.keys(t),i=0,a=o.length;a>i;i++)if(e.call(r,t[o[i]],o[i],t)===n)return};M.map=M.collect=function(t,e,n){var r=[];return null==t?r:f&&t.map===f?t.map(e,n):(k(t,function(t,i,a){r.push(e.call(n,t,i,a))}),r)};var E="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=M.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(k(t,function(t,a,o){i?n=e.call(r,n,t,a,o):(n=t,i=!0)}),!i)throw new TypeError(E);return n},M.reduceRight=M.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(e=M.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var o=M.keys(t);a=o.length}if(k(t,function(s,u,l){u=o?o[--a]:--a,i?n=e.call(r,n,t[u],u,l):(n=t[u],i=!0)}),!i)throw new TypeError(E);return n},M.find=M.detect=function(t,e,n){var r;return S(t,function(t,i,a){return e.call(n,t,i,a)?(r=t,!0):void 0}),r},M.filter=M.select=function(t,e,n){var r=[];return null==t?r:p&&t.filter===p?t.filter(e,n):(k(t,function(t,i,a){e.call(n,t,i,a)&&r.push(t)}),r)},M.reject=function(t,e,n){return M.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},M.every=M.all=function(t,e,r){e||(e=M.identity);var i=!0;return null==t?i:m&&t.every===m?t.every(e,r):(k(t,function(t,a,o){return(i=i&&e.call(r,t,a,o))?void 0:n}),!!i)};var S=M.some=M.any=function(t,e,r){e||(e=M.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,r):(k(t,function(t,a,o){return i||(i=e.call(r,t,a,o))?n:void 0}),!!i)};M.contains=M.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e})},M.invoke=function(t,e){var n=s.call(arguments,2),r=M.isFunction(e);return M.map(t,function(t){return(r?e:t[e]).apply(t,n)})},M.pluck=function(t,e){return M.map(t,function(t){return t[e]})},M.where=function(t,e,n){return M.isEmpty(e)?n?void 0:[]:M[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},M.findWhere=function(t,e){return M.where(t,e,!0)},M.max=function(t,e,n){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&M.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return k(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;o>r.computed&&(r={value:t,computed:o})}),r.value},M.min=function(t,e,n){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&M.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return k(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;o<r.computed&&(r={value:t,computed:o})}),r.value},M.shuffle=function(t){var e,n=0,r=[];return k(t,function(t){e=M.random(n++),r[n-1]=r[e],r[e]=t}),r},M.sample=function(t,e,n){return arguments.length<2||n?t[M.random(t.length-1)]:M.shuffle(t).slice(0,Math.max(0,e))};var A=function(t){return M.isFunction(t)?t:function(e){return e[t]}};M.sortBy=function(t,e,n){var r=A(e);return M.pluck(M.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,r){var i={},a=null==n?M.identity:A(n);return k(e,function(n,o){var s=a.call(r,n,o,e);t(i,s,n)}),i}};M.groupBy=T(function(t,e,n){(M.has(t,e)?t[e]:t[e]=[]).push(n)}),M.indexBy=T(function(t,e,n){t[e]=n}),M.countBy=T(function(t,e){M.has(t,e)?t[e]++:t[e]=1}),M.sortedIndex=function(t,e,n,r){n=null==n?M.identity:A(n);for(var i=n.call(r,e),a=0,o=t.length;o>a;){var s=a+o>>>1;n.call(r,t[s])<i?a=s+1:o=s}return a},M.toArray=function(t){return t?M.isArray(t)?s.call(t):t.length===+t.length?M.map(t,M.identity):M.values(t):[]},M.size=function(t){return null==t?0:t.length===+t.length?t.length:M.keys(t).length},M.first=M.head=M.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:s.call(t,0,e)},M.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},M.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},M.rest=M.tail=M.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},M.compact=function(t){return M.filter(t,M.identity)};var L=function(t,e,n){return e&&M.every(t,M.isArray)?u.apply(n,t):(k(t,function(t){M.isArray(t)||M.isArguments(t)?e?o.apply(n,t):L(t,e,n):n.push(t)}),n)};M.flatten=function(t,e){return L(t,e,[])},M.without=function(t){return M.difference(t,s.call(arguments,1))},M.uniq=M.unique=function(t,e,n,r){M.isFunction(e)&&(r=n,n=e,e=!1);var i=n?M.map(t,n,r):t,a=[],o=[];return k(i,function(n,r){(e?r&&o[o.length-1]===n:M.contains(o,n))||(o.push(n),a.push(t[r]))}),a},M.union=function(){return M.uniq(M.flatten(arguments,!0))},M.intersection=function(t){var e=s.call(arguments,1);return M.filter(M.uniq(t),function(t){return M.every(e,function(e){return M.indexOf(e,t)>=0})})},M.difference=function(t){var e=u.apply(r,s.call(arguments,1));return M.filter(t,function(t){return!M.contains(e,t)})},M.zip=function(){for(var t=M.max(M.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=M.pluck(arguments,""+n);return e},M.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},M.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=M.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},M.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},M.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,a=new Array(r);r>i;)a[i++]=t,t+=n;return a};var D=function(){};M.bind=function(t,e){var n,r;if(x&&t.bind===x)return x.apply(t,s.call(arguments,1));if(!M.isFunction(t))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(s.call(arguments)));D.prototype=t.prototype;var i=new D;D.prototype=null;var a=t.apply(i,n.concat(s.call(arguments)));return Object(a)===a?a:i}},M.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},M.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=M.bind(t[e],t)}),t},M.memoize=function(t,e){var n={};return e||(e=M.identity),function(){var r=e.apply(this,arguments);return M.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},M.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},M.defer=function(t){return M.delay.apply(M,[t,1].concat(s.call(arguments,1)))},M.throttle=function(t,e,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,o=null,a=t.apply(r,i)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,a=t.apply(r,i)):o||n.trailing===!1||(o=setTimeout(u,c)),a}},M.debounce=function(t,e,n){var r,i,a,o,s;return function(){a=this,i=arguments,o=new Date;var u=function(){var l=new Date-o;e>l?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(a,i)))},l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(a,i)),s}},M.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},M.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},M.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},M.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},M.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)M.has(t,n)&&e.push(n);return e},M.values=function(t){for(var e=M.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},M.pairs=function(t){for(var e=M.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},M.invert=function(t){for(var e={},n=M.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},M.functions=M.methods=function(t){var e=[];for(var n in t)M.isFunction(t[n])&&e.push(n);return e.sort()},M.extend=function(t){return k(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},M.pick=function(t){var e={},n=u.apply(r,s.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},M.omit=function(t){var e={},n=u.apply(r,s.call(arguments,1));for(var i in t)M.contains(n,i)||(e[i]=t[i]);return e},M.defaults=function(t){return k(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},M.clone=function(t){return M.isObject(t)?M.isArray(t)?t.slice():M.extend({},t):t},M.tap=function(t,e){return e(t),t};var P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof M&&(t=t._wrapped),e instanceof M&&(e=e._wrapped);var i=l.call(t);if(i!=l.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return r[a]==e;var o=t.constructor,s=e.constructor;if(o!==s&&!(M.isFunction(o)&&o instanceof o&&M.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"==i){if(u=t.length,c=u==e.length)for(;u--&&(c=P(t[u],e[u],n,r)););}else{for(var h in t)if(M.has(t,h)&&(u++,!(c=M.has(e,h)&&P(t[h],e[h],n,r))))break;if(c){for(h in e)if(M.has(e,h)&&!u--)break;c=!u}}return n.pop(),r.pop(),c};M.isEqual=function(t,e){return P(t,e,[],[])},M.isEmpty=function(t){if(null==t)return!0;if(M.isArray(t)||M.isString(t))return 0===t.length;for(var e in t)if(M.has(t,e))return!1;return!0},M.isElement=function(t){return!(!t||1!==t.nodeType)},M.isArray=b||function(t){return"[object Array]"==l.call(t)},M.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){M["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),M.isArguments(arguments)||(M.isArguments=function(t){return!(!t||!M.has(t,"callee"))}),"function"!=typeof/./&&(M.isFunction=function(t){return"function"==typeof t}),M.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},M.isNaN=function(t){return M.isNumber(t)&&t!=+t},M.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.has=function(t,e){return c.call(t,e)},M.noConflict=function(){return t._=e,this},M.identity=function(t){return t},M.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},M.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var C={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};C.unescape=M.invert(C.escape);var $={escape:new RegExp("["+M.keys(C.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(C.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(t){M[t]=function(e){return null==e?"":(""+e).replace($[t],function(e){return C[t][e]})}}),M.result=function(t,e){if(null==t)return void 0;var n=t[e];return M.isFunction(n)?n.call(t):n},M.mixin=function(t){k(M.functions(t),function(e){var n=M[e]=t[e];M.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),O.call(this,n.apply(M,t))}})};var I=0;M.uniqueId=function(t){var e=++I+"";return t?t+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(t,e,n){var r;n=M.defaults({},n,M.templateSettings);var i=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),a=0,o="__p+='";t.replace(i,function(e,n,r,i,s){return o+=t.slice(a,s).replace(B,function(t){return"\\"+F[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),a=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(e)return r(e,M);var u=function(t){return r.call(this,t,M)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},M.chain=function(t){return M(t).chain()};var O=function(t){return this._chain?M(t).chain():t};M.mixin(M),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];M.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],O.call(this,n)}}),k(["concat","join","slice"],function(t){var e=r[t];M.prototype[t]=function(){return O.call(this,e.apply(this._wrapped,arguments))}}),M.extend(M.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),function(){var t,e=this,n=e.Backbone,r=[],i=r.push,a=r.slice,o=r.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="0.9.10";var s=e._;s||"undefined"==typeof require||(s=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=/\s+/,l=function(t,e,n,r){if(!n)return!0;if("object"==typeof n)for(var i in n)t[e].apply(t,[i,n[i]].concat(r));else{if(!u.test(n))return!0;for(var a=n.split(u),o=0,s=a.length;s>o;o++)t[e].apply(t,[a[o]].concat(r))}},c=function(t,e){var n,r=-1,i=t.length;switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,e[0]);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,e[0],e[1]);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,e[0],e[1],e[2]);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},h=t.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var r=this,i=s.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n),this},off:function(t,e,n){var r,i,a,o,u,c,h,f;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(o=t?[t]:s.keys(this._events),u=0,c=o.length;c>u;u++)if(t=o[u],r=this._events[t]){if(a=[],e||n)for(h=0,f=r.length;f>h;h++)i=r[h],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&a.push(i);this._events[t]=a}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&c(n,e),r&&c(r,arguments),this},listenTo:function(t,e,n){var r=this._listeners||(this._listeners={}),i=t._listenerId||(t._listenerId=s.uniqueId("l"));return r[i]=t,t.on(e,"object"==typeof e?this:n,this),this},stopListening:function(t,e,n){var r=this._listeners;if(r){if(t)t.off(e,"object"==typeof e?this:n,this),e||n||delete r[t._listenerId];else{"object"==typeof e&&(n=this);for(var i in r)r[i].off(e,n,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,s.extend(t,h);var f=t.Model=function(t,e){var n,r=t||{};this.cid=s.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=s.result(this,"defaults"))&&(r=s.defaults({},r,n)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};s.extend(f.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,a,o,u,l,c,h;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;a=n.unset,u=n.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=s.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],s.isEqual(h[r],e)||o.push(r),s.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete h[r]:h[r]=e;if(!u){o.length&&(this._pending=!0);for(var f=0,g=o.length;g>f;f++)this.trigger("change:"+o[f],this,h[o[f]],n)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)s.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,n,r){return t.set(t.parse(n,r),r)?void(e&&e(t,n,r)):!1},this.sync("read",this,t)},save:function(t,e,n){var r,i,a,o,u=this.attributes;return null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,!r||n&&n.wait||this.set(r,n)?(n=s.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=s.extend({},u,r)),void 0===n.parse&&(n.parse=!0),i=n.success,n.success=function(t,e,n){t.attributes=u;var a=t.parse(e,n);return n.wait&&(a=s.extend(r||{},a)),s.isObject(a)&&!t.set(a,n)?!1:void(i&&i(t,e,n))},a=this.isNew()?"create":n.patch?"patch":"update","patch"===a&&(n.attrs=r),o=this.sync(a,this,n),r&&n.wait&&(this.attributes=u),o):!1):!1},destroy:function(t){t=t?s.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(t,e,i){(i.wait||t.isNew())&&r(),n&&n(t,e,i)},this.isNew())return t.success(this,null,t),!1;var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||P();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return!this.validate||!this.validate(this.attributes,t)},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,e||{}),!1):!0}});var g=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))};s.extend(g.prototype,h,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){t=s.isArray(t)?t.slice():[t],e||(e={});var n,r,a,u,l,c,h,f,g,d;for(h=[],f=e.at,g=this.comparator&&null==f&&0!=e.sort,d=s.isString(this.comparator)?this.comparator:null,n=0,r=t.length;r>n;n++)(a=this._prepareModel(u=t[n],e))?(l=this.get(a))?e.merge&&(l.set(u===a?a.attributes:u,e),g&&!c&&l.hasChanged(d)&&(c=!0)):(h.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)):this.trigger("invalid",this,u,e);if(h.length&&(g&&(c=!0),this.length+=h.length,null!=f?o.apply(this.models,[f,0].concat(h)):i.apply(this.models,h)),c&&this.sort({silent:!0}),e.silent)return this;for(n=0,r=h.length;r>n;n++)(a=h[n]).trigger("add",a,this,e);return c&&this.trigger("sort",this,e),this},remove:function(t,e){t=s.isArray(t)?t.slice():[t],e||(e={});var n,r,i,a;for(n=0,r=t.length;r>n;n++)a=this.get(t[n]),a&&(delete this._byId[a.id],delete this._byId[a.cid],i=this.indexOf(a),this.models.splice(i,1),this.length--,e.silent||(e.index=i,a.trigger("remove",a,this,e)),this._removeReference(a));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[t.id||t.cid||t[this._idAttr]||t])},at:function(t){return this.models[t]},where:function(t){return s.isEmpty(t)?[]:this.filter(function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return s.invoke(this.models,"get",t)},update:function(t,e){e=s.extend({add:!0,merge:!0,remove:!0},e),e.parse&&(t=this.parse(t,e));var n,r,i,a,o=[],u=[],l={};if(s.isArray(t)||(t=t?[t]:[]),e.add&&!e.remove)return this.add(t,e);for(r=0,i=t.length;i>r;r++)n=t[r],a=this.get(n),e.remove&&a&&(l[a.cid]=!0),(e.add&&!a||e.merge&&a)&&o.push(n);if(e.remove)for(r=0,i=this.models.length;i>r;r++)n=this.models[r],l[n.cid]||u.push(n);return u.length&&this.remove(u,e),o.length&&this.add(o,e),this},reset:function(t,e){e||(e={}),e.parse&&(t=this.parse(t,e));for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models.slice(),this._reset(),t&&this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,n,r){var i=r.update?"update":"reset";t[i](n,r),e&&e(t,n,r)},this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:!1},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))},sortedIndex:function(t,e,n){e||(e=this.comparator);var r=s.isFunction(e)?e:function(t){return t.get(e)};return s.sortedIndex(this.models,t,r,n)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(d,function(t){g.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var p=["groupBy","countBy","sortBy"];s.each(p,function(t){g.prototype[t]=function(e,n){var r=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,r,n)}});var m=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},v=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,_=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(m.prototype,h,{initialize:function(){},route:function(e,n,r){return s.isRegExp(e)||(e=this._routeToRegExp(e)),r||(r=this[n]),t.history.route(e,s.bind(function(i){var a=this._extractParameters(e,i);r&&r.apply(this,a),this.trigger.apply(this,["route:"+n].concat(a)),this.trigger("route",n,a),t.history.trigger("route",this,n,a)},this)),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes)for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])},_routeToRegExp:function(t){return t=t.replace(b,"\\$&").replace(v,"(?:$1)?").replace(y,function(t,e){return e?t:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var w=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,k=/msie [\w.]+/,E=/\/$/;w.started=!1,s.extend(w.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(E,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(x,"")},start:function(e){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=k.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(M,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!w.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),t.history=new w;var S=t.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},A=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];s.extend(S.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=s.result(this,"events"))){this.undelegateEvents();for(var e in t){var n=t[e];if(s.isFunction(n)||(n=this[t[e]]),!n)throw new Error('Method "'+t[e]+'" does not exist');var r=e.match(A),i=r[1],a=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,n):this.$el.on(i,a,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=s.extend({},s.result(this,"options"),t)),s.extend(this,s.pick(t,T)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var e=s.extend({},s.result(this,"attributes"));this.id&&(e.id=s.result(this,"id")),this.className&&(e["class"]=s.result(this,"className"));var n=t.$("<"+s.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}});var L={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.sync=function(e,n,r){var i=L[e];s.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:i,dataType:"json"};if(r.url||(a.url=s.result(n,"url")||P()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){a.type="POST",r.emulateJSON&&(a.data._method=i);var o=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),o?o.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var u=r.success;r.success=function(t){u&&u(n,t,r),n.trigger("sync",n,t,r)};var l=r.error;r.error=function(t){l&&l(n,t,r),n.trigger("error",n,t,r)};var c=r.xhr=t.ajax(s.extend(a,r));return n.trigger("request",n,c,r),c},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var D=function(t,e){var n,r=this;n=t&&s.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)
},s.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&s.extend(n.prototype,t),n.__super__=r.prototype,n};f.extend=g.extend=m.extend=S.extend=w.extend=D;var P=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(t){var e=t({});t.subscribe=function(){e.on.apply(e,arguments)},t.unsubscribe=function(){e.off.apply(e,arguments)},t.publish=function(){e.trigger.apply(e,arguments)}}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,a,o,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,n=0;a>n;n+=1)o[n]=str(n,u)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Sylvester={version:"0.1.3",precision:1e-6};Vector.prototype={e:function(t){return 1>t||t>this.elements.length?null:this.elements[t-1]},dimensions:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(t){var e=this.elements.length,n=t.elements||t;if(e!=n.length)return!1;do if(Math.abs(this.elements[e-1]-n[e-1])>Sylvester.precision)return!1;while(--e);return!0},dup:function(){return Vector.create(this.elements)},map:function(t){var e=[];return this.each(function(n,r){e.push(t(n,r))}),Vector.create(e)},each:function(t){var e,n=this.elements.length,r=n;do e=r-n,t(this.elements[e],e+1);while(--n)},toUnitVector:function(){var t=this.modulus();return 0===t?this.dup():this.map(function(e){return e/t})},angleFrom:function(t){var e=t.elements||t,n=this.elements.length;if(n!=e.length)return null;var r=0,i=0,a=0;if(this.each(function(t,n){r+=t*e[n-1],i+=t*t,a+=e[n-1]*e[n-1]}),i=Math.sqrt(i),a=Math.sqrt(a),i*a===0)return null;var o=r/(i*a);return-1>o&&(o=-1),o>1&&(o=1),Math.acos(o)},isParallelTo:function(t){var e=this.angleFrom(t);return null===e?null:e<=Sylvester.precision},isAntiparallelTo:function(t){var e=this.angleFrom(t);return null===e?null:Math.abs(e-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(t){var e=this.dot(t);return null===e?null:Math.abs(e)<=Sylvester.precision},add:function(t){var e=t.elements||t;return this.elements.length!=e.length?null:this.map(function(t,n){return t+e[n-1]})},subtract:function(t){var e=t.elements||t;return this.elements.length!=e.length?null:this.map(function(t,n){return t-e[n-1]})},multiply:function(t){return this.map(function(e){return e*t})},x:function(t){return this.multiply(t)},dot:function(t){var e=t.elements||t,n=0,r=this.elements.length;if(r!=e.length)return null;do n+=this.elements[r-1]*e[r-1];while(--r);return n},cross:function(t){var e=t.elements||t;if(3!=this.elements.length||3!=e.length)return null;var n=this.elements;return Vector.create([n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]])},max:function(){var t,e=0,n=this.elements.length,r=n;do t=r-n,Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);while(--n);return e},indexOf:function(t){var e,n=null,r=this.elements.length,i=r;do e=i-r,null===n&&this.elements[e]==t&&(n=e+1);while(--r);return n},toDiagonalMatrix:function(){return Matrix.Diagonal(this.elements)},round:function(){return this.map(function(t){return Math.round(t)})},snapTo:function(t){return this.map(function(e){return Math.abs(e-t)<=Sylvester.precision?t:e})},distanceFrom:function(t){if(t.anchor)return t.distanceFrom(this);var e=t.elements||t;if(e.length!=this.elements.length)return null;var n,r=0;return this.each(function(t,i){n=t-e[i-1],r+=n*n}),Math.sqrt(r)},liesOn:function(t){return t.contains(this)},liesIn:function(t){return t.contains(this)},rotate:function(t,e){var n,r,i,a,o;switch(this.elements.length){case 2:return n=e.elements||e,2!=n.length?null:(r=Matrix.Rotation(t).elements,i=this.elements[0]-n[0],a=this.elements[1]-n[1],Vector.create([n[0]+r[0][0]*i+r[0][1]*a,n[1]+r[1][0]*i+r[1][1]*a]));case 3:if(!e.direction)return null;var s=e.pointClosestTo(this).elements;return r=Matrix.Rotation(t,e.direction).elements,i=this.elements[0]-s[0],a=this.elements[1]-s[1],o=this.elements[2]-s[2],Vector.create([s[0]+r[0][0]*i+r[0][1]*a+r[0][2]*o,s[1]+r[1][0]*i+r[1][1]*a+r[1][2]*o,s[2]+r[2][0]*i+r[2][1]*a+r[2][2]*o]);default:return null}},reflectionIn:function(t){if(t.anchor){var e=this.elements.slice(),n=t.pointClosestTo(e).elements;return Vector.create([n[0]+(n[0]-e[0]),n[1]+(n[1]-e[1]),n[2]+(n[2]-(e[2]||0))])}var r=t.elements||t;return this.elements.length!=r.length?null:this.map(function(t,e){return r[e-1]+(r[e-1]-t)})},to3D:function(){var t=this.dup();switch(t.elements.length){case 3:break;case 2:t.elements.push(0);break;default:return null}return t},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(t){return this.elements=(t.elements||t).slice(),this}},Vector.create=function(t){var e=new Vector;return e.setElements(t)},Vector.i=Vector.create([1,0,0]),Vector.j=Vector.create([0,1,0]),Vector.k=Vector.create([0,0,1]),Vector.Random=function(t){var e=[];do e.push(Math.random());while(--t);return Vector.create(e)},Vector.Zero=function(t){var e=[];do e.push(0);while(--t);return Vector.create(e)},Matrix.prototype={e:function(t,e){return 1>t||t>this.elements.length||1>e||e>this.elements[0].length?null:this.elements[t-1][e-1]},row:function(t){return t>this.elements.length?null:Vector.create(this.elements[t-1])},col:function(t){if(t>this.elements[0].length)return null;var e,n=[],r=this.elements.length,i=r;do e=i-r,n.push(this.elements[e][t-1]);while(--r);return Vector.create(n)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},eql:function(t){var e=t.elements||t;if("undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements),this.elements.length!=e.length||this.elements[0].length!=e[0].length)return!1;var n,r,i,a=this.elements.length,o=a,s=this.elements[0].length;do{n=o-a,r=s;do if(i=s-r,Math.abs(this.elements[n][i]-e[n][i])>Sylvester.precision)return!1;while(--r)}while(--a);return!0},dup:function(){return Matrix.create(this.elements)},map:function(t){var e,n,r,i=[],a=this.elements.length,o=a,s=this.elements[0].length;do{e=o-a,n=s,i[e]=[];do r=s-n,i[e][r]=t(this.elements[e][r],e+1,r+1);while(--n)}while(--a);return Matrix.create(i)},isSameSizeAs:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements),this.elements.length==e.length&&this.elements[0].length==e[0].length},add:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements),this.isSameSizeAs(e)?this.map(function(t,n,r){return t+e[n-1][r-1]}):null},subtract:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements),this.isSameSizeAs(e)?this.map(function(t,n,r){return t-e[n-1][r-1]}):null},canMultiplyFromLeft:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements),this.elements[0].length==e.length},multiply:function(t){if(!t.elements)return this.map(function(e){return e*t});var e=t.modulus?!0:!1,n=t.elements||t;if("undefined"==typeof n[0][0]&&(n=Matrix.create(n).elements),!this.canMultiplyFromLeft(n))return null;var r,i,a,o,s,u,l=this.elements.length,c=l,h=n[0].length,f=this.elements[0].length,g=[];do{r=c-l,g[r]=[],i=h;do{a=h-i,o=0,s=f;do u=f-s,o+=this.elements[r][u]*n[u][a];while(--s);g[r][a]=o}while(--i)}while(--l);var n=Matrix.create(g);return e?n.col(1):n},x:function(t){return this.multiply(t)},minor:function(t,e,n,r){var i,a,o,s=[],u=n,l=this.elements.length,c=this.elements[0].length;do{i=n-u,s[i]=[],a=r;do o=r-a,s[i][o]=this.elements[(t+i-1)%l][(e+o-1)%c];while(--a)}while(--u);return Matrix.create(s)},transpose:function(){var t,e,n,r=this.elements.length,i=this.elements[0].length,a=[],o=i;do{t=i-o,a[t]=[],e=r;do n=r-e,a[t][n]=this.elements[n][t];while(--e)}while(--o);return Matrix.create(a)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){var t,e,n,r=0,i=this.elements.length,a=i,o=this.elements[0].length;do{t=a-i,e=o;do n=o-e,Math.abs(this.elements[t][n])>Math.abs(r)&&(r=this.elements[t][n]);while(--e)}while(--i);return r},indexOf:function(t){var e,n,r,i=this.elements.length,a=i,o=this.elements[0].length;do{e=a-i,n=o;do if(r=o-n,this.elements[e][r]==t)return{i:e+1,j:r+1};while(--n)}while(--i);return null},diagonal:function(){if(!this.isSquare)return null;var t,e=[],n=this.elements.length,r=n;do t=r-n,e.push(this.elements[t][t]);while(--n);return Vector.create(e)},toRightTriangular:function(){var t,e,n,r,i=this.dup(),a=this.elements.length,o=a,s=this.elements[0].length;do{if(e=o-a,0==i.elements[e][e])for(j=e+1;o>j;j++)if(0!=i.elements[j][e]){t=[],n=s;do r=s-n,t.push(i.elements[e][r]+i.elements[j][r]);while(--n);i.elements[e]=t;break}if(0!=i.elements[e][e])for(j=e+1;o>j;j++){var u=i.elements[j][e]/i.elements[e][e];t=[],n=s;do r=s-n,t.push(e>=r?0:i.elements[j][r]-i.elements[e][r]*u);while(--n);i.elements[j]=t}}while(--a);return i},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;var t,e=this.toRightTriangular(),n=e.elements[0][0],r=e.elements.length-1,i=r;do t=i-r+1,n*=e.elements[t][t];while(--r);return n},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;var t,e=this.elements[0][0],n=this.elements.length-1,r=n;do t=r-n+1,e+=this.elements[t][t];while(--n);return e},tr:function(){return this.trace()},rank:function(){var t,e,n,r=this.toRightTriangular(),i=0,a=this.elements.length,o=a,s=this.elements[0].length;do{t=o-a,e=s;do if(n=s-e,Math.abs(r.elements[t][n])>Sylvester.precision){i++;break}while(--e)}while(--a);return i},rk:function(){return this.rank()},augment:function(t){var e=t.elements||t;"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements);var n,r,i,a=this.dup(),o=a.elements[0].length,s=a.elements.length,u=s,l=e[0].length;if(s!=e.length)return null;do{n=u-s,r=l;do i=l-r,a.elements[n][o+i]=e[n][i];while(--r)}while(--s);return a},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var t,e,n,r,i,a,o,s=this.elements.length,u=s,l=this.augment(Matrix.I(s)).toRightTriangular(),c=l.elements[0].length,h=[];do{t=s-1,i=[],n=c,h[t]=[],a=l.elements[t][t];do r=c-n,o=l.elements[t][r]/a,i.push(o),r>=u&&h[t].push(o);while(--n);for(l.elements[t]=i,e=0;t>e;e++){i=[],n=c;do r=c-n,i.push(l.elements[e][r]-l.elements[t][r]*l.elements[e][t]);while(--n);l.elements[e]=i}}while(--s);return Matrix.create(h)},inv:function(){return this.inverse()},round:function(){return this.map(function(t){return Math.round(t)})},snapTo:function(t){return this.map(function(e){return Math.abs(e-t)<=Sylvester.precision?t:e})},inspect:function(){var t,e=[],n=this.elements.length,r=n;do t=r-n,e.push(Vector.create(this.elements[t]).inspect());while(--n);return e.join("\n")},setElements:function(t){var e,n=t.elements||t;if("undefined"!=typeof n[0][0]){var r,i,a,o=n.length,s=o;this.elements=[];do{e=s-o,r=n[e].length,i=r,this.elements[e]=[];do a=i-r,this.elements[e][a]=n[e][a];while(--r)}while(--o);return this}var u=n.length,l=u;this.elements=[];do e=l-u,this.elements.push([n[e]]);while(--u);return this}},Matrix.create=function(t){var e=new Matrix;return e.setElements(t)},Matrix.I=function(t){var e,n,r,i=[],a=t;do{e=a-t,i[e]=[],n=a;do r=a-n,i[e][r]=e==r?1:0;while(--n)}while(--t);return Matrix.create(i)},Matrix.Diagonal=function(t){var e,n=t.length,r=n,i=Matrix.I(n);do e=r-n,i.elements[e][e]=t[e];while(--n);return i},Matrix.Rotation=function(t,e){if(!e)return Matrix.create([[Math.cos(t),-Math.sin(t)],[Math.sin(t),Math.cos(t)]]);var n=e.dup();if(3!=n.elements.length)return null;var r=n.modulus(),i=n.elements[0]/r,a=n.elements[1]/r,o=n.elements[2]/r,s=Math.sin(t),u=Math.cos(t),l=1-u;return Matrix.create([[l*i*i+u,l*i*a-s*o,l*i*o+s*a],[l*i*a+s*o,l*a*a+u,l*a*o-s*i],[l*i*o-s*a,l*a*o+s*i,l*o*o+u]])},Matrix.RotationX=function(t){var e=Math.cos(t),n=Math.sin(t);return Matrix.create([[1,0,0],[0,e,-n],[0,n,e]])},Matrix.RotationY=function(t){var e=Math.cos(t),n=Math.sin(t);return Matrix.create([[e,0,n],[0,1,0],[-n,0,e]])},Matrix.RotationZ=function(t){var e=Math.cos(t),n=Math.sin(t);return Matrix.create([[e,-n,0],[n,e,0],[0,0,1]])},Matrix.Random=function(t,e){return Matrix.Zero(t,e).map(function(){return Math.random()})},Matrix.Zero=function(t,e){var n,r,i,a=[],o=t;do{n=t-o,a[n]=[],r=e;do i=e-r,a[n][i]=0;while(--r)}while(--o);return Matrix.create(a)},Line.prototype={eql:function(t){return this.isParallelTo(t)&&this.contains(t.anchor)},dup:function(){return Line.create(this.anchor,this.direction)},translate:function(t){var e=t.elements||t;return Line.create([this.anchor.elements[0]+e[0],this.anchor.elements[1]+e[1],this.anchor.elements[2]+(e[2]||0)],this.direction)},isParallelTo:function(t){if(t.normal)return t.isParallelTo(this);var e=this.direction.angleFrom(t.direction);return Math.abs(e)<=Sylvester.precision||Math.abs(e-Math.PI)<=Sylvester.precision},distanceFrom:function(t){if(t.normal)return t.distanceFrom(this);if(t.direction){if(this.isParallelTo(t))return this.distanceFrom(t.anchor);var e=this.direction.cross(t.direction).toUnitVector().elements,n=this.anchor.elements,r=t.anchor.elements;return Math.abs((n[0]-r[0])*e[0]+(n[1]-r[1])*e[1]+(n[2]-r[2])*e[2])}var i=t.elements||t,n=this.anchor.elements,a=this.direction.elements,o=i[0]-n[0],s=i[1]-n[1],u=(i[2]||0)-n[2],l=Math.sqrt(o*o+s*s+u*u);if(0===l)return 0;var c=(o*a[0]+s*a[1]+u*a[2])/l,h=1-c*c;return Math.abs(l*Math.sqrt(0>h?0:h))},contains:function(t){var e=this.distanceFrom(t);return null!==e&&e<=Sylvester.precision},liesIn:function(t){return t.contains(this)},intersects:function(t){return t.normal?t.intersects(this):!this.isParallelTo(t)&&this.distanceFrom(t)<=Sylvester.precision},intersectionWith:function(t){if(t.normal)return t.intersectionWith(this);if(!this.intersects(t))return null;var e=this.anchor.elements,n=this.direction.elements,r=t.anchor.elements,i=t.direction.elements,a=n[0],o=n[1],s=n[2],u=i[0],l=i[1],c=i[2],h=e[0]-r[0],f=e[1]-r[1],g=e[2]-r[2],d=-a*h-o*f-s*g,p=u*h+l*f+c*g,m=a*a+o*o+s*s,v=u*u+l*l+c*c,y=a*u+o*l+s*c,_=(d*v/m+y*p)/(v-y*y);return Vector.create([e[0]+_*a,e[1]+_*o,e[2]+_*s])},pointClosestTo:function(t){if(t.direction){if(this.intersects(t))return this.intersectionWith(t);if(this.isParallelTo(t))return null;var e=this.direction.elements,n=t.direction.elements,r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],l=a*o-r*u,c=r*s-i*o,h=i*u-a*s,f=Vector.create([l*u-c*s,c*o-h*u,h*s-l*o]),g=Plane.create(t.anchor,f);return g.intersectionWith(this)}var g=t.elements||t;if(this.contains(g))return Vector.create(g);var d=this.anchor.elements,e=this.direction.elements,r=e[0],i=e[1],a=e[2],p=d[0],m=d[1],v=d[2],l=r*(g[1]-m)-i*(g[0]-p),c=i*((g[2]||0)-v)-a*(g[1]-m),h=a*(g[0]-p)-r*((g[2]||0)-v),y=Vector.create([i*l-a*h,a*c-r*l,r*h-i*c]),_=this.distanceFrom(g)/y.modulus();return Vector.create([g[0]+y.elements[0]*_,g[1]+y.elements[1]*_,(g[2]||0)+y.elements[2]*_])},rotate:function(t,e){"undefined"==typeof e.direction&&(e=Line.create(e.to3D(),Vector.k));var n=Matrix.Rotation(t,e.direction).elements,r=e.pointClosestTo(this.anchor).elements,i=this.anchor.elements,a=this.direction.elements,o=r[0],s=r[1],u=r[2],l=i[0],c=i[1],h=i[2],f=l-o,g=c-s,d=h-u;return Line.create([o+n[0][0]*f+n[0][1]*g+n[0][2]*d,s+n[1][0]*f+n[1][1]*g+n[1][2]*d,u+n[2][0]*f+n[2][1]*g+n[2][2]*d],[n[0][0]*a[0]+n[0][1]*a[1]+n[0][2]*a[2],n[1][0]*a[0]+n[1][1]*a[1]+n[1][2]*a[2],n[2][0]*a[0]+n[2][1]*a[1]+n[2][2]*a[2]])},reflectionIn:function(t){if(t.normal){var e=this.anchor.elements,n=this.direction.elements,r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],l=this.anchor.reflectionIn(t).elements,c=r+o,h=i+s,f=a+u,g=t.pointClosestTo([c,h,f]).elements,d=[g[0]+(g[0]-c)-l[0],g[1]+(g[1]-h)-l[1],g[2]+(g[2]-f)-l[2]];return Line.create(l,d)}if(t.direction)return this.rotate(Math.PI,t);var p=t.elements||t;return Line.create(this.anchor.reflectionIn([p[0],p[1],p[2]||0]),this.direction)},setVectors:function(t,e){if(t=Vector.create(t),e=Vector.create(e),2==t.elements.length&&t.elements.push(0),2==e.elements.length&&e.elements.push(0),t.elements.length>3||e.elements.length>3)return null;var n=e.modulus();return 0===n?null:(this.anchor=t,this.direction=Vector.create([e.elements[0]/n,e.elements[1]/n,e.elements[2]/n]),this)}},Line.create=function(t,e){var n=new Line;return n.setVectors(t,e)},Line.X=Line.create(Vector.Zero(3),Vector.i),Line.Y=Line.create(Vector.Zero(3),Vector.j),Line.Z=Line.create(Vector.Zero(3),Vector.k),Plane.prototype={eql:function(t){return this.contains(t.anchor)&&this.isParallelTo(t)},dup:function(){return Plane.create(this.anchor,this.normal)},translate:function(t){var e=t.elements||t;return Plane.create([this.anchor.elements[0]+e[0],this.anchor.elements[1]+e[1],this.anchor.elements[2]+(e[2]||0)],this.normal)},isParallelTo:function(t){var e;return t.normal?(e=this.normal.angleFrom(t.normal),Math.abs(e)<=Sylvester.precision||Math.abs(Math.PI-e)<=Sylvester.precision):t.direction?this.normal.isPerpendicularTo(t.direction):null},isPerpendicularTo:function(t){var e=this.normal.angleFrom(t.normal);return Math.abs(Math.PI/2-e)<=Sylvester.precision},distanceFrom:function(t){if(this.intersects(t)||this.contains(t))return 0;if(t.anchor){var e=this.anchor.elements,n=t.anchor.elements,r=this.normal.elements;return Math.abs((e[0]-n[0])*r[0]+(e[1]-n[1])*r[1]+(e[2]-n[2])*r[2])}var i=t.elements||t,e=this.anchor.elements,r=this.normal.elements;return Math.abs((e[0]-i[0])*r[0]+(e[1]-i[1])*r[1]+(e[2]-(i[2]||0))*r[2])},contains:function(t){if(t.normal)return null;if(t.direction)return this.contains(t.anchor)&&this.contains(t.anchor.add(t.direction));var e=t.elements||t,n=this.anchor.elements,r=this.normal.elements,i=Math.abs(r[0]*(n[0]-e[0])+r[1]*(n[1]-e[1])+r[2]*(n[2]-(e[2]||0)));return i<=Sylvester.precision},intersects:function(t){return"undefined"==typeof t.direction&&"undefined"==typeof t.normal?null:!this.isParallelTo(t)},intersectionWith:function(t){if(!this.intersects(t))return null;if(t.direction){var e=t.anchor.elements,n=t.direction.elements,r=this.anchor.elements,i=this.normal.elements,a=(i[0]*(r[0]-e[0])+i[1]*(r[1]-e[1])+i[2]*(r[2]-e[2]))/(i[0]*n[0]+i[1]*n[1]+i[2]*n[2]);return Vector.create([e[0]+n[0]*a,e[1]+n[1]*a,e[2]+n[2]*a])}if(t.normal){for(var o=this.normal.cross(t.normal).toUnitVector(),i=this.normal.elements,e=this.anchor.elements,s=t.normal.elements,u=t.anchor.elements,l=Matrix.Zero(2,2),c=0;l.isSingular();)c++,l=Matrix.create([[i[c%3],i[(c+1)%3]],[s[c%3],s[(c+1)%3]]]);for(var h=l.inverse().elements,f=i[0]*e[0]+i[1]*e[1]+i[2]*e[2],g=s[0]*u[0]+s[1]*u[1]+s[2]*u[2],d=[h[0][0]*f+h[0][1]*g,h[1][0]*f+h[1][1]*g],p=[],m=1;3>=m;m++)p.push(c==m?0:d[(m+(5-c)%3)%3]);return Line.create(p,o)}},pointClosestTo:function(t){var e=t.elements||t,n=this.anchor.elements,r=this.normal.elements,i=(n[0]-e[0])*r[0]+(n[1]-e[1])*r[1]+(n[2]-(e[2]||0))*r[2];return Vector.create([e[0]+r[0]*i,e[1]+r[1]*i,(e[2]||0)+r[2]*i])},rotate:function(t,e){var n=Matrix.Rotation(t,e.direction).elements,r=e.pointClosestTo(this.anchor).elements,i=this.anchor.elements,a=this.normal.elements,o=r[0],s=r[1],u=r[2],l=i[0],c=i[1],h=i[2],f=l-o,g=c-s,d=h-u;return Plane.create([o+n[0][0]*f+n[0][1]*g+n[0][2]*d,s+n[1][0]*f+n[1][1]*g+n[1][2]*d,u+n[2][0]*f+n[2][1]*g+n[2][2]*d],[n[0][0]*a[0]+n[0][1]*a[1]+n[0][2]*a[2],n[1][0]*a[0]+n[1][1]*a[1]+n[1][2]*a[2],n[2][0]*a[0]+n[2][1]*a[1]+n[2][2]*a[2]])},reflectionIn:function(t){if(t.normal){var e=this.anchor.elements,n=this.normal.elements,r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],l=this.anchor.reflectionIn(t).elements,c=r+o,h=i+s,f=a+u,g=t.pointClosestTo([c,h,f]).elements,d=[g[0]+(g[0]-c)-l[0],g[1]+(g[1]-h)-l[1],g[2]+(g[2]-f)-l[2]];return Plane.create(l,d)}if(t.direction)return this.rotate(Math.PI,t);var p=t.elements||t;return Plane.create(this.anchor.reflectionIn([p[0],p[1],p[2]||0]),this.normal)},setVectors:function(t,e,n){if(t=Vector.create(t),t=t.to3D(),null===t)return null;if(e=Vector.create(e),e=e.to3D(),null===e)return null;if("undefined"==typeof n)n=null;else if(n=Vector.create(n),n=n.to3D(),null===n)return null;var r,i,a=t.elements[0],o=t.elements[1],s=t.elements[2],u=e.elements[0],l=e.elements[1],c=e.elements[2];if(null!==n){var h=n.elements[0],f=n.elements[1],g=n.elements[2];if(r=Vector.create([(l-o)*(g-s)-(c-s)*(f-o),(c-s)*(h-a)-(u-a)*(g-s),(u-a)*(f-o)-(l-o)*(h-a)]),i=r.modulus(),0===i)return null;r=Vector.create([r.elements[0]/i,r.elements[1]/i,r.elements[2]/i])}else{if(i=Math.sqrt(u*u+l*l+c*c),0===i)return null;r=Vector.create([e.elements[0]/i,e.elements[1]/i,e.elements[2]/i])}return this.anchor=t,this.normal=r,this}},Plane.create=function(t,e,n){var r=new Plane;return r.setVectors(t,e,n)},Plane.XY=Plane.create(Vector.Zero(3),Vector.k),Plane.YZ=Plane.create(Vector.Zero(3),Vector.i),Plane.ZX=Plane.create(Vector.Zero(3),Vector.j),Plane.YX=Plane.XY,Plane.ZY=Plane.YZ,Plane.XZ=Plane.ZX;var $V=Vector.create,$M=Matrix.create,$L=Line.create,$P=Plane.create;d3=function(){function t(t){return t.target}function e(t){return t.source}function n(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function r(t){for(var e=-1,n=t.length,r=[];++e<n;)r.push(t[e]);return r}function i(t){return Array.prototype.slice.call(t)}function a(){}function o(t){return t}function s(){return!0}function u(t){return"function"==typeof t?t:function(){return t}}function l(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function c(t){return null!=t&&!isNaN(t)}function h(t){return t.length}function f(t){return t.trim().replace(/\s+/g," ")}function g(t){for(var e=1;t*e%1;)e*=10;return e}function d(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function p(t){return t.responseText}function m(t){return JSON.parse(t.responseText)}function v(t){var e=Ia.createRange();return e.selectNode(Ia.body),e.createContextualFragment(t.responseText)}function y(t){return t.responseXML}function _(){}function b(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new a;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function w(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function x(t){return t+""}function M(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function k(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function E(t){return function(e){return 1-t(1-e)}}function S(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function A(t){return t*t}function T(t){return t*t*t}function L(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function D(t){return function(e){return Math.pow(e,t)}}function P(t){return 1-Math.cos(t*La/2)}function C(t){return Math.pow(2,10*(t-1))}function $(t){return 1-Math.sqrt(1-t*t)}function I(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/(2*La)*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,10*-r)*Math.sin(2*(r-n)*La/e)}}function N(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function F(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function B(){Pa.event.stopPropagation(),Pa.event.preventDefault()}function O(){for(var t,e=Pa.event;t=e.sourceEvent;)e=t;return e}function R(t){for(var e=new _,n=0,r=arguments.length;++n<r;)e[arguments[n]]=b(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=Pa.event;i.target=t,Pa.event=i,e[i.type].apply(n,r)}finally{Pa.event=a}}},e}function j(t){var e=[t.a,t.b],n=[t.c,t.d],r=V(e),i=U(e,n),a=V(z(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*$a,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*$a:0}function U(t,e){return t[0]*e[0]+t[1]*e[1]}function V(t){var e=Math.sqrt(U(t,t));return e&&(t[0]/=e,t[1]/=e),e}function z(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Y(t){return"transform"==t?Pa.interpolateTransform:Pa.interpolate}function q(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function H(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function G(){}function W(t,e,n){return new Z(t,e,n)}function Z(t,e,n){this.r=t,this.g=e,this.b=n}function X(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function J(t,e,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ee(i[0]),ee(i[1]),ee(i[2]))}return(a=so.get(t))?e(a.r,a.g,a.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(o=t.charAt(1),o+=o,s=t.charAt(2),s+=s,u=t.charAt(3),u+=u):7===t.length&&(o=t.substring(1,3),s=t.substring(3,5),u=t.substring(5,7)),o=parseInt(o,16),s=parseInt(s,16),u=parseInt(u,16)),e(o,s,u))}function K(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(i=.5>u?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):i=r=0,ne(r,i,u)}function Q(t,e,n){t=te(t),e=te(e),n=te(n);var r=ge((.4124564*t+.3575761*e+.1804375*n)/ho),i=ge((.2126729*t+.7151522*e+.072175*n)/fo),a=ge((.0193339*t+.119192*e+.9503041*n)/go);return ue(116*i-16,500*(r-i),200*(i-a))}function te(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ee(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ne(t,e,n){return new re(t,e,n)}function re(t,e,n){this.h=t,this.s=e,this.l=n}function ie(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,W(i(t+120),i(t),i(t-120))}function ae(t,e,n){return new oe(t,e,n)}function oe(t,e,n){this.h=t,this.c=e,this.l=n}function se(t,e,n){return ue(n,Math.cos(t*=Ca)*e,Math.sin(t)*e)}function ue(t,e,n){return new le(t,e,n)}function le(t,e,n){this.l=t,this.a=e,this.b=n}function ce(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=fe(i)*ho,r=fe(r)*fo,a=fe(a)*go,W(de(3.2404542*i-1.5371385*r-.4985314*a),de(-.969266*i+1.8760108*r+.041556*a),de(.0556434*i-.2040259*r+1.0572252*a))}function he(t,e,n){return ae(Math.atan2(n,e)/La*180,Math.sqrt(e*e+n*n),t)}function fe(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ge(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function de(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function pe(t){return Ya(t,wo),t}function me(t){return function(){return mo(t,this)}}function ve(t){return function(){return vo(t,this)}}function ye(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Pa.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:o:t.local?a:i}function _e(t){return new RegExp("(?:^|\\s+)"+Pa.requote(t)+"(?:\\s+|$)","g")}function be(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=t.trim().split(/\s+/).map(we);var i=t.length;return"function"==typeof e?r:n}function we(t){var e=_e(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.className,a=null!=i.baseVal,o=a?i.baseVal:i;r?(e.lastIndex=0,e.test(o)||(o=f(o+" "+t),a?i.baseVal=o:n.className=o)):o&&(o=f(o.replace(e," ")),a?i.baseVal=o:n.className=o)}}function xe(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?a:i}function Me(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function ke(t){return{__data__:t}}function Ee(t){return function(){return bo(this,t)}}function Se(t){return arguments.length||(t=Pa.ascending),function(e,n){return!e-!n||t(e.__data__,n.__data__)}}function Ae(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){function i(t){var n=Pa.event;Pa.event=t,s[0]=o.__data__;try{e.apply(o,s)}finally{Pa.event=n}}var o=this,s=Va(arguments);r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}var a="__on"+t,o=t.indexOf(".");return o>0&&(t=t.substring(0,o)),e?i:r}function Te(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,a=t[n],o=0,s=a.length;s>o;o++)(i=a[o])&&e(i,o,n);return t}function Le(t){return Ya(t,Mo),t}function De(t,e){return Ya(t,Eo),t.id=e,t}function Pe(t,e,n,r){var i=t.__transition__||(t.__transition__={active:0,count:0}),o=i[n];
if(!o){var s=r.time;return o=i[n]={tween:new a,event:Pa.dispatch("start","end"),time:s,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Pa.timer(function(r){function a(r){return i.active>n?l():(i.active=n,f.start.call(t,c,e),o.tween.forEach(function(n,r){(r=r.call(t,c,e))&&p.push(r)}),u(r)||Pa.timer(u,0,s),1)}function u(r){if(i.active!==n)return l();for(var a=(r-g)/d,o=h(a),s=p.length;s>0;)p[--s].call(t,o);return a>=1?(l(),f.end.call(t,c,e),1):void 0}function l(){return--i.count?delete i[n]:delete t.__transition__,1}var c=t.__data__,h=o.ease,f=o.event,g=o.delay,d=o.duration,p=[];return r>=g?a(r):Pa.timer(a,g,s),1},0,s),o}}function Ce(t){return null==t&&(t=""),function(){this.textContent=t}}function $e(t,e,n,r){var i=t.id;return Te(t,"function"==typeof n?function(t,a,o){t.__transition__[i].tween.set(e,r(n.call(t,t.__data__,a,o)))}:(n=r(n),function(t){t.__transition__[i].tween.set(e,n)}))}function Ie(){for(var t,e=Date.now(),n=Co;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var r=Ne()-e;r>24?(isFinite(r)&&(clearTimeout(Lo),Lo=setTimeout(Ie,r)),To=0):(To=1,$o(Ie))}function Ne(){for(var t=null,e=Co,n=1/0;e;)e.flush?(delete Po[e.callback.id],e=t?t.next=e.next:Co=e.next):(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function Fe(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Io&&(Na.scrollX||Na.scrollY)){n=Pa.select(Ia.body).append("svg").style("position","absolute").style("top",0).style("left",0);var i=n[0][0].getScreenCTM();Io=!(i.f||i.e),n.remove()}return Io?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function Be(){}function Oe(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Re(t){return t.rangeExtent?t.rangeExtent():Oe(t.range())}function je(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),(e=e(o-a))&&(t[r]=e.floor(a),t[i]=e.ceil(o)),t}function Ue(){return Math}function Ve(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Ze:We,u=r?H:q;return o=i(t,e,u,n),s=i(e,t,u,Pa.interpolate),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(Pa.interpolateRound)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return He(t,e)},a.tickFormat=function(e){return Ge(t,e)},a.nice=function(){return je(t,Ye),i()},a.copy=function(){return Ve(t,e,n,r)},i()}function ze(t,e){return Pa.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ye(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function qe(t,e){var n=Oe(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function He(t,e){return Pa.range.apply(Pa,qe(t,e))}function Ge(t,e){return Pa.format(",."+Math.max(0,-Math.floor(Math.log(qe(t,e)[2])/Math.LN10+.01))+"f")}function We(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Ze(t,e,n,r){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=Pa.bisect(t,e,1,s)-1;return a[n](i[n](e))}}function Xe(t,e){function n(n){return t(e(n))}var r=e.pow;return n.invert=function(e){return r(t.invert(e))},n.domain=function(i){return arguments.length?(e=i[0]<0?Ke:Je,r=e.pow,t.domain(i.map(e)),n):t.domain().map(r)},n.nice=function(){return t.domain(je(t.domain(),Ue)),n},n.ticks=function(){var n=Oe(t.domain()),i=[];if(n.every(isFinite)){var a=Math.floor(n[0]),o=Math.ceil(n[1]),s=r(n[0]),u=r(n[1]);if(e===Ke)for(i.push(r(a));a++<o;)for(var l=9;l>0;l--)i.push(r(a)*l);else{for(;o>a;a++)for(var l=1;10>l;l++)i.push(r(a)*l);i.push(r(a))}for(a=0;i[a]<s;a++);for(o=i.length;i[o-1]>u;o--);i=i.slice(a,o)}return i},n.tickFormat=function(t,i){if(arguments.length<2&&(i=No),!arguments.length)return i;var a,o=Math.max(.1,t/n.ticks().length),s=e===Ke?(a=-1e-12,Math.floor):(a=1e-12,Math.ceil);return function(t){return t/r(s(e(t)+a))<=o?i(t):""}},n.copy=function(){return Xe(t.copy(),e)},ze(n,t)}function Je(t){return Math.log(0>t?0:t)/Math.LN10}function Ke(t){return-Math.log(t>0?0:-t)/Math.LN10}function Qe(t,e){function n(e){return t(r(e))}var r=tn(e),i=tn(1/e);return n.invert=function(e){return i(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(r)),n):t.domain().map(i)},n.ticks=function(t){return He(n.domain(),t)},n.tickFormat=function(t){return Ge(n.domain(),t)},n.nice=function(){return n.domain(je(n.domain(),Ye))},n.exponent=function(t){if(!arguments.length)return e;var a=n.domain();return r=tn(e=t),i=tn(1/e),n.domain(a)},n.copy=function(){return Qe(t.copy(),e)},ze(n,t)}function tn(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function en(t,e){function n(e){return o[((i.get(e)||i.set(e,t.push(e)))-1)%o.length]}function r(e,n){return Pa.range(t.length).map(function(t){return e+n*t})}var i,o,s;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new a;for(var o,s=-1,u=r.length;++s<u;)i.has(o=r[s])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var u=i[0],l=i[1],c=(l-u)/(Math.max(1,t.length-1)+a);return o=r(t.length<2?(u+l)/2:u+c*a/2,c),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=(h-c)/(t.length-a+2*u);return o=r(c+f*u,f),l&&o.reverse(),s=f*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=Math.floor((h-c)/(t.length-a+2*u)),g=h-c-(t.length-a)*f;return o=r(c+Math.round(g/2),f),l&&o.reverse(),s=Math.round(f*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Oe(e.a[0])},n.copy=function(){return en(t,e)},n.domain(t)}function nn(t,e){function n(){var n=0,a=e.length;for(i=[];++n<a;)i[n-1]=Pa.quantile(t,n/a);return r}function r(t){return isNaN(t=+t)?0/0:e[Pa.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(Pa.ascending),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.copy=function(){return nn(t,e)},n()}function rn(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.copy=function(){return rn(t,e,n)},i()}function an(t,e){function n(n){return e[Pa.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return an(t,e)},n}function on(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return He(t,e)},e.tickFormat=function(e){return Ge(t,e)},e.copy=function(){return on(t)},e}function sn(t){return t.innerRadius}function un(t){return t.outerRadius}function ln(t){return t.startAngle}function cn(t){return t.endAngle}function hn(t){function e(e){function o(){c.push("M",a(t(h),l))}for(var s,c=[],h=[],f=-1,g=e.length,d=u(n),p=u(r);++f<g;)i.call(this,s=e[f],f)?h.push([+d.call(this,s,f),+p.call(this,s,f)]):h.length&&(o(),h=[]);return h.length&&o(),c.length?c.join(""):null}var n=fn,r=gn,i=s,a=dn,o=a.key,l=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=Vo.get(t)||dn).key,e):o},e.tension=function(t){return arguments.length?(l=t,e):l},e}function fn(t){return t[0]}function gn(t){return t[1]}function dn(t){return t.join("L")}function pn(t){return dn(t)+"Z"}function mn(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function vn(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function yn(t,e){return t.length<4?dn(t):t[1]+wn(t.slice(1,t.length-1),xn(t,e))}function _n(t,e){return t.length<3?dn(t):t[0]+wn((t.push(t[0]),t),xn([t[t.length-2]].concat(t,[t[1]]),e))}function bn(t,e){return t.length<3?dn(t):t[0]+wn(t,xn(t,e))}function wn(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return dn(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),e.length>1){s=e[1],a=t[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,u++)a=t[u],s=e[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function xn(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Mn(t){if(t.length<3)return dn(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a];for(Tn(u,o,s);++e<n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Tn(u,o,s);for(e=-1;++e<2;)o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Tn(u,o,s);return u.join("")}function kn(t){if(t.length<4)return dn(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(An(qo,a)+","+An(qo,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Tn(n,a,o);return n.join("")}function En(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[An(qo,o),",",An(qo,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Tn(e,o,s);return e.join("")}function Sn(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*u);return Mn(t)}function An(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Tn(t,e,n){t.push("C",An(zo,e),",",An(zo,n),",",An(Yo,e),",",An(Yo,n),",",An(qo,e),",",An(qo,n))}function Ln(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Dn(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Ln(i,a);++e<n;)r[e]=(o+(o=Ln(i=a,a=t[e+1])))/2;return r[e]=o,r}function Pn(t){for(var e,n,r,i,a=[],o=Dn(t),s=-1,u=t.length-1;++s<u;)e=Ln(t[s],t[s+1]),Math.abs(e)<1e-6?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Cn(t){return t.length<3?dn(t):t[0]+wn(t,Pn(t))}function $n(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]+jo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function In(t){function e(e){function s(){m.push("M",l(t(y),g),f,h(t(v.reverse()),g),"Z")}for(var c,d,p,m=[],v=[],y=[],_=-1,b=e.length,w=u(n),x=u(i),M=n===r?function(){return d}:u(r),k=i===a?function(){return p}:u(a);++_<b;)o.call(this,c=e[_],_)?(v.push([d=+w.call(this,c,_),p=+x.call(this,c,_)]),y.push([+M.call(this,c,_),+k.call(this,c,_)])):v.length&&(s(),v=[],y=[]);return v.length&&s(),m.length?m.join(""):null}var n=fn,r=fn,i=0,a=gn,o=s,l=dn,c=l.key,h=l,f="L",g=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(c="function"==typeof t?l=t:(l=Vo.get(t)||dn).key,h=l.reverse||l,f=l.closed?"M":"L",e):c},e.tension=function(t){return arguments.length?(g=t,e):g},e}function Nn(t){return t.radius}function Fn(t){return[t.x,t.y]}function Bn(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+jo;return[n*Math.cos(r),n*Math.sin(r)]}}function On(){return 64}function Rn(){return"circle"}function jn(t){var e=Math.sqrt(t/La);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Un(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Vn(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function zn(t,e,n){if(r=[],n&&e.length>1){for(var r,i,a,o=Oe(t.domain()),s=-1,u=e.length,l=(e[1]-e[0])/++n;++s<u;)for(i=n;--i>0;)(a=+e[s]-i*l)>=o[0]&&r.push(a);for(--s,i=0;++i<n&&(a=+e[s]+i*l)<o[1];)r.push(a)}return r}function Yn(t){for(var e=t.source,n=t.target,r=Hn(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function qn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Hn(t,e){if(t===e)return t;for(var n=qn(t),r=qn(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function Gn(t){t.fixed|=2}function Wn(t){t.fixed&=-7}function Zn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Xn(t){t.fixed&=-5}function Jn(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,u=-1;++u<s;)a=o[u],null!=a&&(Jn(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Kn(t){return t.x}function Qn(t){return t.y}function tr(t,e,n){t.y0=e,t.y=n}function er(t){return Pa.range(t.length)}function nr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function rr(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function ir(t){return t.reduce(ar,0)}function ar(t,e){return t+e[1]}function or(t,e){return sr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function sr(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function ur(t){return[Pa.min(t),Pa.max(t)]}function lr(t,e){return Pa.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=gr,t}function cr(t){return t.children}function hr(t){return t.value}function fr(t,e){return e.value-t.value}function gr(t){return Pa.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function dr(t,e){return t.value-e.value}function pr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function mr(t,e){t._pack_next=e,e._pack_prev=t}function vr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-n*n-r*r>.001}function yr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),g=Math.max(t.y+t.r,g)}if((n=t.children)&&(l=n.length)){var n,r,i,a,o,s,u,l,c=1/0,h=-1/0,f=1/0,g=-1/0;if(n.forEach(_r),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(a=n[2],xr(r,i,a),e(a),pr(r,a),r._pack_prev=a,pr(a,i),i=r._pack_next,o=3;l>o;o++){xr(r,i,a=n[o]);var d=0,p=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,p++)if(vr(s,a)){d=1;break}if(1==d)for(u=r._pack_prev;u!==s._pack_prev&&!vr(u,a);u=u._pack_prev,m++);d?(m>p||p==m&&i.r<r.r?mr(r,i=s):mr(r=u,i),o--):(pr(r,a),i=a,e(a))}var v=(c+h)/2,y=(f+g)/2,_=0;for(o=0;l>o;o++)a=n[o],a.x-=v,a.y-=y,_=Math.max(_,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=_,n.forEach(br)}}function _r(t){t._pack_next=t._pack_prev=t}function br(t){delete t._pack_next,delete t._pack_prev}function wr(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)wr(i[a],e,n,r)}function xr(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a;o*=o,r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+l*a,n.y=t.y+u*a-l*i}else n.x=t.x+r,n.y=t.y}function Mr(t){return 1+Pa.max(t,function(t){return t.y})}function kr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Er(t){var e=t.children;return e&&e.length?Er(e[0]):t}function Sr(t){var e,n=t.children;return n&&(e=n.length)?Sr(n[e-1]):t}function Ar(t,e){return t.parent==e.parent?1:2}function Tr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Lr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function Dr(t,e){var n=t.children;if(n&&(i=n.length))for(var r,i,a=-1;++a<i;)e(r=Dr(n[a],e),t)>0&&(t=r);return t}function Pr(t,e){return t.x-e.x}function Cr(t,e){return e.x-t.x}function $r(t,e){return t.depth-e.depth}function Ir(t,e){function n(t,r){var i=t.children;if(i&&(o=i.length))for(var a,o,s=null,u=-1;++u<o;)a=i[u],n(a,s),s=a;e(t,r)}n(t,null)}function Nr(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(r+=e.change)}function Fr(t,e,n){t=t._tree,e=e._tree;var r=n/(e.number-t.number);t.change+=r,e.change-=r,e.shift+=n,e.prelim+=n,e.mod+=n}function Br(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Or(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Rr(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function jr(t,e){function n(t,n){return Pa.xhr(t,e,n).response(r)}function r(t){return n.parse(t.responseText)}function i(e){return e.map(a).join(t)}function a(t){return o.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var o=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return n.parse=function(t){var e;return n.parseRows(t,function(t){return e?e(t):void(e=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}"))})},n.parseRows=function(t,e){function n(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return t.substring(e,c-u)}return t.substring(e)}for(var r,i,a={},o={},u=[],l=t.length,c=0,h=0;(r=n())!==o;){for(var f=[];r!==a&&r!==o;)f.push(r),r=n();(!e||(f=e(f,h++)))&&u.push(f)}return u},n.format=function(t){return t.map(i).join("\n")},n}function Ur(t,e){us.hasOwnProperty(t.type)&&us[t.type](t,e)}function Vr(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1]);e.lineEnd()}function zr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Vr(t[n],e,1);e.polygonEnd()}function Yr(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function qr(t,e){return Math.abs(t[0]-e[0])<Da&&Math.abs(t[1]-e[1])<Da}function Hr(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Gr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Xr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Jr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Kr(t){function e(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function a(){c=0/0,p.point=o,e.lineStart()}function o(r,a){var o=Hr([r,a]),s=t(r,a);n(c,h,l,f,g,d,c=s[0],h=s[1],l=r,f=o[0],g=o[1],d=o[2],i,e),e.point(c,h)}function s(){p.point=r,e.lineEnd()}function u(){var t,r,u,m,v,y,_;a(),p.point=function(e,n){o(t=e,r=n),u=c,m=h,v=f,y=g,_=d,p.point=o},p.lineEnd=function(){n(c,h,l,f,g,d,u,m,t,v,y,_,i,e),p.lineEnd=s,s()}}var l,c,h,f,g,d,p={point:r,lineStart:a,lineEnd:s,polygonStart:function(){e.polygonStart(),p.lineStart=u},polygonEnd:function(){e.polygonEnd(),p.lineStart=a}};return p}function n(e,i,a,o,s,u,l,c,h,f,g,d,p,m){var v=l-e,y=c-i,_=v*v+y*y;if(_>4*r&&p--){var b=o+f,w=s+g,x=u+d,M=Math.sqrt(b*b+w*w+x*x),k=Math.asin(x/=M),E=Math.abs(Math.abs(x)-1)<Da?(a+h)/2:Math.atan2(w,b),S=t(E,k),A=S[0],T=S[1],L=A-e,D=T-i,P=y*L-v*D;(P*P/_>r||Math.abs((v*L+y*D)/_-.5)>.3)&&(n(e,i,a,o,s,u,A,T,E,b/=M,w/=M,x,p,m),m.point(A,T),n(A,T,E,b,w,x,l,c,h,f,g,d,p,m))}}var r=.5,i=16;return e.precision=function(t){return arguments.length?(i=(r=t*t)>0&&16,e):Math.sqrt(r)},e}function Qr(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,Math.asin((a-(t*t+n*n)*i*i)/(2*i))]},n}function ti(t){function e(t,e){r>t&&(r=t),t>a&&(a=t),i>e&&(i=e),e>o&&(o=e)}function n(){s.point=s.lineEnd=Be}var r,i,a,o,s={point:e,lineStart:Be,lineEnd:Be,polygonStart:function(){s.lineEnd=n},polygonEnd:function(){s.point=e}};return function(e){return o=a=-(r=i=1/0),Pa.geo.stream(e,t(s)),[[r,i],[a,o]]}}function ei(t,e){if(!hs){++fs,t*=Ca;var n=Math.cos(e*=Ca);gs+=(n*Math.cos(t)-gs)/fs,ds+=(n*Math.sin(t)-ds)/fs,ps+=(Math.sin(e)-ps)/fs}}function ni(){var t,e;hs=1,ri(),hs=2;var n=ms.point;ms.point=function(r,i){n(t=r,e=i)},ms.lineEnd=function(){ms.point(t,e),ii(),ms.lineEnd=ii}}function ri(){function t(t,i){t*=Ca;var a=Math.cos(i*=Ca),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*o-e*u)*l+(l=e*s-n*o)*l),e*o+n*s+r*u);fs+=l,gs+=l*(e+(e=o)),ds+=l*(n+(n=s)),ps+=l*(r+(r=u))}var e,n,r;hs>1||(1>hs&&(hs=1,fs=gs=ds=ps=0),ms.point=function(i,a){i*=Ca;var o=Math.cos(a*=Ca);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),ms.point=t})}function ii(){ms.point=ei}function ai(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){null!=i?(i=oi(n,i),a=oi(n,a),(o>0?a>i:i>a)&&(i+=2*o*La)):(i=t+2*o*La,a=t);for(var u,l=o*e,c=i;o>0?c>a:a>c;c-=l)s.point((u=Yr([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function oi(t,e){var n=Hr(e);n[0]-=t,Jr(n);var r=Math.acos(Math.max(-1,Math.min(1,-n[1])));return((-n[2]<0?-r:r)+2*Math.PI-Da)%(2*Math.PI)}function si(t,e,n){return function(r){function i(e,n){t(e,n)&&r.point(e,n)}function a(t,e){m.point(t,e)}function o(){v.point=a,m.lineStart()}function s(){v.point=i,m.lineEnd()}function u(t,e){_.point(t,e),p.push([t,e])}function l(){_.lineStart(),p=[]}function c(){u(p[0][0],p[0][1]),_.lineEnd();var t,e=_.clean(),n=y.buffer(),i=n.length;if(!i)return d=!0,g+=gi(p,-1),void(p=null);if(p=null,1&e){t=n[0],f+=gi(t,1);var a,i=t.length-1,o=-1;for(r.lineStart();++o<i;)r.point((a=t[o])[0],a[1]);return void r.lineEnd()}i>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(hi))}var h,f,g,d,p,m=e(r),v={point:i,lineStart:o,lineEnd:s,polygonStart:function(){v.point=u,v.lineStart=l,v.lineEnd=c,d=!1,g=f=0,h=[],r.polygonStart()},polygonEnd:function(){v.point=i,v.lineStart=o,v.lineEnd=s,h=Pa.merge(h),h.length?ui(h,n,r):(-Da>f||d&&-Da>g)&&(r.lineStart(),n(null,null,1,r),r.lineEnd()),r.polygonEnd(),h=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}},y=fi(),_=e(y);return v}}function ui(t,e,n){var r=[],i=[];if(t.forEach(function(t){if(!((e=t.length)<=1)){var e,a=t[0],o=t[e-1];if(qr(a,o)){n.lineStart();for(var s=0;e>s;++s)n.point((a=t[s])[0],a[1]);return void n.lineEnd()}var u={point:a,points:t,other:null,visited:!1,entry:!0,subject:!0},l={point:a,points:[a],other:u,visited:!1,entry:!1,subject:!1};u.other=l,r.push(u),i.push(l),u={point:o,points:[o],other:null,visited:!1,entry:!1,subject:!0},l={point:o,points:[o],other:u,visited:!1,entry:!0,subject:!1},u.other=l,r.push(u),i.push(l)}}),i.sort(ci),li(r),li(i),r.length)for(var a,o,s,u=r[0];;){for(a=u;a.visited;)if((a=a.next)===u)return;o=a.points,n.lineStart();do{if(a.visited=a.other.visited=!0,a.entry){if(a.subject)for(var l=0;l<o.length;l++)n.point((s=o[l])[0],s[1]);else e(a.point,a.next.point,1,n);a=a.next}else{if(a.subject){o=a.prev.points;for(var l=o.length;--l>=0;)n.point((s=o[l])[0],s[1])}else e(a.point,a.prev.point,-1,n);a=a.prev}a=a.other,o=a.points}while(!a.visited);n.lineEnd()}}function li(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.next=n=t[r],n.prev=i,i=n;i.next=n=t[0],n.prev=i}}function ci(t,e){return((t=t.point)[0]<0?t[1]-La/2-Da:La/2-t[1])-((e=e.point)[0]<0?e[1]-La/2-Da:La/2-e[1])}function hi(t){return t.length>1}function fi(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:Be,buffer:function(){var n=e;return e=[],t=null,n}}}function gi(t,e){if(!(n=t.length))return 0;for(var n,r,i,a=0,o=0,s=t[0],u=s[0],l=s[1],c=Math.cos(l),h=Math.atan2(e*Math.sin(u)*c,Math.sin(l)),f=1-e*Math.cos(u)*c,g=h;++a<n;)s=t[a],c=Math.cos(l=s[1]),r=Math.atan2(e*Math.sin(u=s[0])*c,Math.sin(l)),i=1-e*Math.cos(u)*c,Math.abs(f-2)<Da&&Math.abs(i-2)<Da||(Math.abs(i)<Da||Math.abs(f)<Da||(Math.abs(Math.abs(r-h)-La)<Da?i+f>2&&(o+=4*(r-h)):o+=Math.abs(f-2)<Da?4*(r-g):((3*La+r-h)%(2*La)-La)*(f+i)),g=h,h=r,f=i);return o}function di(t){var e,n=0/0,r=0/0,i=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?La:-La,u=Math.abs(a-n);Math.abs(u-La)<Da?(t.point(n,r=(r+o)/2>0?La/2:-La/2),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=La&&(Math.abs(n-i)<Da&&(n-=i*Da),Math.abs(a-s)<Da&&(a-=s*Da),r=pi(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function pi(t,e,n,r){var i,a,o=Math.sin(t-n);return Math.abs(o)>Da?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function mi(t,e,n,r){var i;if(null==t)i=n*La/2,r.point(-La,i),r.point(0,i),r.point(La,i),r.point(La,0),r.point(La,-i),r.point(0,-i),r.point(-La,-i),r.point(-La,0),r.point(-La,i);else if(Math.abs(t[0]-e[0])>Da){var a=(t[0]<e[0]?1:-1)*La;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function vi(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,i,a,o;return{lineStart:function(){a=i=!1,o=1},point:function(s,u){var l,c=[s,u],h=e(s,u);!n&&(a=i=h)&&t.lineStart(),h!==i&&(l=r(n,c),(qr(n,l)||qr(c,l))&&(c[0]+=Da,c[1]+=Da,h=e(c[0],c[1]))),h!==i&&(o=0,(i=h)?(t.lineStart(),l=r(c,n),t.point(l[0],l[1])):(l=r(n,c),t.point(l[0],l[1]),t.lineEnd()),n=l),!h||n&&qr(n,c)||t.point(c[0],c[1]),n=c},lineEnd:function(){i&&t.lineEnd(),n=null},clean:function(){return o|(a&&i)<<1}}}function r(t,e){var n=Hr(t,0),r=Hr(e,0),i=[1,0,0],o=Wr(n,r),s=Gr(o,o),u=o[0],l=s-u*u;if(!l)return t;var c=a*s/l,h=-a*u/l,f=Wr(i,o),g=Xr(i,c),d=Xr(o,h);Zr(g,d);var p=f,m=Gr(g,p),v=Gr(p,p),y=Math.sqrt(m*m-v*(Gr(g,g)-1)),_=Xr(p,(-m-y)/v);return Zr(_,g),Yr(_)}var i=t*Ca,a=Math.cos(i),o=ai(i,6*Ca);return si(e,n,o)}function yi(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function _i(t,e){return[t,e]}function bi(t,e,n){var r=Pa.range(t,e-Da,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function wi(t,e,n){var r=Pa.range(t,e-Da,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function xi(t){return(t=Math.sin(t/2))*t}function Mi(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),l=i*Math.sin(t),c=o*Math.cos(n),h=o*Math.sin(n),f=2*Math.asin(Math.sqrt(xi(r-e)+i*o*xi(n-t))),g=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*g,n=Math.sin(f-t)*g,r=n*u+e*c,i=n*l+e*h,o=n*a+e*s;return[Math.atan2(i,r)*$a,Math.atan2(o,Math.sqrt(r*r+i*i))*$a]}:function(){return[t*$a,e*$a]};return d.distance=f,d}function ki(t,e){return[t/(2*La),Math.max(-.5,Math.min(.5,Math.log(Math.tan(La/4+e/2))/(2*La)))]}function Ei(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Si(t){var e=Kr(function(e,n){return t([e*$a,n*$a])});return function(t){return t=e(t),{point:function(e,n){t.point(e*Ca,n*Ca)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}function Ai(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=Ei(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=Ei(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ti(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,o,0,2*La)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:Be};return s}function Li(){function t(t,e){ws+=i*t-r*e,r=t,i=e}var e,n,r,i;xs.point=function(a,o){xs.point=t,e=r=a,n=i=o},xs.lineEnd=function(){t(e,n)}}function Di(t,e){hs||(gs+=t,ds+=e,++ps)}function Pi(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);gs+=o*(e+t)/2,ds+=o*(n+r)/2,ps+=o,e=t,n=r}var e,n;if(1!==hs){if(!(1>hs))return;hs=1,gs=ds=ps=0}Ms.point=function(r,i){Ms.point=t,e=r,n=i}}function Ci(){Ms.point=Di}function $i(){function t(t,e){var n=i*t-r*e;gs+=n*(r+t),ds+=n*(i+e),ps+=3*n,r=t,i=e}var e,n,r,i;2>hs&&(hs=2,gs=ds=ps=0),Ms.point=function(a,o){Ms.point=t,e=r=a,n=i=o},Ms.lineEnd=function(){t(e,n)}}function Ii(){function t(t,e){t*=Ca,e=e*Ca/2+La/4;var n=t-r,o=Math.cos(e),s=Math.sin(e),u=a*s,l=Es,c=Ss,h=i*o+u*Math.cos(n),f=u*Math.sin(n);Es=l*h-c*f,Ss=c*h+l*f,r=t,i=o,a=s}var e,n,r,i,a;As.point=function(o,s){As.point=t,r=(e=o)*Ca,i=Math.cos(s=(n=s)*Ca/2+La/4),a=Math.sin(s)},As.lineEnd=function(){t(e,n)}}function Ni(t){return Fi(function(){return t})()}function Fi(t){function e(t){return t=o(t[0]*Ca,t[1]*Ca),[t[0]*c+s,u-t[1]*c]}function n(t){return t=o.invert((t[0]-s)/c,(u-t[1])/c),t&&[t[0]*$a,t[1]*$a]}function r(){o=yi(a=Oi(p,m,v),i);var t=i(g,d);return s=h-t[0]*c,u=f+t[1]*c,e}var i,a,o,s,u,l=Kr(function(t,e){return t=i(t,e),[t[0]*c+s,u-t[1]*c]}),c=150,h=480,f=250,g=0,d=0,p=0,m=0,v=0,y=vs,_=null;return e.stream=function(t){return Bi(a,y(l(t)))},e.clipAngle=function(t){return arguments.length?(y=null==t?(_=t,vs):vi(_=+t),e):_},e.scale=function(t){return arguments.length?(c=+t,r()):c},e.translate=function(t){return arguments.length?(h=+t[0],f=+t[1],r()):[h,f]},e.center=function(t){return arguments.length?(g=t[0]%360*Ca,d=t[1]%360*Ca,r()):[g*$a,d*$a]},e.rotate=function(t){return arguments.length?(p=t[0]%360*Ca,m=t[1]%360*Ca,v=t.length>2?t[2]%360*Ca:0,r()):[p*$a,m*$a,v*$a]},Pa.rebind(e,l,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,r()}}function Bi(t,e){return{point:function(n,r){r=t(n*Ca,r*Ca),n=r[0],e.point(n>La?n-2*La:-La>n?n+2*La:n,r[1])},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Oi(t,e,n){return t?e||n?yi(ji(t),Ui(e,n)):ji(t):e||n?Ui(e,n):_i}function Ri(t){return function(e,n){return e+=t,[e>La?e-2*La:-La>e?e+2*La:e,n]}}function ji(t){var e=Ri(t);return e.invert=Ri(-t),e}function Ui(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*r+s*i;return[Math.atan2(u*a-c*o,s*r-l*i),Math.asin(Math.max(-1,Math.min(1,c*a+u*o)))]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);
return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*a-u*o;return[Math.atan2(u*a+l*o,s*r+c*i),Math.asin(Math.max(-1,Math.min(1,c*r-s*i)))]},n}function Vi(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function zi(t,e,n,r){var i,a,o,s,u,l,c;return i=r[t],a=i[0],o=i[1],i=r[e],s=i[0],u=i[1],i=r[n],l=i[0],c=i[1],(c-o)*(s-a)-(u-o)*(l-a)>0}function Yi(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function qi(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],l=n[1],c=e[1]-u,h=r[1]-l,f=(s*(u-l)-h*(i-a))/(h*o-s*c);return[i+f*o,u+f*c]}function Hi(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=r.leftEnd;do e=e.r;while(e!=r.rightEnd&&i.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[Ls[t.side]]}},i={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},r=e.x-t.x,i=e.y-t.y,a=r>0?r:-r,o=i>0?i:-i;return n.c=t.x*r+t.y*i+.5*(r*r+i*i),a>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(t,e){var n=t.edge,r=e.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var a,o,s=(n.c*r.b-r.c*n.b)/i,u=(r.c*n.a-n.c*r.a)/i,l=n.region.r,c=r.region.r;l.y<c.y||l.y==c.y&&l.x<c.x?(a=t,o=n):(a=e,o=r);var h=s>=o.region.r.x;return h&&"l"===a.side||!h&&"r"===a.side?null:{x:s,y:u}},rightOf:function(t,e){var n=t.edge,r=n.region.r,i=e.x>r.x;if(i&&"l"===t.side)return 1;if(!i&&"r"===t.side)return 0;if(1===n.a){var a=e.y-r.y,o=e.x-r.x,s=0,u=0;if(!i&&n.b<0||i&&n.b>=0?u=s=a>=n.b*o:(u=e.x+e.y*n.b>n.c,n.b<0&&(u=!u),u||(s=1)),!s){var l=r.x-n.region.l.x;u=n.b*(o*o-a*a)<l*a*(1+2*o/l+n.b*n.b),n.b<0&&(u=!u)}}else{var c=n.c-n.a*e.x,h=e.y-c,f=e.x-r.x,g=c-r.y;u=h*h>f*f+g*g}return"l"===t.side?u:!u},endPoint:function(t,n,r){t.ep[n]=r,t.ep[Ls[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},a={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var r=0,i=a.list,o=i.length;o>r;r++){var s=i[r];if(!(t.ystar>s.ystar||t.ystar==s.ystar&&e.x>s.vertex.x))break}i.splice(r,0,t)},del:function(t){for(var e=0,n=a.list,r=n.length;r>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===a.list.length},nextEvent:function(t){for(var e=0,n=a.list,r=n.length;r>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=a.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return a.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var o,s,u,l,c,h,f,g,d,p,m,v,y,_=n.list.shift();;)if(a.empty()||(o=a.min()),_&&(a.empty()||_.y<o.y||_.y==o.y&&_.x<o.x))s=r.leftBound(_),u=r.right(s),f=r.rightRegion(s),v=i.bisect(f,_),h=r.createHalfEdge(v,"l"),r.insert(s,h),p=i.intersect(s,h),p&&(a.del(s),a.insert(s,p,i.distance(p,_))),s=h,h=r.createHalfEdge(v,"r"),r.insert(s,h),p=i.intersect(h,u),p&&a.insert(h,p,i.distance(p,_)),_=n.list.shift();else{if(a.empty())break;s=a.extractMin(),l=r.left(s),u=r.right(s),c=r.right(u),f=r.leftRegion(s),g=r.rightRegion(u),m=s.vertex,i.endPoint(s.edge,s.side,m),i.endPoint(u.edge,u.side,m),r.del(s),a.del(u),r.del(u),y="l",f.y>g.y&&(d=f,f=g,g=d,y="r"),v=i.bisect(f,g),h=r.createHalfEdge(v,y),r.insert(l,h),i.endPoint(v,Ls[y],m),p=i.intersect(l,h),p&&(a.del(l),a.insert(l,p,i.distance(p,f))),p=i.intersect(h,c),p&&a.insert(h,p,i.distance(p,f))}for(s=r.right(r.leftEnd);s!=r.rightEnd;s=r.right(s))e(s.edge)}function Gi(){return{leaf:!0,nodes:[],point:null}}function Wi(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=e.nodes;u[0]&&Wi(t,u[0],n,r,o,s),u[1]&&Wi(t,u[1],o,r,i,s),u[2]&&Wi(t,u[2],n,s,o,a),u[3]&&Wi(t,u[3],o,s,i,a)}}function Zi(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Xi(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;s>o;){if(r>=u)return-1;if(i=e.charCodeAt(o++),37===i){if(a=Ws[e.charAt(o++)],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Ji(t){return new RegExp("^(?:"+t.map(Pa.requote).join("|")+")","i")}function Ki(t){for(var e=new a,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Qi(t,e,n){t+="";var r=t.length;return n>r?new Array(n-r+1).join(e)+t:t}function ta(t,e,n){Us.lastIndex=0;var r=Us.exec(e.substring(n));return r?n+=r[0].length:-1}function ea(t,e,n){js.lastIndex=0;var r=js.exec(e.substring(n));return r?n+=r[0].length:-1}function na(t,e,n){Ys.lastIndex=0;var r=Ys.exec(e.substring(n));return r?(t.m=qs.get(r[0].toLowerCase()),n+=r[0].length):-1}function ra(t,e,n){Vs.lastIndex=0;var r=Vs.exec(e.substring(n));return r?(t.m=zs.get(r[0].toLowerCase()),n+=r[0].length):-1}function ia(t,e,n){return Xi(t,Gs.c.toString(),e,n)}function aa(t,e,n){return Xi(t,Gs.x.toString(),e,n)}function oa(t,e,n){return Xi(t,Gs.X.toString(),e,n)}function sa(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+=r[0].length):-1}function ua(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.y=la(+r[0]),n+=r[0].length):-1}function la(t){return t+(t>68?1900:2e3)}function ca(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+=r[0].length):-1}function ha(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+=r[0].length):-1}function fa(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+=r[0].length):-1}function ga(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+=r[0].length):-1}function da(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+=r[0].length):-1}function pa(t,e,n){Zs.lastIndex=0;var r=Zs.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+=r[0].length):-1}function ma(t,e,n){var r=Xs.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}function va(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(Math.abs(e)/60),i=Math.abs(e)%60;return n+Qi(r,"0",2)+Qi(i,"0",2)}function ya(t){return t.toISOString()}function _a(t,e,n){function r(e){var n=t(e),r=a(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new Ds(n-1)),1),n}function a(t,n){return e(t=new Ds(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;r>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{Ds=Zi;var r=new Zi;return r._=t,o(r,e,n)}finally{Ds=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var u=t.utc=ba(t);return u.floor=u,u.round=ba(r),u.ceil=ba(i),u.offset=ba(a),u.range=s,t}function ba(t){return function(e,n){try{Ds=Zi;var r=new Zi;return r._=e,t(r,n)._}finally{Ds=Date}}}function wa(t,e,n){function r(e){return t(e)}return r.invert=function(e){return Ma(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ma)},r.nice=function(t){return r.domain(je(r.domain(),function(){return t}))},r.ticks=function(n,i){var a=xa(r.domain());if("function"!=typeof n){var o=a[1]-a[0],s=o/n,u=Pa.bisect(Ks,s);if(u==Ks.length)return e.year(a,n);if(!u)return t.ticks(n).map(Ma);Math.log(s/Ks[u-1])<Math.log(Ks[u]/s)&&--u,n=e[u],i=n[1],n=n[0].range}return n(a[0],new Date(+a[1]+1),i)},r.tickFormat=function(){return n},r.copy=function(){return wa(t.copy(),e,n)},Pa.rebind(r,t,"range","rangeRound","interpolate","clamp")}function xa(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ma(t){return new Date(t)}function ka(t){return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n];return r[0](e)}}function Ea(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function Sa(t){var e=t.getFullYear(),n=Ea(e),r=Ea(e+1);return e+(t-n)/(r-n)}function Aa(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function Ta(t){var e=t.getUTCFullYear(),n=Aa(e),r=Aa(e+1);return e+(t-n)/(r-n)}var La=Math.PI,Da=1e-6,Pa={version:"3.0.8"},Ca=La/180,$a=180/La,Ia=document,Na=window,Fa=".",Ba=",",Oa=[3,3];Date.now||(Date.now=function(){return+new Date});try{Ia.createElement("div").style.setProperty("opacity",0,"")}catch(Ra){var ja=Na.CSSStyleDeclaration.prototype,Ua=ja.setProperty;ja.setProperty=function(t,e,n){Ua.call(this,t,e+"",n)}}var Va=i;try{Va(Ia.documentElement.childNodes)[0].nodeType}catch(za){Va=r}var Ya=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};Pa.map=function(t){var e=new a;for(var n in t)e.set(n,t[n]);return e},n(a,{has:function(t){return qa+t in this},get:function(t){return this[qa+t]},set:function(t,e){return this[qa+t]=e},remove:function(t){return t=qa+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ha&&t.call(this,e.substring(1),this[e])}});var qa="\x00",Ha=qa.charCodeAt(0);Pa.functor=u,Pa.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=l(t,e,e[n]);return t},Pa.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},Pa.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},Pa.mean=function(t,e){var n,r=t.length,i=0,a=-1,o=0;if(1===arguments.length)for(;++a<r;)c(n=t[a])&&(i+=(n-i)/++o);else for(;++a<r;)c(n=e.call(t,t[a],a))&&(i+=(n-i)/++o);return o?i:void 0},Pa.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(c),t.length?Pa.quantile(t.sort(Pa.ascending),.5):void 0},Pa.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},Pa.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},Pa.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o&&(null==(n=i=t[a])||n!=n);)n=i=void 0;for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o&&(null==(n=i=e.call(t,t[a],a))||n!=n);)n=void 0;for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Pa.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Pa.random.normal.apply(Pa,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},Pa.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)isNaN(n=+t[a])||(r+=n);else for(;++a<i;)isNaN(n=+e.call(t,t[a],a))||(r+=n);return r},Pa.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},Pa.shuffle=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t},Pa.transpose=function(t){return Pa.zip.apply(Pa,t)},Pa.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=Pa.min(arguments,h),n=new Array(e);++t<e;)for(var r,i=-1,a=n[t]=new Array(r);++i<r;)a[i]=arguments[i][t];return n},Pa.bisector=function(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t.call(e,e[a],a)<n?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;n<t.call(e,e[a],a)?i=a:r=a+1}return r}}};var Ga=Pa.bisector(function(t){return t});Pa.bisectLeft=Ga.left,Pa.bisect=Pa.bisectRight=Ga.right,Pa.nest=function(){function t(e,s){if(s>=o.length)return r?r.call(i,e):n?e.sort(n):e;for(var u,l,c,h=-1,f=e.length,g=o[s++],d=new a,p={};++h<f;)(c=d.get(u=g(l=e[h])))?c.push(l):d.set(u,[l]);return d.forEach(function(e,n){p[e]=t(n,s)}),p}function e(t,n){if(n>=o.length)return t;var r,i=[],a=s[n++];for(r in t)i.push({key:r,values:e(t[r],n)});return a&&i.sort(function(t,e){return a(t.key,e.key)}),i}var n,r,i={},o=[],s=[];return i.map=function(e){return t(e,0)},i.entries=function(n){return e(t(n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return s[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},Pa.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Pa.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Pa.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Pa.permute=function(t,e){for(var n=[],r=-1,i=e.length;++r<i;)n[r]=t[e[r]];return n},Pa.merge=function(t){return Array.prototype.concat.apply([],t)},Pa.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],a=g(Math.abs(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},Pa.requote=function(t){return t.replace(Wa,"\\$&")};var Wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Pa.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},Pa.xhr=function(t,e,n){function r(){var t=l.status;!t&&l.responseText||t>=200&&300>t||304===t?a.load.call(i,u.call(i,l)):a.error.call(i,l)}var i={},a=Pa.dispatch("progress","load","error"),s={},u=o,l=new(Na.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=Pa.event;Pa.event=t;try{a.progress.call(i,l)}finally{Pa.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.response=function(t){return u=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(Va(arguments)))}}),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var o in s)l.setRequestHeader(o,s[o]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},Pa.rebind(i,a,"on"),2===arguments.length&&"function"==typeof e&&(n=e,e=null),null==n?i:i.get(d(n))},Pa.text=function(){return Pa.xhr.apply(Pa,arguments).response(p)},Pa.json=function(t,e){return Pa.xhr(t,"application/json",e).response(m)},Pa.html=function(t,e){return Pa.xhr(t,"text/html",e).response(v)},Pa.xml=function(){return Pa.xhr.apply(Pa,arguments).response(y)};var Za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Pa.ns={prefix:Za,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Za.hasOwnProperty(n)?{space:Za[n],local:t}:t}},Pa.dispatch=function(){for(var t=new _,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=b(t);return t},_.prototype.on=function(t,e){var n=t.indexOf("."),r="";return n>0&&(r=t.substring(n+1),t=t.substring(0,n)),arguments.length<2?this[t].on(r):this[t].on(r,e)},Pa.format=function(t){var e=Xa.exec(t),n=e[1]||" ",r=e[2]||">",i=e[3]||"",a=e[4]||"",o=e[5],s=+e[6],u=e[7],l=e[8],c=e[9],h=1,f="",g=!1;switch(l&&(l=+l.substring(1)),(o||"0"===n&&"="===r)&&(o=n="0",r="=",u&&(s-=Math.floor((s-1)/4))),c){case"n":u=!0,c="g";break;case"%":h=100,f="%",c="f";break;case"p":h=100,f="%",c="r";break;case"b":case"o":case"x":case"X":a&&(a="0"+c.toLowerCase());case"c":case"d":g=!0,l=0;break;case"s":h=-1,c="r"}"#"===a&&(a=""),"r"!=c||l||(c="g"),c=Ja.get(c)||x;var d=o&&u;return function(t){if(g&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):i;if(0>h){var p=Pa.formatPrefix(t,l);t=p.scale(t),f=p.symbol}else t*=h;t=c(t,l),!o&&u&&(t=Ka(t));var m=a.length+t.length+(d?0:e.length),v=s>m?new Array(m=s-m+1).join(n):"";return d&&(t=Ka(v+t)),Fa&&t.replace(".",Fa),e+=a,("<"===r?e+t+v:">"===r?v+e+t:"^"===r?v.substring(0,m>>=1)+e+t+v.substring(m):e+(d?t:v+t))+f}};var Xa=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Ja=Pa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Pa.round(t,w(t,e))).toFixed(Math.max(0,Math.min(20,w(t*(1+1e-15),e))))}}),Ka=o;if(Oa){var Qa=Oa.length;Ka=function(t){for(var e=t.lastIndexOf("."),n=e>=0?"."+t.substring(e+1):(e=t.length,""),r=[],i=0,a=Oa[0];e>0&&a>0;)r.push(t.substring(e-=a,e+a)),a=Oa[i=(i+1)%Qa];return r.reverse().join(Ba||"")+n}}var to=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(M);Pa.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Pa.round(t,w(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),to[8+n/3]};var eo=function(){return o},no=Pa.map({linear:eo,poly:D,quad:function(){return A},cubic:function(){return T},sin:function(){return P},exp:function(){return C},circle:function(){return $},elastic:I,back:N,bounce:function(){return F}}),ro=Pa.map({"in":o,out:E,"in-out":S,"out-in":function(t){return S(E(t))}});Pa.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=no.get(n)||eo,r=ro.get(r)||o,k(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},Pa.event=null,Pa.transform=function(t){var e=Ia.createElementNS(Pa.ns.prefix.svg,"g");return(Pa.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new j(n?n.matrix:io)})(t)},j.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var io={a:1,b:0,c:0,d:1,e:0,f:0};Pa.interpolate=function(t,e){for(var n,r=Pa.interpolators.length;--r>=0&&!(n=Pa.interpolators[r](t,e)););return n},Pa.interpolateNumber=function(t,e){return e-=t,function(n){return t+e*n}},Pa.interpolateRound=function(t,e){return e-=t,function(n){return Math.round(t+e*n)}},Pa.interpolateString=function(t,e){var n,r,i,a,o,s=0,u=0,l=[],c=[];for(ao.lastIndex=0,r=0;n=ao.exec(e);++r)n.index&&l.push(e.substring(s,u=n.index)),c.push({i:l.length,x:n[0]}),l.push(null),s=ao.lastIndex;for(s<e.length&&l.push(e.substring(s)),r=0,a=c.length;(n=ao.exec(t))&&a>r;++r)if(o=c[r],o.x==n[0]){if(o.i)if(null==l[o.i+1])for(l[o.i-1]+=o.x,l.splice(o.i,1),i=r+1;a>i;++i)c[i].i--;else for(l[o.i-1]+=o.x+l[o.i+1],l.splice(o.i,2),i=r+1;a>i;++i)c[i].i-=2;else if(null==l[o.i+1])l[o.i]=o.x;else for(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1),i=r+1;a>i;++i)c[i].i--;c.splice(r,1),a--,r--}else o.x=Pa.interpolateNumber(parseFloat(n[0]),parseFloat(o.x));for(;a>r;)o=c.pop(),null==l[o.i+1]?l[o.i]=o.x:(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1)),a--;return 1===l.length?null==l[0]?c[0].x:function(){return e}:function(t){for(r=0;a>r;++r)l[(o=c[r]).i]=o.x(t);return l.join("")}},Pa.interpolateTransform=function(t,e){var n,r=[],i=[],a=Pa.transform(t),o=Pa.transform(e),s=a.translate,u=o.translate,l=a.rotate,c=o.rotate,h=a.skew,f=o.skew,g=a.scale,d=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Pa.interpolateNumber(s[0],u[0])},{i:3,x:Pa.interpolateNumber(s[1],u[1])})):r.push(u[0]||u[1]?"translate("+u+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Pa.interpolateNumber(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=f?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Pa.interpolateNumber(h,f)}):f&&r.push(r.pop()+"skewX("+f+")"),g[0]!=d[0]||g[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:Pa.interpolateNumber(g[0],d[0])},{i:n-2,x:Pa.interpolateNumber(g[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(t){for(var e,a=-1;++a<n;)r[(e=i[a]).i]=e.x(t);return r.join("")}},Pa.interpolateRgb=function(t,e){t=Pa.rgb(t),e=Pa.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+X(Math.round(n+a*t))+X(Math.round(r+o*t))+X(Math.round(i+s*t))}},Pa.interpolateHsl=function(t,e){t=Pa.hsl(t),e=Pa.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return a>180?a-=360:-180>a&&(a+=360),function(t){return ie(n+a*t,r+o*t,i+s*t)+""}},Pa.interpolateLab=function(t,e){t=Pa.lab(t),e=Pa.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return ce(n+a*t,r+o*t,i+s*t)+""}},Pa.interpolateHcl=function(t,e){t=Pa.hcl(t),e=Pa.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return a>180?a-=360:-180>a&&(a+=360),function(t){return se(n+a*t,r+o*t,i+s*t)+""}},Pa.interpolateArray=function(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(Pa.interpolate(t[n],e[n]));for(;a>n;++n)i[n]=t[n];for(;o>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}},Pa.interpolateObject=function(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Y(n)(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}};var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Pa.interpolators=[Pa.interpolateObject,function(t,e){return e instanceof Array&&Pa.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&Pa.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?so.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof G)&&Pa.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&Pa.interpolateNumber(t,e)}],G.prototype.toString=function(){return this.rgb()+""},Pa.rgb=function(t,e,n){return 1===arguments.length?t instanceof Z?W(t.r,t.g,t.b):J(""+t,W,ie):W(~~t,~~e,~~n)};var oo=Z.prototype=new G;oo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),W(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(r/t)))):W(i,i,i)},oo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),W(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},oo.hsl=function(){return K(this.r,this.g,this.b)},oo.toString=function(){return"#"+X(this.r)+X(this.g)+X(this.b)};var so=Pa.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});so.forEach(function(t,e){so.set(t,J(e,W,ie))}),Pa.hsl=function(t,e,n){return 1===arguments.length?t instanceof re?ne(t.h,t.s,t.l):J(""+t,K,ne):ne(+t,+e,+n)};var uo=re.prototype=new G;uo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),ne(this.h,this.s,this.l/t)},uo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ne(this.h,this.s,t*this.l)},uo.rgb=function(){return ie(this.h,this.s,this.l)},Pa.hcl=function(t,e,n){return 1===arguments.length?t instanceof oe?ae(t.h,t.c,t.l):t instanceof le?he(t.l,t.a,t.b):he((t=Q((t=Pa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):ae(+t,+e,+n)};var lo=oe.prototype=new G;lo.brighter=function(t){return ae(this.h,this.c,Math.min(100,this.l+co*(arguments.length?t:1)))},lo.darker=function(t){return ae(this.h,this.c,Math.max(0,this.l-co*(arguments.length?t:1)))},lo.rgb=function(){return se(this.h,this.c,this.l).rgb()},Pa.lab=function(t,e,n){return 1===arguments.length?t instanceof le?ue(t.l,t.a,t.b):t instanceof oe?se(t.l,t.c,t.h):Q((t=Pa.rgb(t)).r,t.g,t.b):ue(+t,+e,+n)};var co=18,ho=.95047,fo=1,go=1.08883,po=le.prototype=new G;po.brighter=function(t){return ue(Math.min(100,this.l+co*(arguments.length?t:1)),this.a,this.b)},po.darker=function(t){return ue(Math.max(0,this.l-co*(arguments.length?t:1)),this.a,this.b)},po.rgb=function(){return ce(this.l,this.a,this.b)};var mo=function(t,e){return e.querySelector(t)},vo=function(t,e){return e.querySelectorAll(t)},yo=Ia.documentElement,_o=yo.matchesSelector||yo.webkitMatchesSelector||yo.mozMatchesSelector||yo.msMatchesSelector||yo.oMatchesSelector,bo=function(t,e){return _o.call(t,e)};"function"==typeof Sizzle&&(mo=function(t,e){return Sizzle(t,e)[0]||null},vo=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},bo=Sizzle.matchesSelector);var wo=[];Pa.selection=function(){return xo},Pa.selection.prototype=wo,wo.select=function(t){var e,n,r,i,a=[];"function"!=typeof t&&(t=me(t));for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return pe(a)},wo.selectAll=function(t){var e,n,r=[];"function"!=typeof t&&(t=ve(t));for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(n=o[s])&&(r.push(e=Va(t.call(n,n.__data__,s))),e.parentNode=n);return pe(r)},wo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Pa.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(ye(e,t[e]));return this}return this.each(ye(t,e))},wo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=t.trim().split(/^|\s+/g)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.className,null!=e.baseVal&&(e=e.baseVal);++i<r;)if(!_e(t[i]).test(e))return!1;return!0}for(e in t)this.each(be(e,t[e]));return this}return this.each(be(t,e))},wo.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(xe(n,t[n],e));return this}if(2>r)return Na.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(xe(t,e,n))},wo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(Me(e,t[e]));return this}return this.each(Me(t,e))},wo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},wo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},wo.append=function(t){function e(){return this.appendChild(Ia.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(Ia.createElementNS(t.space,t.local))}return t=Pa.ns.qualify(t),this.select(t.local?n:e)},wo.insert=function(t,e){function n(){return this.insertBefore(Ia.createElementNS(this.namespaceURI,t),mo(e,this))}function r(){return this.insertBefore(Ia.createElementNS(t.space,t.local),mo(e,this))}return t=Pa.ns.qualify(t),this.select(t.local?r:n)},wo.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},wo.data=function(t,e){function n(t,n){var r,i,o,s=t.length,h=n.length,f=Math.min(s,h),g=new Array(h),d=new Array(h),p=new Array(s);if(e){var m,v=new a,y=new a,_=[];for(r=-1;++r<s;)m=e.call(i=t[r],i.__data__,r),v.has(m)?p[r]=i:v.set(m,i),_.push(m);for(r=-1;++r<h;)m=e.call(n,o=n[r],r),(i=v.get(m))?(g[r]=i,i.__data__=o):y.has(m)||(d[r]=ke(o)),y.set(m,o),v.remove(m);for(r=-1;++r<s;)v.has(_[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,g[r]=i):d[r]=ke(o);for(;h>r;++r)d[r]=ke(n[r]);for(;s>r;++r)p[r]=t[r]}d.update=g,d.parentNode=g.parentNode=p.parentNode=t.parentNode,u.push(d),l.push(g),c.push(p)}var r,i,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++o<s;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Le([]),l=pe([]),c=pe([]);if("function"==typeof t)for(;++o<s;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<s;)n(r=this[o],t);return l.enter=function(){return u},l.exit=function(){return c},l},wo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},wo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=Ee(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s)&&e.push(r)
}return pe(i)},wo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},wo.sort=function(t){t=Se.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},wo.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(Ae(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Ae(t,e,n))},wo.each=function(t){return Te(this,function(e,n,r){t.call(e,e.__data__,n,r)})},wo.call=function(t){var e=Va(arguments);return t.apply(e[0]=this,e),this},wo.empty=function(){return!this.node()},wo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},wo.transition=function(){var t,e,n=ko||++So,r=[],i=Object.create(Ao);i.time=Date.now();for(var a=-1,o=this.length;++a<o;){r.push(t=[]);for(var s=this[a],u=-1,l=s.length;++u<l;)(e=s[u])&&Pe(e,u,n,i),t.push(e)}return De(r,n)};var xo=pe([[Ia]]);xo[0].parentNode=yo,Pa.select=function(t){return"string"==typeof t?xo.select(t):pe([[t]])},Pa.selectAll=function(t){return"string"==typeof t?xo.selectAll(t):pe([Va(t)])};var Mo=[];Pa.selection.enter=Le,Pa.selection.enter.prototype=Mo,Mo.append=wo.append,Mo.insert=wo.insert,Mo.empty=wo.empty,Mo.node=wo.node,Mo.select=function(t){for(var e,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l)),n.__data__=a.__data__):e.push(null)}return pe(o)};var ko,Eo=[],So=0,Ao={ease:L,delay:0,duration:250};Eo.call=wo.call,Eo.empty=wo.empty,Eo.node=wo.node,Pa.transition=function(t){return arguments.length?ko?t.transition():t:xo.transition()},Pa.transition.prototype=Eo,Eo.select=function(t){var e,n,r,i=this.id,a=[];"function"!=typeof t&&(t=me(t));for(var o=-1,s=this.length;++o<s;){a.push(e=[]);for(var u=this[o],l=-1,c=u.length;++l<c;)(r=u[l])&&(n=t.call(r,r.__data__,l))?("__data__"in r&&(n.__data__=r.__data__),Pe(n,l,i,r.__transition__[i]),e.push(n)):e.push(null)}return De(a,i)},Eo.selectAll=function(t){var e,n,r,i,a,o=this.id,s=[];"function"!=typeof t&&(t=ve(t));for(var u=-1,l=this.length;++u<l;)for(var c=this[u],h=-1,f=c.length;++h<f;)if(r=c[h]){a=r.__transition__[o],n=t.call(r,r.__data__,h),s.push(e=[]);for(var g=-1,d=n.length;++g<d;)Pe(i=n[g],g,o,a),e.push(i)}return De(s,o)},Eo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=Ee(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]);for(var n=this[a],s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s)&&e.push(r)}return De(i,this.id,this.time).ease(this.ease())},Eo.attr=function(t,e){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i=Y(t),a=Pa.ns.qualify(t);return $e(this,"attr."+t,e,function(t){function e(){var e,n=this.getAttribute(a);return n!==t&&(e=i(n,t),function(t){this.setAttribute(a,e(t))})}function o(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})}return null==t?a.local?r:n:(t+="",a.local?o:e)})},Eo.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=Pa.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Eo.style=function(t,e,n){function r(){this.style.removeProperty(t)}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}var a=Y(t);return $e(this,"style."+t,e,function(e){function i(){var r,i=Na.getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=a(i,e),function(e){this.style.setProperty(t,r(e),n)})}return null==e?r:(e+="",i)})},Eo.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,Na.getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},Eo.text=function(t){return $e(this,"text",t,Ce)},Eo.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},Eo.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Pa.ease.apply(Pa,arguments)),Te(this,function(n){n.__transition__[e].ease=t}))},Eo.delay=function(t){var e=this.id;return Te(this,"function"==typeof t?function(n,r,i){n.__transition__[e].delay=0|t.call(n,n.__data__,r,i)}:(t|=0,function(n){n.__transition__[e].delay=t}))},Eo.duration=function(t){var e=this.id;return Te(this,"function"==typeof t?function(n,r,i){n.__transition__[e].duration=Math.max(1,0|t.call(n,n.__data__,r,i))}:(t=Math.max(1,0|t),function(n){n.__transition__[e].duration=t}))},Eo.each=function(t,e){var n=this.id;if(arguments.length<2){var r=Ao,i=ko;ko=n,Te(this,function(e,r,i){Ao=e.__transition__[n],t.call(e,e.__data__,r,i)}),Ao=r,ko=i}else Te(this,function(r){r.__transition__[n].event.on(t,e)});return this},Eo.transition=function(){for(var t,e,n,r,i=this.id,a=++So,o=[],s=0,u=this.length;u>s;s++){o.push(t=[]);for(var e=this[s],l=0,c=e.length;c>l;l++)(n=e[l])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,Pe(n,l,a,r)),t.push(n)}return De(o,a)},Eo.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):Te(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})};var To,Lo,Do=0,Po={},Co=null;Pa.timer=function(t,e,n){if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}var r=Po[t.id];r&&r.callback===t?(r.then=n,r.delay=e):Po[t.id=++Do]=Co={callback:t,then:n,delay:e,next:Co},To||(Lo=clearTimeout(Lo),To=1,$o(Ie))},Pa.timer.flush=function(){for(var t,e=Date.now(),n=Co;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;Ne()};var $o=Na.requestAnimationFrame||Na.webkitRequestAnimationFrame||Na.mozRequestAnimationFrame||Na.oRequestAnimationFrame||Na.msRequestAnimationFrame||function(t){setTimeout(t,17)};Pa.mouse=function(t){return Fe(t,O())};var Io=/WebKit/.test(Na.navigator.userAgent)?-1:0;Pa.touches=function(t,e){return arguments.length<2&&(e=O().touches),e?Va(e).map(function(e){var n=Fe(t,e);return n.identifier=e.identifier,n}):[]},Pa.scale={},Pa.scale.linear=function(){return Ve([0,1],[0,1],Pa.interpolate,!1)},Pa.scale.log=function(){return Xe(Pa.scale.linear(),Je)};var No=Pa.format(".0e");Je.pow=function(t){return Math.pow(10,t)},Ke.pow=function(t){return-Math.pow(10,-t)},Pa.scale.pow=function(){return Qe(Pa.scale.linear(),1)},Pa.scale.sqrt=function(){return Pa.scale.pow().exponent(.5)},Pa.scale.ordinal=function(){return en([],{t:"range",a:[[]]})},Pa.scale.category10=function(){return Pa.scale.ordinal().range(Fo)},Pa.scale.category20=function(){return Pa.scale.ordinal().range(Bo)},Pa.scale.category20b=function(){return Pa.scale.ordinal().range(Oo)},Pa.scale.category20c=function(){return Pa.scale.ordinal().range(Ro)};var Fo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Bo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Oo=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Ro=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];Pa.scale.quantile=function(){return nn([],[])},Pa.scale.quantize=function(){return rn(0,1,[0,1])},Pa.scale.threshold=function(){return an([.5],[0,1])},Pa.scale.identity=function(){return on([0,1])},Pa.svg={},Pa.svg.arc=function(){function t(){var t=e.apply(this,arguments),a=n.apply(this,arguments),o=r.apply(this,arguments)+jo,s=i.apply(this,arguments)+jo,u=(o>s&&(u=o,o=s,s=u),s-o),l=La>u?"0":"1",c=Math.cos(o),h=Math.sin(o),f=Math.cos(s),g=Math.sin(s);return u>=Uo?t?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":t?"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+l+",1 "+a*f+","+a*g+"L"+t*f+","+t*g+"A"+t+","+t+" 0 "+l+",0 "+t*c+","+t*h+"Z":"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+l+",1 "+a*f+","+a*g+"L0,0Z"}var e=sn,n=un,r=ln,i=cn;return t.innerRadius=function(n){return arguments.length?(e=u(n),t):e},t.outerRadius=function(e){return arguments.length?(n=u(e),t):n},t.startAngle=function(e){return arguments.length?(r=u(e),t):r},t.endAngle=function(e){return arguments.length?(i=u(e),t):i},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,a=(r.apply(this,arguments)+i.apply(this,arguments))/2+jo;return[Math.cos(a)*t,Math.sin(a)*t]},t};var jo=-La/2,Uo=2*La-1e-6;Pa.svg.line=function(){return hn(o)};var Vo=Pa.map({linear:dn,"linear-closed":pn,"step-before":mn,"step-after":vn,basis:Mn,"basis-open":kn,"basis-closed":En,bundle:Sn,cardinal:bn,"cardinal-open":yn,"cardinal-closed":_n,monotone:Cn});Vo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var zo=[0,2/3,1/3,0],Yo=[0,1/3,2/3,0],qo=[0,1/6,2/3,1/6];Pa.svg.line.radial=function(){var t=hn($n);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},mn.reverse=vn,vn.reverse=mn,Pa.svg.area=function(){return In(o)},Pa.svg.area.radial=function(){var t=In($n);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Pa.svg.chord=function(){function n(t,e){var n=r(this,s,t,e),u=r(this,l,t,e);return"M"+n.p0+a(n.r,n.p1,n.a1-n.a0)+(i(n,u)?o(n.r,n.p1,n.r,n.p0):o(n.r,n.p1,u.r,u.p0)+a(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,n.r,n.p0))+"Z"}function r(t,e,n,r){var i=e.call(t,n,r),a=c.call(t,i,r),o=h.call(t,i,r)+jo,s=f.call(t,i,r)+jo;return{r:a,a0:o,a1:s,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(s),a*Math.sin(s)]}}function i(t,e){return t.a0==e.a0&&t.a1==e.a1}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(n>La)+",1 "+e}function o(t,e,n,r){return"Q 0,0 "+r}var s=e,l=t,c=Nn,h=ln,f=cn;return n.radius=function(t){return arguments.length?(c=u(t),n):c},n.source=function(t){return arguments.length?(s=u(t),n):s},n.target=function(t){return arguments.length?(l=u(t),n):l},n.startAngle=function(t){return arguments.length?(h=u(t),n):h},n.endAngle=function(t){return arguments.length?(f=u(t),n):f},n},Pa.svg.diagonal=function(){function n(t,e){var n=r.call(this,t,e),o=i.call(this,t,e),s=(n.y+o.y)/2,u=[n,{x:n.x,y:s},{x:o.x,y:s},o];return u=u.map(a),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var r=e,i=t,a=Fn;return n.source=function(t){return arguments.length?(r=u(t),n):r},n.target=function(t){return arguments.length?(i=u(t),n):i},n.projection=function(t){return arguments.length?(a=t,n):a},n},Pa.svg.diagonal.radial=function(){var t=Pa.svg.diagonal(),e=Fn,n=t.projection;return t.projection=function(t){return arguments.length?n(Bn(e=t)):e},t},Pa.svg.symbol=function(){function t(t,r){return(Ho.get(e.call(this,t,r))||jn)(n.call(this,t,r))}var e=Rn,n=On;return t.type=function(n){return arguments.length?(e=u(n),t):e},t.size=function(e){return arguments.length?(n=u(e),t):n},t};var Ho=Pa.map({circle:jn,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Wo)),n=e*Wo;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Go),n=e*Go/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Go),n=e*Go/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Pa.svg.symbolTypes=Ho.keys();var Go=Math.sqrt(3),Wo=Math.tan(30*Ca);Pa.svg.axis=function(){function t(t){t.each(function(){var t,h=Pa.select(this),f=null==l?n.ticks?n.ticks.apply(n,u):n.domain():l,g=null==e?n.tickFormat?n.tickFormat.apply(n,u):String:e,d=zn(n,f,c),p=h.selectAll(".tick.minor").data(d,String),m=p.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=Pa.transition(p.exit()).style("opacity",1e-6).remove(),y=Pa.transition(p).style("opacity",1),_=h.selectAll(".tick.major").data(f,String),b=_.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),w=Pa.transition(_.exit()).style("opacity",1e-6).remove(),x=Pa.transition(_).style("opacity",1),M=Re(n),k=h.selectAll(".domain").data([0]),E=(k.enter().append("path").attr("class","domain"),Pa.transition(k)),S=n.copy(),A=this.__chart__||S;this.__chart__=S,b.append("line"),b.append("text");var T=b.select("line"),L=x.select("line"),D=_.select("text").text(g),P=b.select("text"),C=x.select("text");switch(r){case"bottom":t=Un,m.attr("y2",a),y.attr("x2",0).attr("y2",a),T.attr("y2",i),P.attr("y",Math.max(i,0)+s),L.attr("x2",0).attr("y2",i),C.attr("x",0).attr("y",Math.max(i,0)+s),D.attr("dy",".71em").style("text-anchor","middle"),E.attr("d","M"+M[0]+","+o+"V0H"+M[1]+"V"+o);break;case"top":t=Un,m.attr("y2",-a),y.attr("x2",0).attr("y2",-a),T.attr("y2",-i),P.attr("y",-(Math.max(i,0)+s)),L.attr("x2",0).attr("y2",-i),C.attr("x",0).attr("y",-(Math.max(i,0)+s)),D.attr("dy","0em").style("text-anchor","middle"),E.attr("d","M"+M[0]+","+-o+"V0H"+M[1]+"V"+-o);break;case"left":t=Vn,m.attr("x2",-a),y.attr("x2",-a).attr("y2",0),T.attr("x2",-i),P.attr("x",-(Math.max(i,0)+s)),L.attr("x2",-i).attr("y2",0),C.attr("x",-(Math.max(i,0)+s)).attr("y",0),D.attr("dy",".32em").style("text-anchor","end"),E.attr("d","M"+-o+","+M[0]+"H0V"+M[1]+"H"+-o);break;case"right":t=Vn,m.attr("x2",a),y.attr("x2",a).attr("y2",0),T.attr("x2",i),P.attr("x",Math.max(i,0)+s),L.attr("x2",i).attr("y2",0),C.attr("x",Math.max(i,0)+s).attr("y",0),D.attr("dy",".32em").style("text-anchor","start"),E.attr("d","M"+o+","+M[0]+"H0V"+M[1]+"H"+o)}if(n.ticks)b.call(t,A),x.call(t,S),w.call(t,S),m.call(t,A),y.call(t,S),v.call(t,S);else{var $=S.rangeBand()/2,I=function(t){return S(t)+$};b.call(t,I),x.call(t,I)}})}var e,n=Pa.scale.linear(),r=Zo,i=6,a=6,o=6,s=3,u=[10],l=null,c=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Xo?e+"":Zo,t):r},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return i;var r=arguments.length-1;return i=+e,a=r>1?+n:i,o=r>0?+arguments[r]:i,t},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t};var Zo="bottom",Xo={top:1,right:1,bottom:1,left:1};Pa.svg.brush=function(){function t(a){a.each(function(){var a,o=Pa.select(this),c=o.selectAll(".background").data([0]),h=o.selectAll(".extent").data([0]),f=o.selectAll(".resize").data(l,String);o.style("pointer-events","all").on("mousedown.brush",i).on("touchstart.brush",i),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Jo[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",t.empty()?"none":null),f.exit().remove(),s&&(a=Re(s),c.attr("x",a[0]).attr("width",a[1]-a[0]),n(o)),u&&(a=Re(u),c.attr("y",a[0]).attr("height",a[1]-a[0]),r(o)),e(o)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function r(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function i(){function i(){var t=Pa.event.changedTouches;return t?Pa.touches(v,t)[0]:Pa.mouse(v)}function l(){32==Pa.event.keyCode&&(k||(p=null,E[0]-=c[1][0],E[1]-=c[1][1],k=2),B())}function h(){32==Pa.event.keyCode&&2==k&&(E[0]+=c[1][0],E[1]+=c[1][1],k=0,B())}function f(){var t=i(),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),k||(Pa.event.altKey?(p||(p=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),E[0]=c[+(t[0]<p[0])][0],E[1]=c[+(t[1]<p[1])][1]):p=null),x&&g(t,s,0)&&(n(b),a=!0),M&&g(t,u,1)&&(r(b),a=!0),a&&(e(b),_({type:"brush",mode:k?"move":"resize"}))}function g(t,e,n){var r,i,o=Re(e),s=o[0],u=o[1],l=E[n],h=c[1][n]-c[0][n];return k&&(s-=l,u-=h+l),r=Math.max(s,Math.min(u,t[n])),k?i=(r+=l)+h:(p&&(l=Math.max(s,Math.min(u,2*p[n]-r))),r>l?(i=r,r=l):i=l),c[0][n]!==r||c[1][n]!==i?(a=null,c[0][n]=r,c[1][n]=i,!0):void 0}function d(){f(),b.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Pa.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),_({type:"brushend"}),B()}var p,m,v=this,y=Pa.select(Pa.event.target),_=o.of(v,arguments),b=Pa.select(v),w=y.datum(),x=!/^(n|s)$/.test(w)&&s,M=!/^(e|w)$/.test(w)&&u,k=y.classed("extent"),E=i(),S=Pa.select(Na).on("mousemove.brush",f).on("mouseup.brush",d).on("touchmove.brush",f).on("touchend.brush",d).on("keydown.brush",l).on("keyup.brush",h);if(k)E[0]=c[0][0]-E[0],E[1]=c[0][1]-E[1];else if(w){var A=+/w$/.test(w),T=+/^n/.test(w);m=[c[1-A][0]-E[0],c[1-T][1]-E[1]],E[0]=c[A][0],E[1]=c[T][1]}else Pa.event.altKey&&(p=E.slice());b.style("pointer-events","none").selectAll(".resize").style("display",null),Pa.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),f(),B()}var a,o=R(t,"brushstart","brush","brushend"),s=null,u=null,l=Ko[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(s=e,l=Ko[!s<<1|!u],t):s},t.y=function(e){return arguments.length?(u=e,l=Ko[!s<<1|!u],t):u},t.extent=function(e){var n,r,i,o,l;return arguments.length?(a=[[0,0],[0,0]],s&&(n=e[0],r=e[1],u&&(n=n[0],r=r[0]),a[0][0]=n,a[1][0]=r,s.invert&&(n=s(n),r=s(r)),n>r&&(l=n,n=r,r=l),c[0][0]=0|n,c[1][0]=0|r),u&&(i=e[0],o=e[1],s&&(i=i[1],o=o[1]),a[0][1]=i,a[1][1]=o,u.invert&&(i=u(i),o=u(o)),i>o&&(l=i,i=o,o=l),c[0][1]=0|i,c[1][1]=0|o),t):(e=a||c,s&&(n=e[0][0],r=e[1][0],a||(n=c[0][0],r=c[1][0],s.invert&&(n=s.invert(n),r=s.invert(r)),n>r&&(l=n,n=r,r=l))),u&&(i=e[0][1],o=e[1][1],a||(i=c[0][1],o=c[1][1],u.invert&&(i=u.invert(i),o=u.invert(o)),i>o&&(l=i,i=o,o=l))),s&&u?[[n,i],[r,o]]:s?[n,r]:u&&[i,o])},t.clear=function(){return a=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return s&&c[0][0]===c[1][0]||u&&c[0][1]===c[1][1]},Pa.rebind(t,o,"on")};var Jo={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ko=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];Pa.behavior={},Pa.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=s.parentNode;return null!=c?Pa.touches(t).filter(function(t){return t.identifier===c})[0]:Pa.mouse(t)}function e(){if(!s.parentNode)return i();var e=t(),n=e[0]-h[0],r=e[1]-h[1];f|=n|r,h=e,B(),u({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:n,dy:r})}function i(){u({type:"dragend"}),f&&(B(),Pa.event.target===l&&g.on("click.drag",a,!0)),g.on(null!=c?"touchmove.drag-"+c:"mousemove.drag",null).on(null!=c?"touchend.drag-"+c:"mouseup.drag",null)}function a(){B(),g.on("click.drag",null)}var o,s=this,u=n.of(s,arguments),l=Pa.event.target,c=Pa.event.touches?Pa.event.changedTouches[0].identifier:null,h=t(),f=0,g=Pa.select(Na).on(null!=c?"touchmove.drag-"+c:"mousemove.drag",e).on(null!=c?"touchend.drag-"+c:"mouseup.drag",i,!0);r?(o=r.apply(s,arguments),o=[o.x-h[0],o.y-h[1]]):o=[0,0],null==c&&B(),u({type:"dragstart"})}var n=R(t,"drag","dragstart","dragend"),r=null;return t.origin=function(e){return arguments.length?(r=e,t):r},Pa.rebind(t,n,"on")},Pa.behavior.zoom=function(){function t(){this.on("mousedown.zoom",s).on("mousemove.zoom",l).on(es+".zoom",u).on("dblclick.zoom",c).on("touchstart.zoom",h).on("touchmove.zoom",f).on("touchend.zoom",h)}function e(t){return[(t[0]-b[0])/w,(t[1]-b[1])/w]}function n(t){return[t[0]*w+b[0],t[1]*w+b[1]]}function r(t){w=Math.max(x[0],Math.min(x[1],t))}function i(t,e){e=n(e),b[0]+=t[0]-e[0],b[1]+=t[1]-e[1]}function a(){m&&m.domain(p.range().map(function(t){return(t-b[0])/w}).map(p.invert)),y&&y.domain(v.range().map(function(t){return(t-b[1])/w}).map(v.invert))}function o(t){a(),Pa.event.preventDefault(),t({type:"zoom",scale:w,translate:b})}function s(){function t(){l=1,i(Pa.mouse(a),h),o(s)}function n(){l&&B(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&Pa.event.target===u&&c.on("click.zoom",r,!0)}function r(){B(),c.on("click.zoom",null)}var a=this,s=M.of(a,arguments),u=Pa.event.target,l=0,c=Pa.select(Na).on("mousemove.zoom",t).on("mouseup.zoom",n),h=e(Pa.mouse(a));Na.focus(),B()}function u(){g||(g=e(Pa.mouse(this))),r(Math.pow(2,.002*Qo())*w),i(Pa.mouse(this),g),o(M.of(this,arguments))}function l(){g=null}function c(){var t=Pa.mouse(this),n=e(t),a=Math.log(w)/Math.LN2;r(Math.pow(2,Pa.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)),i(t,n),o(M.of(this,arguments))}function h(){var t=Pa.touches(this),n=Date.now();if(d=w,g={},t.forEach(function(t){g[t.identifier]=e(t)}),B(),1===t.length){if(500>n-_){var a=t[0],s=e(t[0]);r(2*w),i(a,s),o(M.of(this,arguments))}_=n}}function f(){var t=Pa.touches(this),e=t[0],n=g[e.identifier];if(a=t[1]){var a,s=g[a.identifier];e=[(e[0]+a[0])/2,(e[1]+a[1])/2],n=[(n[0]+s[0])/2,(n[1]+s[1])/2],r(Pa.event.scale*d)}i(e,n),_=null,o(M.of(this,arguments))}var g,d,p,m,v,y,_,b=[0,0],w=1,x=ts,M=R(t,"zoom");return t.translate=function(e){return arguments.length?(b=e.map(Number),a(),t):b},t.scale=function(e){return arguments.length?(w=+e,a(),t):w},t.scaleExtent=function(e){return arguments.length?(x=null==e?ts:e.map(Number),t):x},t.x=function(e){return arguments.length?(m=e,p=e.copy(),b=[0,0],w=1,t):m},t.y=function(e){return arguments.length?(y=e,v=e.copy(),b=[0,0],w=1,t):y},Pa.rebind(t,M,"on")};var Qo,ts=[0,1/0],es="onwheel"in document?(Qo=function(){return-Pa.event.deltaY*(Pa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in document?(Qo=function(){return Pa.event.wheelDelta},"mousewheel"):(Qo=function(){return-Pa.event.detail},"MozMousePixelScroll");Pa.layout={},Pa.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Yn(t[n]));return e}},Pa.layout.chord=function(){function t(){var t,l,h,f,g,d={},p=[],m=Pa.range(a),v=[];for(n=[],r=[],t=0,f=-1;++f<a;){for(l=0,g=-1;++g<a;)l+=i[f][g];p.push(l),v.push(Pa.range(a)),t+=l}for(o&&m.sort(function(t,e){return o(p[t],p[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(2*La-c*a)/t,l=0,f=-1;++f<a;){for(h=l,g=-1;++g<a;){var y=m[f],_=v[y][g],b=i[y][_],w=l,x=l+=b*t;d[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}r[y]={index:y,startAngle:h,endAngle:l,value:(l-h)/t},l+=c}for(f=-1;++f<a;)for(g=f-1;++g<a;){var M=d[f+"-"+g],k=d[g+"-"+f];(M.value||k.value)&&n.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,n=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},Pa.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=1/Math.sqrt(a*a+o*o);if(m>(i-n)*s){var u=e.charge*s*s;return t.px-=a*u,t.py-=o*u,!0}if(e.point&&isFinite(s)){var u=e.pointCharge*s*s;t.px-=a*u,t.py-=o*u}}return!e.charge}}function e(t){t.px=Pa.event.x,t.py=Pa.event.y,u.resume()}var n,r,i,a,s,u={},l=Pa.dispatch("start","tick","end"),c=[1,1],h=.9,f=ns,g=rs,d=-30,p=.1,m=.8,v=[],y=[];return u.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var e,n,o,u,f,g,m,_,b,w=v.length,x=y.length;for(n=0;x>n;++n)o=y[n],u=o.source,f=o.target,_=f.x-u.x,b=f.y-u.y,(g=_*_+b*b)&&(g=r*a[n]*((g=Math.sqrt(g))-i[n])/g,_*=g,b*=g,f.x-=_*(m=u.weight/(f.weight+u.weight)),f.y-=b*m,u.x+=_*(m=1-m),u.y+=b*m);if((m=r*p)&&(_=c[0]/2,b=c[1]/2,n=-1,m))for(;++n<w;)o=v[n],o.x+=(_-o.x)*m,o.y+=(b-o.y)*m;if(d)for(Jn(e=Pa.geom.quadtree(v),r,s),n=-1;++n<w;)(o=v[n]).fixed||e.visit(t(o));for(n=-1;++n<w;)o=v[n],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*h,o.y-=(o.py-(o.py=o.y))*h);l.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(v=t,u):v},u.links=function(t){return arguments.length?(y=t,u):y},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.friction=function(t){return arguments.length?(h=+t,u):h},u.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.gravity=function(t){return arguments.length?(p=+t,u):p},u.theta=function(t){return arguments.length?(m=+t,u):m},u.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(l.start({type:"start",alpha:r=t}),Pa.timer(u.tick)),u):r},u.start=function(){function t(t,r){for(var i,a=e(n),o=-1,s=a.length;++o<s;)if(!isNaN(i=a[o][t]))return i;return Math.random()*r}function e(){if(!o){for(o=[],r=0;h>r;++r)o[r]=[];for(r=0;p>r;++r){var t=y[r];o[t.source.index].push(t.target),o[t.target.index].push(t.source)}}return o[n]}var n,r,o,l,h=v.length,p=y.length,m=c[0],_=c[1];for(n=0;h>n;++n)(l=v[n]).index=n,l.weight=0;for(n=0;p>n;++n)l=y[n],"number"==typeof l.source&&(l.source=v[l.source]),"number"==typeof l.target&&(l.target=v[l.target]),++l.source.weight,++l.target.weight;for(n=0;h>n;++n)l=v[n],isNaN(l.x)&&(l.x=t("x",m)),isNaN(l.y)&&(l.y=t("y",_)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);if(i=[],"function"==typeof f)for(n=0;p>n;++n)i[n]=+f.call(this,y[n],n);else for(n=0;p>n;++n)i[n]=f;if(a=[],"function"==typeof g)for(n=0;p>n;++n)a[n]=+g.call(this,y[n],n);else for(n=0;p>n;++n)a[n]=g;if(s=[],"function"==typeof d)for(n=0;h>n;++n)s[n]=+d.call(this,v[n],n);else for(n=0;h>n;++n)s[n]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=Pa.behavior.drag().origin(o).on("dragstart.force",Gn).on("drag.force",e).on("dragend.force",Wn)),arguments.length?void this.on("mouseover.force",Zn).on("mouseout.force",Xn).call(n):n},Pa.rebind(u,l,"on")};var ns=20,rs=1;Pa.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,u=s.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=Pa.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},lr(n,r)},Pa.layout.pie=function(){function t(a){var o=a.map(function(n,r){return+e.call(t,n,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),u=(("function"==typeof i?i.apply(this,arguments):i)-r)/Pa.sum(o),l=Pa.range(a.length);null!=n&&l.sort(n===is?function(t,e){return o[e]-o[t]}:function(t,e){return n(a[t],a[e])});var c=[];return l.forEach(function(t){var e;c[t]={data:a[t],value:e=o[t],startAngle:s,endAngle:s+=e*u}}),c}var e=Number,n=is,r=0,i=2*La;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var is={};Pa.layout.stack=function(){function t(o,u){var l=o.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),s.call(t,e,n)]})}),h=n.call(t,c,u);l=Pa.permute(l,h),c=Pa.permute(c,h);var f,g,d,p=r.call(t,c,u),m=l.length,v=l[0].length;for(g=0;v>g;++g)for(i.call(t,l[0][g],d=p[g],c[0][g][1]),f=1;m>f;++f)i.call(t,l[f][g],d+=c[f-1][g][1],c[f][g][1]);return o}var e=o,n=er,r=nr,i=tr,a=Kn,s=Qn;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:as.get(e)||er,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:os.get(e)||nr,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(i=e,t):i},t};var as=Pa.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(rr),a=t.map(ir),o=Pa.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,l=[],c=[];for(e=0;r>e;++e)n=o[e],u>s?(s+=a[n],l.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return Pa.range(t.length).reverse()},"default":er}),os=Pa.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,r,i,a,o,s,u,l,c=t.length,h=t[0],f=h.length,g=[];for(g[0]=u=l=0,n=1;f>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];c>e;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}g[n]=u-=i?a/i*s:0,l>u&&(l=u)}for(n=0;f>n;++n)g[n]-=l;return g},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:nr});Pa.layout.histogram=function(){function t(t,a){for(var o,s,u=[],l=t.map(n,this),c=r.call(this,l,a),h=i.call(this,c,l,a),a=-1,f=l.length,g=h.length-1,d=e?1:1/f;++a<g;)o=u[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(g>0)for(a=-1;++a<f;)s=l[a],s>=c[0]&&s<=c[1]&&(o=u[Pa.bisect(h,s,1,g)-1],o.y+=d,o.push(t[a]));return u}var e=!0,n=Number,r=ur,i=or;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=u(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return sr(t,e)}:u(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Pa.layout.hierarchy=function(){function t(e,o,s){var u=i.call(n,e,o);if(e.depth=o,s.push(e),u&&(l=u.length)){for(var l,c,h=-1,f=e.children=[],g=0,d=o+1;++h<l;)c=t(u[h],d,s),c.parent=e,f.push(c),g+=c.value;r&&f.sort(r),a&&(e.value=g)}else a&&(e.value=+a.call(n,e,o)||0);return e}function e(t,r){var i=t.children,o=0;if(i&&(s=i.length))for(var s,u=-1,l=r+1;++u<s;)o+=e(i[u],l);else a&&(o=+a.call(n,t,r)||0);return a&&(t.value=o),o}function n(e){var n=[];return t(e,0,n),n}var r=fr,i=cr,a=hr;return n.sort=function(t){return arguments.length?(r=t,n):r},n.children=function(t){return arguments.length?(i=t,n):i},n.value=function(t){return arguments.length?(a=t,n):a},n.revalue=function(t){return e(t,0),t
},n},Pa.layout.pack=function(){function t(t,i){var a=e.call(this,t,i),o=a[0];o.x=0,o.y=0,Ir(o,function(t){t.r=Math.sqrt(t.value)}),Ir(o,yr);var s=r[0],u=r[1],l=Math.max(2*o.r/s,2*o.r/u);if(n>0){var c=n*l/2;Ir(o,function(t){t.r+=c}),Ir(o,yr),Ir(o,function(t){t.r-=c}),l=Math.max(2*o.r/s,2*o.r/u)}return wr(o,s/2,u/2,1/l),a}var e=Pa.layout.hierarchy().sort(dr),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.padding=function(e){return arguments.length?(n=+e,t):n},lr(t,e)},Pa.layout.cluster=function(){function t(t,i){var a,o=e.call(this,t,i),s=o[0],u=0;Ir(s,function(t){var e=t.children;e&&e.length?(t.x=kr(e),t.y=Mr(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var l=Er(s),c=Sr(s),h=l.x-n(l,c)/2,f=c.x+n(c,l)/2;return Ir(s,function(t){t.x=(t.x-h)/(f-h)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),o}var e=Pa.layout.hierarchy().sort(null).value(null),n=Ar,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},lr(t,e)},Pa.layout.tree=function(){function t(t,i){function a(t,e){var r=t.children,i=t._tree;if(r&&(o=r.length)){for(var o,u,l,c=r[0],h=c,f=-1;++f<o;)l=r[f],a(l,u),h=s(l,u,h),u=l;Nr(t);var g=.5*(c._tree.prelim+l._tree.prelim);e?(i.prelim=e._tree.prelim+n(t,e),i.mod=i.prelim-g):i.prelim=g}else e&&(i.prelim=e._tree.prelim+n(t,e))}function o(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(r=n.length)){var r,i=-1;for(e+=t._tree.mod;++i<r;)o(n[i],e)}}function s(t,e,r){if(e){for(var i,a=t,o=t,s=e,u=t.parent.children[0],l=a._tree.mod,c=o._tree.mod,h=s._tree.mod,f=u._tree.mod;s=Lr(s),a=Tr(a),s&&a;)u=Tr(u),o=Lr(o),o._tree.ancestor=t,i=s._tree.prelim+h-a._tree.prelim-l+n(s,a),i>0&&(Fr(Br(s,t,r),t,i),l+=i,c+=i),h+=s._tree.mod,l+=a._tree.mod,f+=u._tree.mod,c+=o._tree.mod;s&&!Lr(o)&&(o._tree.thread=s,o._tree.mod+=h-c),a&&!Tr(u)&&(u._tree.thread=a,u._tree.mod+=l-f,r=t)}return r}var u=e.call(this,t,i),l=u[0];Ir(l,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(l),o(l,-l._tree.prelim);var c=Dr(l,Cr),h=Dr(l,Pr),f=Dr(l,$r),g=c.x-n(c,h)/2,d=h.x+n(h,c)/2,p=f.depth||1;return Ir(l,function(t){t.x=(t.x-g)/(d-g)*r[0],t.y=t.depth/p*r[1],delete t._tree}),u}var e=Pa.layout.hierarchy().sort(null).value(null),n=Ar,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},lr(t,e)},Pa.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var a=n.children;if(a&&a.length){var o,s,u,l=h(n),c=[],f=a.slice(),d=1/0,p="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(o=f[u-1]),c.area+=o.area,"squarify"!==g||(s=r(c,p))<=d?(f.pop(),d=s):(c.area-=c.pop().area,i(c,p,l,!1),p=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,p,l,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var a,o=h(e),s=r.slice(),u=[];for(t(s,o.dx*o.dy/e.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(i(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*a*d)):1/0}function i(t,e,n,r){var i,a=-1,o=t.length,s=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=t[a],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=t[a],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=0,a.y=0,a.dx=l[0],a.dy=l[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=i),i}var o,s=Pa.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=Or,f=!1,g="squarify",d=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Or(e):Rr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Rr(e,t)}if(!arguments.length)return c;var r;return h=null==(c=t)?Or:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(u=t?Math.round:Number,a):u!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(d=t,a):d},a.mode=function(t){return arguments.length?(g=t+"",a):g},lr(a,s)},Pa.csv=jr(",","text/csv"),Pa.tsv=jr("	","text/tab-separated-values"),Pa.geo={},Pa.geo.stream=function(t,e){ss.hasOwnProperty(t.type)?ss[t.type](t,e):Ur(t,e)};var ss={Feature:function(t,e){Ur(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ur(n[r].geometry,e)}},us={Sphere:function(t,e){e.sphere()},Point:function(t,e){var n=t.coordinates;e.point(n[0],n[1])},MultiPoint:function(t,e){for(var n,r=t.coordinates,i=-1,a=r.length;++i<a;)n=r[i],e.point(n[0],n[1])},LineString:function(t,e){Vr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vr(n[r],e,0)},Polygon:function(t,e){zr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)zr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ur(n[r],e)}};Pa.geo.albersUsa=function(){function t(t){return e(t)(t)}function e(t){var e=t[0],o=t[1];return o>50?r:-140>e?i:21>o?a:n}var n=Pa.geo.albers(),r=Pa.geo.albers().rotate([160,0]).center([0,60]).parallels([55,65]),i=Pa.geo.albers().rotate([160,0]).center([0,20]).parallels([8,18]),a=Pa.geo.albers().rotate([60,0]).center([0,10]).parallels([8,18]);return t.scale=function(e){return arguments.length?(n.scale(e),r.scale(.6*e),i.scale(e),a.scale(1.5*e),t.translate(n.translate())):n.scale()},t.translate=function(e){if(!arguments.length)return n.translate();var o=n.scale(),s=e[0],u=e[1];return n.translate(e),r.translate([s-.4*o,u+.17*o]),i.translate([s-.19*o,u+.2*o]),a.translate([s+.58*o,u+.43*o]),t},t.scale(n.scale())},(Pa.geo.albers=function(){var t=29.5*Ca,e=45.5*Ca,n=Fi(Qr),r=n(t,e);return r.parallels=function(r){return arguments.length?n(t=r[0]*Ca,e=r[1]*Ca):[t*$a,e*$a]},r.rotate([98,0]).center([0,38]).scale(1e3)}).raw=Qr;var ls=Vi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Pa.geo.azimuthalEqualArea=function(){return Ni(ls)}).raw=ls;var cs=Vi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},o);(Pa.geo.azimuthalEquidistant=function(){return Ni(cs)}).raw=cs,Pa.geo.bounds=ti(o),Pa.geo.centroid=function(t){hs=fs=gs=ds=ps=0,Pa.geo.stream(t,ms);var e;return fs&&Math.abs(e=Math.sqrt(gs*gs+ds*ds+ps*ps))>Da?[Math.atan2(ds,gs)*$a,Math.asin(Math.max(-1,Math.min(1,ps/e)))*$a]:void 0};var hs,fs,gs,ds,ps,ms={sphere:function(){2>hs&&(hs=2,fs=gs=ds=ps=0)},point:ei,lineStart:ri,lineEnd:ii,polygonStart:function(){2>hs&&(hs=2,fs=gs=ds=ps=0),ms.lineStart=ni},polygonEnd:function(){ms.lineStart=ri}};Pa.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=Oi(-t[0]*Ca,-t[1]*Ca,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=$a,t[1]*=$a}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=ai((e=+r)*Ca,i*Ca),t):e},t.precision=function(r){return arguments.length?(n=ai(e*Ca,(i=+r)*Ca),t):i},t.angle(90)};var vs=si(s,di,mi);(Pa.geo.equirectangular=function(){return Ni(_i).scale(250/La)}).raw=_i.invert=_i;var ys=Vi(function(t){return 1/t},Math.atan);(Pa.geo.gnomonic=function(){return Ni(ys)}).raw=ys,Pa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Pa.range(Math.ceil(r/u)*u,n,u).map(o).concat(Pa.range(Math.ceil(a/l)*l,i,l).map(s))}var n,r,i,a,o,s,u=22.5,l=u,c=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[o(r).concat(s(i).slice(1),o(n).reverse().slice(1),s(a).reverse().slice(1))]}},t.extent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],a=+e[0][1],i=+e[1][1],r>n&&(e=r,r=n,n=e),a>i&&(e=a,a=i,i=e),t.precision(c)):[[r,a],[n,i]]},t.step=function(e){return arguments.length?(u=+e[0],l=+e[1],t):[u,l]},t.precision=function(e){return arguments.length?(c=+e,o=bi(a,i,c),s=wi(r,n,c),t):c},t.extent([[-180+Da,-90+Da],[180-Da,90-Da]])},Pa.geo.interpolate=function(t,e){return Mi(t[0]*Ca,t[1]*Ca,e[0]*Ca,e[1]*Ca)},Pa.geo.greatArc=function(){function n(){for(var t=r||o.apply(this,arguments),e=i||s.apply(this,arguments),n=a||Pa.geo.interpolate(t,e),l=0,c=u/n.distance,h=[t];(l+=c)<1;)h.push(n(l));return h.push(e),{type:"LineString",coordinates:h}}var r,i,a,o=e,s=t,u=6*Ca;return n.distance=function(){return(a||Pa.geo.interpolate(r||o.apply(this,arguments),i||s.apply(this,arguments))).distance},n.source=function(t){return arguments.length?(o=t,r="function"==typeof t?null:t,a=r&&i?Pa.geo.interpolate(r,i):null,n):o},n.target=function(t){return arguments.length?(s=t,i="function"==typeof t?null:t,a=r&&i?Pa.geo.interpolate(r,i):null,n):s},n.precision=function(t){return arguments.length?(u=t*Ca,n):u/Ca},n},ki.invert=function(t,e){return[2*La*t,2*Math.atan(Math.exp(2*La*e))-La/2]},(Pa.geo.mercator=function(){return Ni(ki).scale(500)}).raw=ki;var _s=Vi(function(){return 1},Math.asin);(Pa.geo.orthographic=function(){return Ni(_s)}).raw=_s,Pa.geo.path=function(){function t(t){return t&&Pa.geo.stream(t,r(i.pointRadius("function"==typeof a?+a.apply(this,arguments):a))),i.result()}var e,n,r,i,a=4.5;return t.area=function(t){return bs=0,Pa.geo.stream(t,r(xs)),bs},t.centroid=function(t){return hs=gs=ds=ps=0,Pa.geo.stream(t,r(Ms)),ps?[gs/ps,ds/ps]:void 0},t.bounds=function(t){return ti(r)(t)},t.projection=function(n){return arguments.length?(r=(e=n)?n.stream||Si(n):o,t):e},t.context=function(e){return arguments.length?(i=null==(n=e)?new Ai:new Ti(e),t):n},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:+e,t):a},t.projection(Pa.geo.albersUsa()).context(null)};var bs,ws,xs={point:Be,lineStart:Be,lineEnd:Be,polygonStart:function(){ws=0,xs.lineStart=Li},polygonEnd:function(){xs.lineStart=xs.lineEnd=xs.point=Be,bs+=Math.abs(ws/2)}},Ms={point:Di,lineStart:Pi,lineEnd:Ci,polygonStart:function(){Ms.lineStart=$i},polygonEnd:function(){Ms.point=Di,Ms.lineStart=Pi,Ms.lineEnd=Ci}};Pa.geo.area=function(t){return ks=0,Pa.geo.stream(t,As),ks};var ks,Es,Ss,As={sphere:function(){ks+=4*La},point:Be,lineStart:Be,lineEnd:Be,polygonStart:function(){Es=1,Ss=0,As.lineStart=Ii},polygonEnd:function(){var t=2*Math.atan2(Ss,Es);ks+=0>t?4*La+t:t,As.lineStart=As.lineEnd=As.point=Be}};Pa.geo.projection=Ni,Pa.geo.projectionMutator=Fi;var Ts=Vi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Pa.geo.stereographic=function(){return Ni(Ts)}).raw=Ts,Pa.geom={},Pa.geom.hull=function(t){if(t.length<3)return[];var e,n,r,i,a,o,s,u,l,c,h=t.length,f=h-1,g=[],d=[],p=0;for(e=1;h>e;++e)t[e][1]<t[p][1]?p=e:t[e][1]==t[p][1]&&(p=t[e][0]<t[p][0]?e:p);for(e=0;h>e;++e)e!==p&&(i=t[e][1]-t[p][1],r=t[e][0]-t[p][0],g.push({angle:Math.atan2(i,r),index:e}));for(g.sort(function(t,e){return t.angle-e.angle}),l=g[0].angle,u=g[0].index,s=0,e=1;f>e;++e)n=g[e].index,l==g[e].angle?(r=t[u][0]-t[p][0],i=t[u][1]-t[p][1],a=t[n][0]-t[p][0],o=t[n][1]-t[p][1],r*r+i*i>=a*a+o*o?g[e].index=-1:(g[s].index=-1,l=g[e].angle,s=e,u=n)):(l=g[e].angle,s=e,u=n);for(d.push(p),e=0,n=0;2>e;++n)-1!==g[n].index&&(d.push(g[n].index),e++);for(c=d.length;f>n;++n)if(-1!==g[n].index){for(;!zi(d[c-2],d[c-1],g[n].index,t);)--c;d[c++]=g[n].index}var m=[];for(e=0;c>e;++e)m.push(t[d[e]]);return m},Pa.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return.5*r},t.centroid=function(e){var n,r,i=-1,a=t.length,o=0,s=0,u=t[a-1];for(arguments.length||(e=-1/(6*t.area()));++i<a;)n=u,u=t[i],r=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*r,s+=(n[1]+u[1])*r;return[o*e,s*e]},t.clip=function(e){for(var n,r,i,a,o,s,u=-1,l=t.length,c=t[l-1];++u<l;){for(n=e.slice(),e.length=0,a=t[u],o=n[(i=n.length)-1],r=-1;++r<i;)s=n[r],Yi(s,c,a)?(Yi(o,c,a)||e.push(qi(o,s,c,a)),e.push(s)):Yi(o,c,a)&&e.push(qi(o,s,c,a)),o=s;c=a}return e},t},Pa.geom.voronoi=function(t){var e=t.map(function(){return[]}),n=1e6;return Hi(t,function(t){var r,i,a,o,s,u;1===t.a&&t.b>=0?(r=t.ep.r,i=t.ep.l):(r=t.ep.l,i=t.ep.r),1===t.a?(s=r?r.y:-n,a=t.c-t.b*s,u=i?i.y:n,o=t.c-t.b*u):(a=r?r.x:-n,s=t.c-t.a*a,o=i?i.x:n,u=t.c-t.a*o);var l=[a,s],c=[o,u];e[t.region.l.index].push(l,c),e[t.region.r.index].push(l,c)}),e=e.map(function(e,n){var r=t[n][0],i=t[n][1],a=e.map(function(t){return Math.atan2(t[0]-r,t[1]-i)}),o=Pa.range(e.length).sort(function(t,e){return a[t]-a[e]});return o.filter(function(t,e){return!e||a[t]-a[o[e-1]]>Da}).map(function(t){return e[t]})}),e.forEach(function(e,r){var i=e.length;if(!i)return e.push([-n,-n],[-n,n],[n,n],[n,-n]);if(!(i>2)){var a=t[r],o=e[0],s=e[1],u=a[0],l=a[1],c=o[0],h=o[1],f=s[0],g=s[1],d=Math.abs(f-c),p=g-h;if(Math.abs(p)<Da){var m=h>l?-n:n;e.push([-n,m],[n,m])}else if(Da>d){var v=c>u?-n:n;e.push([v,-n],[v,n])}else{var m=(c-u)*(g-h)>(f-c)*(h-l)?n:-n,y=Math.abs(p)-d;Math.abs(y)<Da?e.push([0>p?m:-m,m]):(y>0&&(m*=-1),e.push([-n,m],[n,m]))}}}),e};var Ls={l:"r",r:"l"};Pa.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return Hi(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,r){var i=t[r],a=i[0],o=i[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-a,t[1]-o)}),e.sort(function(t,e){return t.angle-e.angle});for(var s=0,u=e.length-1;u>s;s++)n.push([i,e[s],e[s+1]])}),n},Pa.geom.quadtree=function(t,e,n,r,i){function a(t,e,n,r,i,a){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var s=t.point;s?Math.abs(s.x-e.x)+Math.abs(s.y-e.y)<.01?o(t,e,n,r,i,a):(t.point=null,o(t,s,n,r,i,a),o(t,e,n,r,i,a)):t.point=e}else o(t,e,n,r,i,a)}function o(t,e,n,r,i,o){var s=.5*(n+i),u=.5*(r+o),l=e.x>=s,c=e.y>=u,h=(c<<1)+l;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=Gi()),l?n=s:i=s,c?r=u:o=u,a(t,e,n,r,i,o)}var s,u=-1,l=t.length;if(arguments.length<5)if(3===arguments.length)i=n,r=e,n=e=0;else for(e=n=1/0,r=i=-1/0;++u<l;)s=t[u],s.x<e&&(e=s.x),s.y<n&&(n=s.y),s.x>r&&(r=s.x),s.y>i&&(i=s.y);var c=r-e,h=i-n;c>h?i=n+c:r=e+h;var f=Gi();return f.add=function(t){a(f,t,e,n,r,i)},f.visit=function(t){Wi(t,f,e,n,r,i)},t.forEach(f.add),f},Pa.time={};var Ds=Date,Ps=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Zi.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Cs.setUTCDate.apply(this._,arguments)},setDay:function(){Cs.setUTCDay.apply(this._,arguments)},setFullYear:function(){Cs.setUTCFullYear.apply(this._,arguments)},setHours:function(){Cs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Cs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Cs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Cs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Cs.setUTCSeconds.apply(this._,arguments)},setTime:function(){Cs.setTime.apply(this._,arguments)}};var Cs=Date.prototype,$s="%a %b %e %X %Y",Is="%m/%d/%Y",Ns="%H:%M:%S",Fs=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Bs=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Os=["January","February","March","April","May","June","July","August","September","October","November","December"],Rs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Pa.time.format=function(t){function e(e){for(var r,i,a,o=[],s=-1,u=0;++s<n;)37===t.charCodeAt(s)&&(o.push(t.substring(u,s)),null!=(i=Hs[r=t.charAt(++s)])&&(r=t.charAt(++s)),(a=Gs[r])&&(r=a(e,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(t.substring(u,s)),o.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=Xi(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=new Ds;return i.setFullYear(n.y,n.m,n.d),i.setHours(n.H,n.M,n.S,n.L),i},e.toString=function(){return t},e};var js=Ji(Fs),Us=Ji(Bs),Vs=Ji(Os),zs=Ki(Os),Ys=Ji(Rs),qs=Ki(Rs),Hs={"-":"",_:" ",0:"0"},Gs={a:function(t){return Bs[t.getDay()]},A:function(t){return Fs[t.getDay()]},b:function(t){return Rs[t.getMonth()]},B:function(t){return Os[t.getMonth()]},c:Pa.time.format($s),d:function(t,e){return Qi(t.getDate(),e,2)},e:function(t,e){return Qi(t.getDate(),e,2)},H:function(t,e){return Qi(t.getHours(),e,2)},I:function(t,e){return Qi(t.getHours()%12||12,e,2)},j:function(t,e){return Qi(1+Pa.time.dayOfYear(t),e,3)},L:function(t,e){return Qi(t.getMilliseconds(),e,3)},m:function(t,e){return Qi(t.getMonth()+1,e,2)},M:function(t,e){return Qi(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Qi(t.getSeconds(),e,2)},U:function(t,e){return Qi(Pa.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Qi(Pa.time.mondayOfYear(t),e,2)},x:Pa.time.format(Is),X:Pa.time.format(Ns),y:function(t,e){return Qi(t.getFullYear()%100,e,2)},Y:function(t,e){return Qi(t.getFullYear()%1e4,e,4)},Z:va,"%":function(){return"%"}},Ws={a:ta,A:ea,b:na,B:ra,c:ia,d:ha,e:ha,H:fa,I:fa,L:pa,m:ca,M:ga,p:ma,S:da,x:aa,X:oa,y:ua,Y:sa},Zs=/^\s*\d+/,Xs=Pa.map({am:0,pm:1});Pa.time.format.utc=function(t){function e(t){try{Ds=Zi;var e=new Ds;return e._=t,n(e)}finally{Ds=Date}}var n=Pa.time.format(t);return e.parse=function(t){try{Ds=Zi;var e=n.parse(t);return e&&e._}finally{Ds=Date}},e.toString=n.toString,e};var Js=Pa.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");Pa.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ya:Js,ya.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ya.toString=Js.toString,Pa.time.second=_a(function(t){return new Ds(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Pa.time.seconds=Pa.time.second.range,Pa.time.seconds.utc=Pa.time.second.utc.range,Pa.time.minute=_a(function(t){return new Ds(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Pa.time.minutes=Pa.time.minute.range,Pa.time.minutes.utc=Pa.time.minute.utc.range,Pa.time.hour=_a(function(t){var e=t.getTimezoneOffset()/60;return new Ds(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Pa.time.hours=Pa.time.hour.range,Pa.time.hours.utc=Pa.time.hour.utc.range,Pa.time.day=_a(function(t){var e=new Ds(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Pa.time.days=Pa.time.day.range,Pa.time.days.utc=Pa.time.day.utc.range,Pa.time.dayOfYear=function(t){var e=Pa.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Ps.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=Pa.time[t]=_a(function(t){return(t=Pa.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Pa.time.year(t).getDay();return Math.floor((Pa.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Pa.time[t+"s"]=n.range,Pa.time[t+"s"].utc=n.utc.range,Pa.time[t+"OfYear"]=function(t){var n=Pa.time.year(t).getDay();return Math.floor((Pa.time.dayOfYear(t)+(n+e)%7)/7)}}),Pa.time.week=Pa.time.sunday,Pa.time.weeks=Pa.time.sunday.range,Pa.time.weeks.utc=Pa.time.sunday.utc.range,Pa.time.weekOfYear=Pa.time.sundayOfYear,Pa.time.month=_a(function(t){return t=Pa.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Pa.time.months=Pa.time.month.range,Pa.time.months.utc=Pa.time.month.utc.range,Pa.time.year=_a(function(t){return t=Pa.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Pa.time.years=Pa.time.year.range,Pa.time.years.utc=Pa.time.year.utc.range;var Ks=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Qs=[[Pa.time.second,1],[Pa.time.second,5],[Pa.time.second,15],[Pa.time.second,30],[Pa.time.minute,1],[Pa.time.minute,5],[Pa.time.minute,15],[Pa.time.minute,30],[Pa.time.hour,1],[Pa.time.hour,3],[Pa.time.hour,6],[Pa.time.hour,12],[Pa.time.day,1],[Pa.time.day,2],[Pa.time.week,1],[Pa.time.month,1],[Pa.time.month,3],[Pa.time.year,1]],tu=[[Pa.time.format("%Y"),s],[Pa.time.format("%B"),function(t){return t.getMonth()}],[Pa.time.format("%b %d"),function(t){return 1!=t.getDate()}],[Pa.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[Pa.time.format("%I %p"),function(t){return t.getHours()}],[Pa.time.format("%I:%M"),function(t){return t.getMinutes()}],[Pa.time.format(":%S"),function(t){return t.getSeconds()}],[Pa.time.format(".%L"),function(t){return t.getMilliseconds()}]],eu=Pa.scale.linear(),nu=ka(tu);Qs.year=function(t,e){return eu.domain(t.map(Sa)).ticks(e).map(Ea)},Pa.time.scale=function(){return wa(Pa.scale.linear(),Qs,nu)};var ru=Qs.map(function(t){return[t[0].utc,t[1]]}),iu=[[Pa.time.format.utc("%Y"),s],[Pa.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[Pa.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[Pa.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[Pa.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[Pa.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[Pa.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[Pa.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],au=ka(iu);return ru.year=function(t,e){return eu.domain(t.map(Ta)).ticks(e).map(Aa)},Pa.time.scale.utc=function(){return wa(Pa.scale.linear(),ru,au)},Pa}();var TWEEN=TWEEN||function(){var t=[];return{REVISION:"9",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e){if(0===t.length)return!1;var n=0,r=t.length;for(e=void 0!==e?e:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r>n;)t[n].update(e)?n++:(t.splice(n,1),r--);return!0}}}();TWEEN.Tween=function(t){var e=t,n={},r={},i={},a=1e3,o=0,s=0,u=null,l=TWEEN.Easing.Linear.None,c=TWEEN.Interpolation.Linear,h=[],f=null,g=!1,d=null,p=null;this.to=function(t,e){return void 0!==e&&(a=e),r=t,this},this.start=function(t){TWEEN.add(this),g=!1,u=void 0!==t?t:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),u+=s;for(var a in r)if(a in e!=!1&&null!==e[a]){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[e[a]].concat(r[a])}n[a]=e[a],n[a]instanceof Array==0&&(n[a]*=1),i[a]=n[a]}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(t){return s=t,this},this.repeat=function(t){return o=t,this},this.easing=function(t){return l=t,this},this.interpolation=function(t){return c=t,this},this.chain=function(){return h=arguments,this},this.onStart=function(t){return f=t,this},this.onUpdate=function(t){return d=t,this},this.onComplete=function(t){return p=t,this},this.update=function(t){if(u>t)return!0;g===!1&&(null!==f&&f.call(e),g=!0);var m=(t-u)/a;m=m>1?1:m;var v=l(m);for(var y in n){var _=n[y],b=r[y];e[y]=b instanceof Array?c(b,v):_+(b-_)*v}if(null!==d&&d.call(e,v),1==m){if(o>0){isFinite(o)&&o--;for(var y in i)n[y]=i[y];return u=t+s,!0}null!==p&&p.call(e);for(var w=0,x=h.length;x>w;w++)h[w].start(t);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r)))},Out:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/r)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=TWEEN.Interpolation.Utils.Linear;return 0>e?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){var n,r=0,i=t.length-1,a=Math.pow,o=TWEEN.Interpolation.Utils.Bernstein;for(n=0;i>=n;n++)r+=a(1-e,i-n)*a(e,n)*t[n]*o(i,n);return r},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(0>e&&(i=Math.floor(r=n*(1+e))),a(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):0>e?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[i?i-1:0],t[i],t[i+1>n?n:i+1],t[i+2>n?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=TWEEN.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n,r=1;if(t[e])return t[e];for(n=e;n>1;n--)r*=n;return t[e]=r}}(),CatmullRom:function(t,e,n,r,i){var a=.5*(n-t),o=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+a+o)*u+(-3*e+3*n-2*a-o)*s+a*i+e}}},function(t){function e(t,e,n,r){var i=n.lang();return i[t].call?i[t](n,r):i[t][e]}function n(t,e){return function(n){return s(t.call(this,n),e)}}function r(t){return function(e){var n=t.call(this,e);return n+this.lang().ordinal(n)}}function i(t,e,n){this._d=t,this._isUTC=!!e,this._a=t._a||null,this._lang=n||!1}function a(t){var e=this._data={},n=t.years||t.y||0,r=t.months||t.M||0,i=t.weeks||t.w||0,a=t.days||t.d||0,s=t.hours||t.h||0,u=t.minutes||t.m||0,l=t.seconds||t.s||0,c=t.milliseconds||t.ms||0;this._milliseconds=c+1e3*l+6e4*u+36e5*s,this._days=a+7*i,this._months=r+12*n,e.milliseconds=c%1e3,l+=o(c/1e3),e.seconds=l%60,u+=o(l/60),e.minutes=u%60,s+=o(u/60),e.hours=s%24,a+=o(s/24),a+=7*i,e.days=a%30,r+=o(a/30),e.months=r%12,n+=o(r/12),e.years=n,this._lang=!1}function o(t){return 0>t?Math.ceil(t):Math.floor(t)}function s(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function u(t,e,n){var r,i=e._milliseconds,a=e._days,o=e._months;i&&t._d.setTime(+t+i*n),a&&t.date(t.date()+a*n),o&&(r=t.date(),t.date(1).month(t.month()+o*n).date(Math.min(r,t.daysInMonth())))}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t,e){var n,r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),a=0;for(n=0;r>n;n++)~~t[n]!==~~e[n]&&a++;return a+i}function h(t,e,n,r){var i,a,o=[];for(i=0;7>i;i++)o[i]=t[i]=null==t[i]?2===i?1:0:t[i];return t[7]=o[7]=e,null!=t[8]&&(o[8]=t[8]),t[3]+=n||0,t[4]+=r||0,a=new Date(0),e?(a.setUTCFullYear(t[0],t[1],t[2]),a.setUTCHours(t[3],t[4],t[5],t[6])):(a.setFullYear(t[0],t[1],t[2]),a.setHours(t[3],t[4],t[5],t[6])),a._a=o,a}function f(t,e){var n,r,i=[];for(!e&&$&&(e=require("./lang/"+t)),n=0;n<I.length;n++)e[I[n]]=e[I[n]]||P.en[I[n]];for(n=0;12>n;n++)r=A([2e3,n]),i[n]=new RegExp("^"+(e.months[n]||e.months(r,""))+"|^"+(e.monthsShort[n]||e.monthsShort(r,"")).replace(".",""),"i");return e.monthsParse=e.monthsParse||i,P[t]=e,e}function g(t){var e="string"==typeof t&&t||t&&t._lang||null;return e?P[e]||f(e):A}function d(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function p(t){var e,n,r=t.match(F);for(e=0,n=r.length;n>e;e++)r[e]=ee[r[e]]?ee[r[e]]:d(r[e]);return function(i){var a="";for(e=0;n>e;e++)a+="function"==typeof r[e].call?r[e].call(i,t):r[e];return a}}function m(t,e){function n(e){return t.lang().longDateFormat[e]||e}for(var r=5;r--&&B.test(e);)e=e.replace(B,n);return K[e]||(K[e]=p(e)),K[e](t)}function v(t){switch(t){case"DDDD":return U;case"YYYY":return V;case"S":case"SS":case"SSS":case"DDD":return j;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return z;case"Z":case"ZZ":return Y;case"T":return q;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return R;default:return new RegExp(t.replace("\\",""))}}function y(t,e,n,r){var i,a;switch(t){case"M":case"MM":n[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":for(i=0;12>i;i++)if(g().monthsParse[i].test(e)){n[1]=i,a=!0;break}a||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(n[2]=~~e);break;case"YY":n[0]=~~e+(~~e>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(e);break;case"a":case"A":r.isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~e;break;case"m":case"mm":n[4]=~~e;break;case"s":case"ss":n[5]=~~e;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+e));break;case"Z":case"ZZ":r.isUTC=!0,i=(e+"").match(Z),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&"+"===i[0]&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}null==e&&(n[8]=!1)}function _(t,e){var n,r,i=[0,0,1,0,0,0,0],a={tzh:0,tzm:0},o=e.match(F);for(n=0;n<o.length;n++)r=(v(o[n]).exec(t)||[])[0],r&&(t=t.slice(t.indexOf(r)+r.length)),ee[o[n]]&&y(o[n],r,i,a);return a.isPm&&i[3]<12&&(i[3]+=12),a.isPm===!1&&12===i[3]&&(i[3]=0),h(i,a.isUTC,a.tzh,a.tzm)}function b(t,e){var n,r,a,o,s,u=t.match(O)||[],l=99;for(a=0;a<e.length;a++)o=_(t,e[a]),r=m(new i(o),e[a]).match(O)||[],s=c(u,r),l>s&&(l=s,n=o);return n}function w(t){var e,n="YYYY-MM-DDT";if(H.exec(t)){for(e=0;4>e;e++)if(W[e][1].exec(t)){n+=W[e][0];break}return Y.exec(t)?_(t,n+" Z"):_(t,n)}return new Date(t)}function x(t,e,n,r,i){var a=i.relativeTime[t];return"function"==typeof a?a(e||1,!!n,t,r):a.replace(/%d/i,e||1)}function M(t,e,n){var r=D(Math.abs(t)/1e3),i=D(r/60),a=D(i/60),o=D(a/24),s=D(o/365),u=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===a&&["h"]||22>a&&["hh",a]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",D(o/30)]||1===s&&["y"]||["yy",s];return u[2]=e,u[3]=t>0,u[4]=n,x.apply({},u)}function k(t,e){A.fn[t]=function(t){var n=this._isUTC?"UTC":"";
return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function E(t){A.duration.fn[t]=function(){return this._data[t]}}function S(t,e){A.duration.fn["as"+t]=function(){return+this/e}}for(var A,T,L="1.7.2",D=Math.round,P={},C="en",$="undefined"!=typeof module&&module.exports,I="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),N=/^\/?Date\((\-?\d+)/i,F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,O=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,R=/\d\d?/,j=/\d{1,3}/,U=/\d{3}/,V=/\d{1,4}/,z=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,Y=/Z|[\+\-]\d\d:?\d\d/i,q=/T/i,H=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,G="YYYY-MM-DDTHH:mm:ssZ",W=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],Z=/([\+\-]|\d\d)/gi,X="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),J={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},K={},Q="DDD w M D d".split(" "),te="M D H h m s w".split(" "),ee={M:function(){return this.month()+1},MMM:function(t){return e("monthsShort",this.month(),this,t)},MMMM:function(t){return e("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){var t=new Date(this.year(),this.month(),this.date()),e=new Date(this.year(),0,1);return~~((t-e)/864e5+1.5)},d:function(){return this.day()},dd:function(t){return e("weekdaysMin",this.day(),this,t)},ddd:function(t){return e("weekdaysShort",this.day(),this,t)},dddd:function(t){return e("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),e=new Date(t.getFullYear(),0,4);return~~((t-e)/864e5/7+1.5)},YY:function(){return s(this.year()%100,2)},YYYY:function(){return s(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return s(~~(this.milliseconds()/10),2)},SSS:function(){return s(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+s(~~(t/60),2)+":"+s(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+s(~~(10*t/6),4)}};Q.length;)T=Q.pop(),ee[T+"o"]=r(ee[T]);for(;te.length;)T=te.pop(),ee[T+T]=n(ee[T],2);for(ee.DDDD=n(ee.DDD,3),A=function(e,n){if(null===e||""===e)return null;var r,a;return A.isMoment(e)?new i(new Date(+e._d),e._isUTC,e._lang):(n?r=l(n)?b(e,n):_(e,n):(a=N.exec(e),r=e===t?new Date:a?new Date(+a[1]):e instanceof Date?e:l(e)?h(e):"string"==typeof e?w(e):new Date(e)),new i(r))},A.utc=function(t,e){return l(t)?new i(h(t,!0),!0):("string"!=typeof t||Y.exec(t)||(t+=" +0000",e&&(e+=" Z")),A(t,e).utc())},A.unix=function(t){return A(1e3*t)},A.duration=function(t,e){var n,r=A.isDuration(t),i="number"==typeof t,o=r?t._data:i?{}:t;return i&&(e?o[e]=t:o.milliseconds=t),n=new a(o),r&&(n._lang=t._lang),n},A.humanizeDuration=function(t,e,n){return A.duration(t,e===!0?null:e).humanize(e===!0?!0:n)},A.version=L,A.defaultFormat=G,A.lang=function(t,e){var n;if(!t)return C;if((e||!P[t])&&f(t,e),P[t]){for(n=0;n<I.length;n++)A[I[n]]=P[t][I[n]];A.monthsParse=P[t].monthsParse,C=t}},A.langData=g,A.isMoment=function(t){return t instanceof i},A.isDuration=function(t){return t instanceof a},A.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"}}),A.fn=i.prototype={clone:function(){return A(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!c(this._a,(this._a[7]?A.utc(this._a):A(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){return m(this,t?t:A.defaultFormat)},add:function(t,e){var n=e?A.duration(+e,t):A.duration(t);return u(this,n,1),this},subtract:function(t,e){var n=e?A.duration(+e,t):A.duration(t);return u(this,n,-1),this},diff:function(t,e,n){var r,i=this._isUTC?A(t).utc():A(t).local(),a=6e4*(this.zone()-i.zone()),o=this._d-i._d-a,s=this.year()-i.year(),u=this.month()-i.month(),l=this.date()-i.date();return r="months"===e?12*s+u+l/30:"years"===e?s+(u+l/30)/12:"seconds"===e?o/1e3:"minutes"===e?o/6e4:"hours"===e?o/36e5:"days"===e?o/864e5:"weeks"===e?o/6048e5:o,n?r:D(r)},from:function(t,e){return A.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(A(),t)},calendar:function(){var t=this.diff(A().sod(),"days",!0),e=this.lang().calendar,n=e.sameElse,r=-6>t?n:-1>t?e.lastWeek:0>t?e.lastDay:1>t?e.sameDay:2>t?e.nextDay:7>t?e.nextWeek:n;return this.format("function"==typeof r?r.apply(this):r)},isLeapYear:function(){var t=this.year();return t%4===0&&t%100!==0||t%400===0},isDST:function(){return this.zone()<A([this.year()]).zone()||this.zone()<A([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return A.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?g(this):(this._lang=e,this)}},T=0;T<X.length;T++)k(X[T].toLowerCase(),X[T]);k("year","FullYear"),A.duration.fn=a.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=this.lang().relativeTime,r=M(e,!t,this.lang()),i=0>=e?n.past:n.future;return t&&(r="function"==typeof i?i(r):i.replace(/%s/i,r)),r},lang:A.fn.lang};for(T in J)J.hasOwnProperty(T)&&(S(T,J[T]),E(T.toLowerCase()));S("Weeks",6048e5),$&&(module.exports=A),"undefined"==typeof ender&&(this.moment=A),"function"==typeof define&&define.amd&&define("moment",[],function(){return A})}.call(this),function(t){"use strict";function e(t){return this instanceof e?(t||(t={}),"number"==typeof t&&(t={frameRate:t}),null!=t.useNative||(t.useNative=!0),this.options=t,this.frameRate=t.frameRate||e.FRAME_RATE,this._frameLength=1e3/this.frameRate,this._isCustomFrameRate=this.frameRate!==e.FRAME_RATE,this._timeoutId=null,this._callbacks={},this._lastTickTime=0,void(this._tickCounter=0)):new e(t)}var n,r;!function(){var i,a,o=["webkit","moz","ms","o"];try{t.top.name,a=t.top}catch(s){a=t}for(n=a.requestAnimationFrame,r=a.cancelAnimationFrame||a.cancelRequestAnimationFrame,i=0;i<o.length&&!n;i++)n=a[o[i]+"RequestAnimationFrame"],r=a[o[i]+"CancelAnimationFrame"]||a[o[i]+"CancelRequestAnimationFrame"];n&&n(function(){e.hasNative=!0})}(),e.FRAME_RATE=60,e.shim=function(n){var r=new e(n);return t.requestAnimationFrame=function(t){return r.request(t)},t.cancelAnimationFrame=function(t){return r.cancel(t)},r},e.now=Date.now||function(){return(new Date).getTime()},e.navigationStart=e.now(),e.perfNow=function(){return t.performance&&t.performance.now?t.performance.now():e.now()-e.navigationStart},e.hasNative=!1,e.prototype.request=function(r){var i,a=this;if(++this._tickCounter,e.hasNative&&a.options.useNative&&!this._isCustomFrameRate)return n(r);if(!r)throw new TypeError("Not enough arguments");return null==this._timeoutId&&(i=this._frameLength+this._lastTickTime-e.now(),0>i&&(i=0),this._timeoutId=t.setTimeout(function(){var t;a._lastTickTime=e.now(),a._timeoutId=null,++a._tickCounter;for(t in a._callbacks)a._callbacks[t]&&(e.hasNative&&a.options.useNative?n(a._callbacks[t]):a._callbacks[t](e.perfNow()),delete a._callbacks[t])},i)),this._callbacks[this._tickCounter]=r,this._tickCounter},e.prototype.cancel=function(t){e.hasNative&&this.options.useNative&&r(t),delete this._callbacks[t]},"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.AnimationFrame=e}(window),window.Modernizr=function(t,e,n){function r(t){_.cssText=t}function i(t,e){return r(M.join(t+";")+(e||""))}function a(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var r in t){var i=t[r];if(!o(i,"-")&&_[i]!==n)return"pfx"==e?i:!0}return!1}function u(t,e,r){for(var i in t){var o=e[t[i]];if(o!==n)return r===!1?t[i]:a(o,"function")?o.bind(r||e):o}return!1}function l(t,e,n){var r=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+E.join(r+" ")+r).split(" ");return a(e,"string")||a(e,"undefined")?s(i,e):(i=(t+" "+S.join(r+" ")+r).split(" "),u(i,e,n))}function c(){d.input=function(n){for(var r=0,i=n.length;i>r;r++)D[n[r]]=!!(n[r]in b);return D.list&&(D.list=!(!e.createElement("datalist")||!t.HTMLDataListElement)),D}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),d.inputtypes=function(t){for(var r,i,a,o=0,s=t.length;s>o;o++)b.setAttribute("type",i=t[o]),r="text"!==b.type,r&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&b.style.WebkitAppearance!==n?(m.appendChild(b),a=e.defaultView,r=a.getComputedStyle&&"textfield"!==a.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,m.removeChild(b)):/^(search|tel)$/.test(i)||(r=/^(url|email)$/.test(i)?b.checkValidity&&b.checkValidity()===!1:b.value!=w)),L[t[o]]=!!r;return L}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var h,f,g="2.6.3",d={},p=!0,m=e.documentElement,v="modernizr",y=e.createElement(v),_=y.style,b=e.createElement("input"),w=":)",x={}.toString,M=" -webkit- -moz- -o- -ms- ".split(" "),k="Webkit Moz O ms",E=k.split(" "),S=k.toLowerCase().split(" "),A={svg:"http://www.w3.org/2000/svg"},T={},L={},D={},P=[],C=P.slice,$=function(t,n,r,i){var a,o,s,u,l=e.createElement("div"),c=e.body,h=c||e.createElement("body");if(parseInt(r,10))for(;r--;)s=e.createElement("div"),s.id=i?i[r]:v+(r+1),l.appendChild(s);return a=["&#173;",'<style id="s',v,'">',t,"</style>"].join(""),l.id=v,(c?l:h).innerHTML+=a,h.appendChild(l),c||(h.style.background="",h.style.overflow="hidden",u=m.style.overflow,m.style.overflow="hidden",m.appendChild(h)),o=n(l,t),c?l.parentNode.removeChild(l):(h.parentNode.removeChild(h),m.style.overflow=u),!!o},I=function(e){var n=t.matchMedia||t.msMatchMedia;if(n)return n(e).matches;var r;return $("@media "+e+" { #"+v+" { position: absolute; } }",function(e){r="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),r},N=function(){function t(t,i){i=i||e.createElement(r[t]||"div"),t="on"+t;var o=t in i;return o||(i.setAttribute||(i=e.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(t,""),o=a(i[t],"function"),a(i[t],"undefined")||(i[t]=n),i.removeAttribute(t))),i=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),F={}.hasOwnProperty;f=a(F,"undefined")||a(F.call,"undefined")?function(t,e){return e in t&&a(t.constructor.prototype[e],"undefined")}:function(t,e){return F.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=C.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=e.prototype;var a=new i,o=e.apply(a,n.concat(C.call(arguments)));return Object(o)===o?o:a}return e.apply(t,n.concat(C.call(arguments)))};return r}),T.flexbox=function(){return l("flexWrap")},T.flexboxlegacy=function(){return l("boxDirection")},T.canvas=function(){var t=e.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},T.canvastext=function(){return!(!d.canvas||!a(e.createElement("canvas").getContext("2d").fillText,"function"))},T.webgl=function(){return!!t.WebGLRenderingContext},T.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:$(["@media (",M.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},T.geolocation=function(){return"geolocation"in navigator},T.postmessage=function(){return!!t.postMessage},T.websqldatabase=function(){return!!t.openDatabase},T.indexedDB=function(){return!!l("indexedDB",t)},T.hashchange=function(){return N("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},T.history=function(){return!(!t.history||!history.pushState)},T.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},T.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},T.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),o(_.backgroundColor,"rgba")},T.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),o(_.backgroundColor,"rgba")||o(_.backgroundColor,"hsla")},T.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(_.background)},T.backgroundsize=function(){return l("backgroundSize")},T.borderimage=function(){return l("borderImage")},T.borderradius=function(){return l("borderRadius")},T.boxshadow=function(){return l("boxShadow")},T.textshadow=function(){return""===e.createElement("div").style.textShadow},T.opacity=function(){return i("opacity:.55"),/^0.55$/.test(_.opacity)},T.cssanimations=function(){return l("animationName")},T.csscolumns=function(){return l("columnCount")},T.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((t+"-webkit- ".split(" ").join(e+t)+M.join(n+t)).slice(0,-t.length)),o(_.backgroundImage,"gradient")},T.cssreflections=function(){return l("boxReflect")},T.csstransforms=function(){return!!l("transform")},T.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in m.style&&$("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},T.csstransitions=function(){return l("transition")},T.fontface=function(){var t;return $('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=e.getElementById("smodernizr"),a=i.sheet||i.styleSheet,o=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"";t=/src/i.test(o)&&0===o.indexOf(r.split(" ")[0])}),t},T.generatedcontent=function(){var t;return $(["#",v,"{font:0/0 a}#",v,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},T.video=function(){var t=e.createElement("video"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},T.audio=function(){var t=e.createElement("audio"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},T.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(t){return!1}},T.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(t){return!1}},T.webworkers=function(){return!!t.Worker},T.applicationcache=function(){return!!t.applicationCache},T.svg=function(){return!!e.createElementNS&&!!e.createElementNS(A.svg,"svg").createSVGRect},T.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==A.svg},T.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(x.call(e.createElementNS(A.svg,"animate")))},T.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(x.call(e.createElementNS(A.svg,"clipPath")))};for(var B in T)f(T,B)&&(h=B.toLowerCase(),d[h]=T[B](),P.push((d[h]?"":"no-")+h));return d.input||c(),d.addTest=function(t,e){if("object"==typeof t)for(var r in t)f(t,r)&&d.addTest(r,t[r]);else{if(t=t.toLowerCase(),d[t]!==n)return d;e="function"==typeof e?e():e,"undefined"!=typeof p&&p&&(m.className+=" "+(e?"":"no-")+t),d[t]=e}return d},r(""),y=b=null,function(t,e){function n(t,e){var n=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e=m[t[d]];return e||(e={},p++,t[d]=p,m[p]=e),e}function a(t,n,r){if(n||(n=e),c)return n.createElement(t);r||(r=i(n));var a;return a=r.cache[t]?r.cache[t].cloneNode():g.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t),a.canHaveChildren&&!f.test(t)?r.frag.appendChild(a):a}function o(t,n){if(t||(t=e),c)return t.createDocumentFragment();n=n||i(t);for(var a=n.frag.cloneNode(),o=0,s=r(),u=s.length;u>o;o++)a.createElement(s[o]);return a}function s(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?a(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function u(t){t||(t=e);var r=i(t);return!v.shivCSS||l||r.hasCSS||(r.hasCSS=!!n(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(t,r),t}var l,c,h=t.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,g=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d="_html5shiv",p=0,m={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",l="hidden"in t,c=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){l=!0,c=!0}}();var v={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:o};t.html5=v,u(e)}(this,e),d._version=g,d._prefixes=M,d._domPrefixes=S,d._cssomPrefixes=E,d.mq=I,d.hasEvent=N,d.testProp=function(t){return s([t])},d.testAllProps=l,d.testStyles=$,d.prefixed=function(t,e,n){return e?l(t,e,n):l(t,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+P.join(" "):""),d}(this,this.document);var initializing=!1,fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(t){function e(){!initializing&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;initializing=!0;var r=new this;initializing=!1;for(var i in t)r[i]="function"==typeof t[i]&&"function"==typeof n[i]&&fnTest.test(t[i])?function(t,e){return function(){var r=this._super;this._super=n[t];var i=e.apply(this,arguments);return this._super=r,i}}(i,t[i]):t[i];return e.prototype=r,e.prototype.constructor=e,e.extend=arguments.callee,e},function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.View.extend({initialize:function(){_.bindAll(this,"updateDisplay"),this.clock=this.options.clock,this.$value=this.$el.find(".clock-display__value"),this.$context=this.$el.find(".clock-display__context"),this.$day=this.$el.find(".clock-display__day"),$.subscribe(this.clock.channelId+".timeChange",this.updateDisplay)},updateDisplay:function(t,e){var n=this,r=moment(e);this.$value.html(r.format("hh:mm")),this.$context.html(r.format("a")),this.$day.html("");var i=r.calendar(),a=["Yesterday","Today"];_.each(a,function(t){i.substr(0,t.length)===t&&n.$day.html(", "+t)})}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],2:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.View.extend({initialize:function(){_.bindAll(this,"setMetricValue"),this.radialLine=this.options.radialLine,this.listenTo(this.model,"change:highlighted",this.toggleVisibility,this),this.listenTo(this.model,"change:selected",this.setCurrent,this),$.subscribe(this.radialLine.channelId+".dataPointFound",this.setMetricValue)},toggleVisibility:function(){var t=this.model.collection.models.filter(function(t){return t.get("highlighted")===!0}),e=t.length?this.model.get("highlighted"):!0;this.radialLine.toggle(e)},setMetricValue:function(){this.model.setValueAsAverage(this.radialLine.nearestNextPoint.dataValue.value,this.radialLine.nearestPrevPoint.dataValue.value)},setCurrent:function(){this.radialLine.toggleCurrent(this.model.get("selected"))}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],3:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.Model.extend({defaults:{selected:null,highlighted:null,metric:null,value:null},initialize:function(){},setValueAsAverage:function(t,e){this.set("value",(t+e)/2)}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],4:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.View.extend({initialize:function(){_.bindAll(this,"reposition","updateValue"),this.handle=this.options.handle,this.metric=this.options.metric,this.$valueContainer=this.$el.find(".value-container"),this.listenTo(this.model,"change:value",this.updateValue),$.subscribe(this.handle.channelId+".moved",this.reposition),this.$histogram=this.$el.closest(".histogram"),this.invertPoint=this.$histogram.width()/2},updateValue:function(){var t=2;("temperature"===this.metric.alias||"humidity"===this.metric.alias)&&(t=0),this.$valueContainer.html(this.model.get("value").toFixed(t))},reposition:function(t,e){{var n=e.x;e.y}n>this.invertPoint?this.$el.css("marginLeft",0-this.$el.width()-10).addClass("inverted"):this.$el.css("marginLeft","").removeClass("inverted"),this.$el.css({left:e.x,top:e.y})}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],5:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.View.extend({events:{click:"toggleSelection",mouseover:"toggleHighlight",mouseout:"toggleHighlight"},initialize:function(t){this.$valueContainer=this.$el.find(".value-container"),this.listenTo(this.model,"change:selected",this.changeCurrent,this),this.listenTo(this.model,"change:value",this.updateValue,this),this.dataLineView=t.dataLineView,this.group=this.options.group,this.$heroFeature=this.$el.closest(".hero-feature")},toggleHighlight:function(){var t=0===this.group.collection.filter(function(t){return t.get("selected")}).length;t&&this.__toggle("highlighted"),this.dataLineView.radialLine.radiusScale&&$.publish("current_radial_line",[this.dataLineView.radialLine]);var e=this.model.collection.models.filter(function(t){return t.get("highlighted")===!0});this.$heroFeature.toggleClass("item-highlighted",!!e.length)},toggleSelection:function(){this.__toggle("selected"),this.model.get("selected")&&this.__toggle("highlighted",!0)},__toggle:function(t,e){var n,r=this;if(n="undefined"!=typeof e?e:!this.model.get(t),this.model.set(t,n),this.model.get(t)){this.group.collection.each(function(e){e!==r.model&&e.set(t,!1)})}else this.group.collection.each(function(e){e.set(t,null)})},changeCurrent:function(){this.$el.toggleClass("current",this.model.get("selected"))},updateValue:function(){this.$valueContainer.html(this.model.get("value").toFixed(2))}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],6:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.View.extend({initialize:function(){this.listenTo(this.collection,"change:selected",this.toggleFilterMode,this)},toggleFilterMode:function(){var t=this.collection.models.filter(function(t){return t.get("selected")===!0}),e=this.$el.closest(".hero-feature");e.toggleClass("item-selected",!!t.length)}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],7:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Backbone.Collection.extend());e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],8:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./metric_display")),r=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments)},updateValue:function(){this.$valueContainer.html(this.model.get("value").toFixed(0))}});e.exports=r},{"./metric_display":5,__browserify_Buffer:35,__browserify_process:36}],9:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./metric_display")),r=t("../graph_components/util"),i=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.$convertedValueContainer=this.$el.find(".converted-value-container")},updateValue:function(){this.$valueContainer.html(this.model.get("value").toFixed(0)),this.$convertedValueContainer.html(r.toCelsius(this.model.get("value")).toFixed(1))}});e.exports=i},{"../graph_components/util":32,"./metric_display":5,__browserify_Buffer:35,__browserify_process:36}],10:[function(t,e,n){var r=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_components/wheel_graph_composite")),i=t("./graph_components/histograms_composite");AnimationFrame.shim();var a=Class.extend({defaults:{wheelGraphEndpointAlias:"24-hours",wheelGraph:!0,histograms:!0,apiConfig:null,metrics:null},init:function(t){var e,n;return this.config=_.extend({},this.defaults,t),Modernizr.svg&&this.config.apiConfig&&this.config.metrics&&this.config.metrics.length?(this.config.wheelGraph&&(e=new r({endpointAlias:this.config.wheelGraphEndpointAlias,metrics:this.config.metrics,apiConfig:this.config.apiConfig}),window.wheelGraph=e),this.config.histograms&&(n=new i({metrics:this.config.metrics,apiConfig:this.config.apiConfig}),window.histograms=n),void window.requestAnimationFrame(function a(){window.requestAnimationFrame(a),e&&e.eventCloak.isMouseOver&&e.eventCloak.trackMovement.call(e.eventCloak),n&&n.eventCloak.isMouseOver&&n.eventCloak.trackMovement.call(n.eventCloak),TWEEN.update()})):!1}});window.PowerDashboard=a,n=a},{"./graph_components/histograms_composite":25,"./graph_components/wheel_graph_composite":33,__browserify_Buffer:35,__browserify_process:36}],11:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{steps:10,horizontal:!1,width:null,height:null,rangeLabels:!1,$outer:null,scale:null,max:100,offset:{x:0,y:0},classes:{group:"background-axis-group",line:"background-axis-line",rangeLabel:"background-axis-range-label"}},init:function(t){this.config=_.extend({},this.defaults,t),this.dataLine=this.config.dataLine,this.clock=this.config.clock,this.scale=this.config.scale,this.base=this.config.base,this.steps=this.config.steps,this.$outer=this.config.$outer,this.$topRangeLabel=this.$outer.find("."+this.config.classes.rangeLabel+".top"),this.$bottomRangeLabel=this.$outer.find("."+this.config.classes.rangeLabel+".bottom"),this.axis=this.config.horizontal?"x":"y",this.otherAxis="x"==this.axis?"y":"x",this.group=this.base.svg.append("svg:g").classed(this.config.classes.group,!0),this.group.attr("transform","translate("+this.config.offset.x+","+this.config.offset.y+")"),this.__inheritFromBase(["width","height"])},setLines:function(t){t.scale&&(this.scale=t.scale),t.steps&&(this.steps=t.steps);var e=Math.abs(this.scale.range()[0]-this.scale.range()[1]),n=e/this.steps,r=1;for(this.linePoints=[],r=1;r<this.steps;r++)this.linePoints.push(_.min([this.scale.range()[0],this.scale.range()[1]])+n*r);this.draw(),this.drawRangeLabels()},draw:function(){var t=this;this.linePoints&&(this.group.selectAll("."+this.config.classes.line).remove(),this.group.selectAll("."+this.config.classes.line).data(this.linePoints).enter().append("svg:line").attr("class",this.config.classes.line).attr(this.otherAxis+"1",function(){return 0}).attr(this.axis+"1",function(t){return t}).attr(this.otherAxis+"2",function(){return t.config.max}).attr(this.axis+"2",function(t){return t}))},drawRangeLabels:function(){var t=this.dataLine.metric;if(this.linePoints&&this.config.rangeLabels){var e="y"==this.axis?"top":"left",n=2;("temperature"===t.alias||"humidity"===t.alias)&&(n=0),this.$topRangeLabel.css(e,this.scale.range()[1]).find(".value-container").html(this.scale.domain()[1].toFixed(n)),this.$bottomRangeLabel.css(e,this.scale.range()[0]).find(".value-container").html(this.scale.domain()[0].toFixed(n))}}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],12:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./util")),r=Class.extend({defaults:{timestamps:[],startAngle:360,endAngle:0,radial:!1,range:{unit:"hours",value:24}},init:function(t){this.config=_.extend({},this.defaults,t),this.disabled=!1,this.startTime=null,this.endTime=null,this.currentTime=null,this.currentAngle=null,this.channelId=_.uniqueId("channel_"),this.config.timestamps.length&&this.refresh(this.config.timestamps)},refresh:function(t,e,n,r){this.timestamps=t,e=e||t[0],n=n||null,r=r||null,this.setTimeRange(e,n,r)},setTimeScale:function(){if(!this.startTime||!this.endTime)return!1;var t=d3.time.scale();return t.domain([this.startTime.valueOf(),this.endTime.valueOf()]),this.startTime.valueOf()===this.endTime.valueOf()?(this.disabled=!0,!1):(this.disabled=!1,t.range([this.config.startAngle,this.config.endAngle]),this.timeScale=t,this.domain=t.domain(),this.range=t.range(),this.setReverseScale(),this)
},setReverseScale:function(){var t=d3.scale.linear();return t.domain(this.range),t.range(this.domain),this.reverseScale=t,this},getAngleFromTime:function(t,e){e=e||0;var n=this.timeScale(t);return n+e},setTimeRange:function(t,e,n){return e=e||this.config.range.value,n=n||this.config.range.unit,this.startTime=moment(t),this.endTime=this.startTime.clone().subtract(n,e),this.setTimeScale(),this},setCurrentTime:function(t){return this.currentTime=moment(t),this.currentAngle=this.getAngleFromTime(t),this.config.radial&&(this.currentAngle=n.normalizeAngle(this.currentAngle)),$.publish(this.channelId+".timeChange",[t]),this},setCurrentTimeFromAngle:function(t){if(this.disabled)return!1;if(this.reverseScale){var e=this.reverseScale(t);this.setCurrentTime(parseInt(e,null))}return this}});e.exports=r},{"./util":32,__browserify_Buffer:35,__browserify_process:36}],13:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./util")),n=t("./util"),r=Class.extend({defaults:{base:null,min:0,max:100,offset:0,inner_radius:0,lineDataKey:0,autoAttach:!0,clock:null,classes:{line:"wheel-graph__line",group:"wheel-graph__line-group"}},init:function(t){this.config=_.extend({},this.defaults,t),_.bindAll(this,"redraw","findClosestPoints"),this.channelId=_.uniqueId("channel_"),this.base=this.config.base,this.clock=this.config.clock,this.metric=this.config.metric,this.model=this.config.model,this.delaySegment=this.config.delaySegment,this.lineDataKey=this.config.lineDataKey||0,this.rangeData=null,$.subscribe(this.clock.channelId+".timeChange",this.findClosestPoints),"undefined"!=typeof this.config.points&&this.config.length&&this.setPoints(this.config.points)},drawPath:function(t){var e=d3.svg.line().x(function(t){return t[0]}).y(function(t){return t[1]}),n=e(t);return n},parseAngle:function(t){return t},setPathDict:function(){var t=[],e=this,n=!1;return _.each(this.pathPoints,function(r,i){var a=e.parseAngle(e.lineData[i][e.lineDataKey]);e.points[i].startDelay?n=!0:e.points[i].endDelay&&(n=!1),t.push({angle:a,normalisedAngle:e.__normalizeAngle(a),x:r[0],y:r[1],dataValue:e.points[i],delayed:n})}),t},setPoints:function(t){this.points=t,!this.svg&&this.config.autoAttach&&this.attach(),this.redraw()},__normalizeAngle:function(t){return t},redraw:function(t){var e=this;t=t||!1,t&&this.svg&&(this.group.remove(),this.svg.remove(),this.group=null,this.svg=null,this.attach()),this.radiusScale=this.__createRadiusScale(),this.lineData=this.setData();var r=this.drawPath(this.lineData);this.svg&&this.svg.attr("d",r),this.pathPoints=n.pathToPoints(r),this.pathDict=this.setPathDict(),_.each(window.lineTrails,function(t){t.dataLine===e&&t.draw()})},attach:function(){this.group=this.group||this.base.svg.append("svg:g").attr("transform","translate("+(this.base.config.cx+this.config.offset)+","+this.base.config.cy+")").classed(this.config.classes.group,!0),this.svg=this.svg||this.group.append("path").attr("class",this.config.classes.line+" "+this.config.alias),this.nextPointSVG=this.nextPointSVG||this.group.append("circle").attr("class","handle").attr("r",3).attr("fill","green"),this.prevPointSVG=this.prevPointSVG||this.group.append("circle").attr("class","handle").attr("r",3).attr("fill","red")},calculateDomain:function(){var t=[];if(this.rangeData){var e=d3.min(this.rangeData,function(t){var e=[t.value];return t.min!==!1&&e.push(t.min),t.max!==!1&&e.push(t.max),d3.min(e)}),n=d3.max(this.rangeData,function(t){var e=[t.value];return t.min!==!1&&e.push(t.min),t.max!==!1&&e.push(t.max),d3.max(e)});t=[e,n]}else t=d3.extent(this.points,function(t){return t.value});var r=Math.abs(t[0]-t[1]);if("undefined"!=typeof this.metric.minDomainDifference&&r<this.metric.minDomainDifference){var i=t[0]+r/2;t[0]=i-this.metric.minDomainDifference/2,t[1]=i+this.metric.minDomainDifference/2}return"undefined"!=typeof this.metric.domain&&(t[0]=_.min([t[0],this.metric.domain.min]),t[1]=_.max([t[1],this.metric.domain.max])),t},__createRadiusScale:function(){var t=d3.scale.linear();return t.domain(this.calculateDomain()),t.range([this.config.min,this.config.max]),t},setData:function(){var t=this;return _.map(this.points,function(e){var n=t.clock.getAngleFromTime(e.date),r=t.radiusScale(e.value);return[n,r]})},toggle:function(t){this.group&&this.group.classed("hidden",!t),this.delaySegment&&this.delaySegment.group.classed("hidden",!t)},toggleCurrent:function(t){this.current=t?!0:!1,this.current&&$.publish("current_radial_line",[this])},findClosestPoints:function(){var t,e,n=this.__normalizeAngle(this.clock.currentAngle);if(this.current&&$.publish("current_data_line",[this]),this.pathDict){var r=this.clock.config.radial,i=this.pathDict[this.pathDict.length-1].normalisedAngle;i===this.clock.config.startAngle&&r&&(i=this.clock.config.endAngle);var a=this.pathDict[this.pathDict.length-2].normalisedAngle,o=n===this.clock.config.startAngle||n===this.clock.config.endAngle,s=n<this.pathDict[0].normalisedAngle&&n>=this.pathDict[1].normalisedAngle,u=n>=i&&a>n;if(r&&i>n)return!1;if(r&&(o||s))t=this.pathDict[1],e=this.pathDict[0];else if(r&&u)e=this.pathDict[this.pathDict.length-2],t=this.pathDict[this.pathDict.length-1];else{var l=_.sortBy(this.pathDict,function(t){return Math.abs(t.normalisedAngle-n)});t=_.find(l,function(t){return t.normalisedAngle<=n}),e=_.find(l,function(t){return t.normalisedAngle>n})}t&&e&&(this.nextPointSVG.attr("cx",t.x).attr("cy",t.y),this.prevPointSVG.attr("cx",e.x).attr("cy",e.y),this.v1=$V([t.x,t.y,0]),this.v2=$V([e.x-t.x,e.y-t.y,0]),this.nearestPrevPoint=e,this.nearestNextPoint=t,$.publish(this.channelId+".dataPointFound",[{hide:this.nearestPrevPoint.delayed,model:this.model}]))}}});e.exports=r},{"./util":32,__browserify_Buffer:35,__browserify_process:36}],14:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Class.extend({init:function(t){var e=this;this.config=_.extend({},this.defaults,t),this.$el=this.config.$el,this.graphData=this.config.graphData,this.splitLabels=this.config.splitLabels,this.$ancs=this.$el.find("a[data-range]"),this.$ancs.click(function(t){var n=$(this);t.preventDefault(),e.$ancs.removeClass("current"),n.addClass("current"),e.graphData.filterByRange({alias:n.data("range"),steps:n.data("steps"),rangeUnit:n.data("unit"),rangeValue:n.data("range-value")}),e.splitLabels.draw({steps:n.data("steps"),suffix:n.data("suffix"),rangeValue:n.data("range-value")})}),this.$ancs.filter(".current").length&&this.$ancs.filter(".current").click()}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],15:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Class.extend({defaults:{format:"MMMM Do, YYYY",padding:15,border:2,minPos:0,maxPos:null,classes:{inner:"histogram-date-label__inner",value:"value-container",inverted:"inverted"}},init:function(t){var e=this;this.config=_.extend({},this.defaults,t),this.clock=this.config.clock,this.$el=this.config.$el,this.$inner=this.$el.find("."+this.config.classes.inner),this.$value=this.$el.find("."+this.config.classes.value),this.width=null,$.subscribe(this.clock.channelId+".timeChange",function(){var t=e.clock.currentAngle;e.invertPoint=e.$el.width()/2;var n=e.$inner.width();(n!==e.width||null===e.width)&&(e.width=n),t>e.invertPoint?e.$inner.css("marginLeft",0-n+e.config.border-e.config.padding).addClass(e.config.classes.inverted):e.$inner.css("marginLeft","").removeClass(e.config.classes.inverted);var r=_.max([t+e.config.border,e.config.minPos]);null!==e.config.maxPos&&(r=_.min([r,e.config.maxPos])),e.$inner.css("left",r),e.$value.html(e.clock.currentTime.format(e.config.format))})}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],16:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=t("./util"),i=n.extend({defaults:{cy:null,cx:null,clock:null,base:null,metric:null,donut:null,radial:!1,classes:{group:"delay-segment",arc:"delay-segment__arc"}},init:function(t){this._super(t),this.points=[],this.metric=this.config.metric,this.metricPoints=this.config.metricPoints,this.clock=this.config.clock,this.donut=this.config.donut,this.base=this.config.base,this.__inheritFromBase(["cx","cy"]),this.group=this.base.svg.append("svg:g").attr("class",this.config.classes.group)},buildPoints:function(){var t=[],e=0;this.metricPoints&&(_.each(this.metricPoints,function(n){n.startDelay===!0?t[e]={start:n.date}:n.endDelay===!0&&(t[e].end=n.date,e++)}),this.points=t)},draw:function(){var t,e=this;this.buildPoints(),this.config.radial?(t=d3.svg.arc().innerRadius(this.donut.config.inner_radius).outerRadius(this.donut.config.outer_radius).startAngle(function(t){return r.toRadians(e.clock.timeScale(t.start))}).endAngle(function(t){return r.toRadians(e.clock.timeScale(t.end))}),this.group.selectAll("."+this.config.classes.arc).remove(),this.group.selectAll("."+this.config.classes.arc).data(this.points).enter().append("path").attr("d",t).attr("transform","translate("+this.config.cx+","+this.config.cy+")").classed(this.config.classes.arc,!0)):(this.group.selectAll("."+this.config.classes.arc).remove(),this.group.selectAll("."+this.config.classes.arc).data(this.points).enter().append("svg:rect").attr("x",function(t){return e.clock.timeScale(t.end||e.clock.timeScale.domain()[1])}).attr("y",0).attr("width",function(t){return e.clock.timeScale(t.start||e.clock.timeScale.domain()[0])-e.clock.timeScale(t.end||e.clock.timeScale.domain()[1])}).attr("height",120).attr("transform","translate("+this.config.cx+","+this.config.cy+")").classed(this.config.classes.arc,!0))}});e.exports=i},{"./graph_component":20,"./util":32,__browserify_Buffer:35,__browserify_process:36}],17:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{base:null,width:null,height:null,cx:null,cy:null,classes:{donut:"wheel-graph__donut",hour_strokes_set:"wheel-graph__hour-stroke-set",hour_strokes:"wheel-graph__hour-stroke"},inner_radius:null,outer_radius:null,hours:24},init:function(t){this._super(t),this.base=this.config.base,this.__inheritFromBase(["width","height","cx","cy","inner_radius","outer_radius"]),this.draw()},draw:function(){var t,e;return t=d3.svg.arc().innerRadius(this.config.inner_radius).outerRadius(this.config.outer_radius).startAngle(0).endAngle(2*Math.PI),e=this.base.svg.append("svg:g").attr("class",this.config.classes.donut),e.append("path").attr("d",t).attr("transform","translate("+this.config.cx+","+this.config.cy+")"),this.drawStrokes(),e},drawStrokes:function(){for(var t=2*Math.PI,e=2*Math.PI/this.config.hours,n=this.base.svg.append("svg:g").attr("class",this.config.classes.hour_strokes_set),r=0;t>r;r+=e)n.append("svg:line").attr("x1",this.config.cx+Math.sin(r)*this.config.inner_radius).attr("y1",this.config.cy+Math.cos(r)*this.config.inner_radius).attr("x2",this.config.cx+Math.sin(r)*this.config.outer_radius).attr("y2",this.config.cy+Math.cos(r)*this.config.outer_radius).attr("class",this.config.classes.hour_strokes)}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],18:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./util")),r=Class.extend({defaults:{animate:!1,clock:null,width:null,height:null,cx:null,cy:null,angular:!0,offset:90,resetPoint:0,cloakOffset:0},init:function(t){this.channelId=_.uniqueId("_channel"),this.config=_.extend({},this.defaults,t),this.$el=this.config.$el,this.clock=this.config.clock,this.tweenComplete=!1,this.isMouseOver=!1,this.mouseX=null,this.mouseY=null,this.attach()},attach:function(){_.bindAll(this,"onMouseOver","onMouseOut","onMouseMove"),this.$el.on("mouseover",this.onMouseOver),this.$el.on("mouseout",this.onMouseOut),this.$el.on("mousemove",this.onMouseMove)},onMouseOver:function(t){t.stopPropagation();this.isMouseOver=!0;var e=this.config.angular?n.normalizeAngle(this.clock.currentAngle):this.clock.currentAngle;this.__createTween(this.config.resetPoint,e)},onMouseOut:function(t){t.stopPropagation(),this.isMouseOver=!1;var e=this.config.angular?n.normalizeAngle(this.clock.currentAngle):this.clock.currentAngle;this.__createTween(e,this.config.resetPoint)},onMouseMove:function(t){if(t.stopPropagation(),t.originalEvent){var e=t.originalEvent.hasOwnProperty("offsetX");this.mouseX=e?t.originalEvent.offsetX:t.originalEvent.layerX,this.mouseY=e?t.originalEvent.offsetY:t.originalEvent.layerY}},trackMovement:function(t){var e;this.config.angular?(e=n.getAngleFromOrigin([this.mouseX,this.mouseY],[this.config.cx,this.config.cy])+this.config.offset,e=n.normalizeAngle(e)):e=this.mouseX+this.config.offset,this.config.cloakOffset&&(e-=this.config.cloakOffset,e=_.max([e,0]));if(t="undefined"!=typeof t?t:e,this.clock.setCurrentTimeFromAngle(t),this.tween&&!this.tweenComplete){var r=this.config.angular?n.normalizeAngle(this.clock.currentAngle):this.clock.currentAngle;this.tween.to({angle:r})}$.publish(this.channelId+".movementTracked")},__createTween:function(t,e){var n=this;this.tween&&tween.stop(),TWEEN.removeAll(),this.tween=tween=new TWEEN.Tween({angle:t}),this.tweenComplete=!1,tween.to({angle:e}).easing(TWEEN.Easing.Quartic.Out).onUpdate(function(){n.clock.setCurrentTimeFromAngle(this.angle)}).onComplete(function(){n.tweenComplete=!0}).start()}});e.exports=r},{"./util":32,__browserify_Buffer:35,__browserify_process:36}],19:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Class.extend({defaults:{inner_radius:70,outer_radius:null},init:function(t){this.config=_.extend({},this.defaults,t),this.svg=null,this.$el=this.config.$el,this.config.cx=this.config.width/2,this.config.cy=this.config.height/2,null===this.config.outer_radius&&(this.config.outer_radius=this.config.cx),this.draw()},draw:function(){this.svg=d3.select(this.$el[0]).append("svg:svg").attr("width",this.config.width).attr("height",this.config.height)}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],20:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Class.extend({defaults:{base:null},init:function(t){this.config=_.extend({},this.defaults,t),this.base=this.config.base,this.svgGroup=null,this.svg=null},__inheritFromBase:function(t){var e=this;"string"==typeof t&&(t=[t]),_.each(t,function(t){e.config[t]=null===e.config[t]?e.base.config[t]:e.config[t]})}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],21:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),Class.extend({defaults:{data:[],onReset:null,onError:function(){},reverseOrder:!1,apiHost:null,endpointAlias:null,apiConfig:null,isWheel:!1,throttle:0,minDifference:1500},init:function(t){this.config=_.extend({},this.defaults,t),this.data=this.config.data,this.steps=null,this.endpointAlias=this.config.endpointAlias,this.config.apiConfig&&null!==this.endpointAlias&&this.reset()},filterByRange:function(t){this.endpointAlias=t.alias,this.steps=t.steps,this.rangeUnit=t.rangeUnit,this.rangeValue=t.rangeValue,this.reset()},reset:function(){var t=this;this.loading=!0;var e="";this.config.apiConfig.host&&(e+=this.config.apiConfig.host),this.config.apiConfig.uriPrefix&&(e+="/"+this.config.apiConfig.uriPrefix),e+="/"+this.endpointAlias+".json",$.ajax({url:e,dataType:"json",cache:!1,success:function(e){t.loading=!1;var n,r,i,a=[],o=0,s={};for(o in e){if(o=parseInt(o,null),o&&t.config.isWheel)for(n=moment(e[o].timestamp),r=moment(e[o-1].timestamp),i=n.diff(r,"minutes");i>5;){s={};for(var u in e[o-1])s[u]=null;r=r.add("minutes",5),i=n.diff(r,"minutes"),s.timestamp=r.valueOf(),a.push(s)}t.config.throttle&&o%t.config.throttle!==0&&0!==o&&null!==o&&o+1!==e.length||a.push(e[o])}a.length&&!_.isEqual(a,t.data)?(t.config.reverseOrder&&a[0].timestamp<a[a.length-1].timestamp&&a.reverse(),t.data=a,"function"==typeof t.config.onReset&&t.config.onReset.call(t)):"function"==typeof t.config.onError&&t.config.onError.call(t)},error:function(){"function"==typeof t.config.onError&&t.config.onError.call(t)}})},formatAsMetric:function(t,e){var n=[];return e=e||"",_.each(this.data,function(r){var i={},a="undefined"!=typeof r[e+t]?r[e+t]:!1;i={value:a,date:r.timestamp},e&&(i.key=e),n.push(i)}),this._setDelayBoundariesForMetric(n,t),n},_setDelayBoundariesForMetric:function(t){var e,n,r,i,a=this,o=!1;_.each(t,function(s,u){var l=null!==s.value&&o===!0,c=null===s.value&&o===!1,h=(moment(),1e3*a.config.minDifference);if(c&&(i=u,r=t[u-1]?t[u-1].value:0),l){for(var f=u-1;f>=i;f--)if(t[f].value=r,t[f].startDelay){n=t[f],e=Math.abs(s.date-n.date);break}h>e&&(n.startDelay=!1,l=!1,o=!1)}s.startDelay=c,s.endDelay=l,c?o=!0:l&&(o=!1)})}}));e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],22:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{lineFn:null,dataFn:null,height:100,offset:0,minPos:-1,maxPos:null,autoAttach:!0,position:-90,clock:null,cx:null,cy:null,classes:{line:"guideline"}},init:function(t){this._super(t),_.bindAll(this,"goToCurrentPosition"),this.clock=this.config.clock,this.__inheritFromBase(["cx","cy","inner_radius","outer_radius"]),this.config.autoAttach&&this.attach(),this.__setPathFromPosition(this.config.position),this.currentPosition=this.config.position,this.render(),$.subscribe(this.clock.channelId+".timeChange",this.goToCurrentPosition)},goToCurrentPosition:function(){this.goToPosition(this.clock.currentAngle)},goToPosition:function(t){this.__setPathFromPosition(t),this.currentPosition=t,this.v1=$V([this.guidePoints[0][0],this.guidePoints[0][1],0]),this.v2=$V([this.guidePoints[1][0]-this.guidePoints[0][0],this.guidePoints[1][1]-this.guidePoints[0][1],0]),this.render()},__setPathFromPosition:function(t){var e=_.max([t,this.config.minPos]);null!==this.config.maxPos&&(e=_.min([e,this.config.maxPos])),this.guidePoints=[[e,0],[e,this.config.height]]},attach:function(){this.svgGroup=this.base.svg.append("svg:g").attr("transform","translate("+(this.config.cx+this.config.offset)+","+this.config.cy+")"),this.svg=this.svgGroup.append("svg:line").attr("class",this.config.classes.line)},render:function(){this.svg&&this.svg.attr("x1",this.guidePoints[0][0]).attr("y1",this.guidePoints[0][1]).attr("x2",this.guidePoints[1][0]).attr("y2",this.guidePoints[1][1])}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],23:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{cx:null,cy:null},init:function(t){this._super(t),this.channelId=_.uniqueId("channel_"),this.radialLine=this.config.radialLine,this.guideline=this.config.guideline,this.alias=this.config.alias,this.model=this.config.model,this.__inheritFromBase(["cx","cy"]),this.isAttached=!1,this.attach(),_.bindAll(this,"draw"),$.subscribe(this.radialLine.channelId+".dataPointFound",this.draw)},attach:function(){if(!this.radialLine.pathPoints)return!1;this.svg=this.base.svg.append("circle").attr("class","wheel-graph__handle").attr("r",5).attr("transform","translate("+this.config.cx+","+this.config.cy+")").classed(this.alias,!0);var t=this.radialLine.pathPoints[1];this.svg.attr("cx",t[0]).attr("cy",t[1]),this.isAttached=!0},draw:function(t,e){this.isAttached||this.attach();var n=$L(this.radialLine.v1,this.radialLine.v2),r=$L(this.guideline.v1,this.guideline.v2),i=n.intersectionWith(r);if(this.svg.attr("cx",i.elements[0]).attr("cy",i.elements[1]),e.model){var a=e.model.collection.models.filter(function(t){return t.get("selected")===!0});!e.model.get("selected")&&a.length&&(e.hide=!0)}this.svg.classed("hidden",e.hide||!1),$.publish(this.channelId+".moved",[{x:i.elements[0],y:i.elements[1]}])},reattach:function(){this.isAttached&&(this.isAttached=!1,this.svg.remove(),this.attach())}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],24:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./guideline")),r=t("./data_line"),i=t("./background_axis"),a=t("./range_line"),o=t("./delay_segment"),s=t("./handle"),u=t("../backbone_components/grouped_metric"),l=t("../backbone_components/data_line_view"),c=t("../backbone_components/histogram_metric_display"),h=Class.extend({defaults:{},init:function(t){var e=this;this.config=_.extend({},this.defaults,t),this.metric=this.config.metric,this.collection=this.config.collection,this.clock=this.config.clock,this.graphData=this.config.graphData,this.eventCloak=this.config.eventCloak,this.$el=$('.histogram__inner[data-metric="'+this.metric.alias+'"]'),this.$outer=this.$el.closest(".histogram"),this.data=[],this.rangeData=[],this.metricPoints=[],this.svg=d3.select(this.$el[0]).append("svg:svg").attr("width",this.$el.width()).attr("height",this.$el.height());var h=16;this.base={svg:this.svg.append("svg:g").attr("width",this.$el.width()-h).attr("transform","translate("+h+",0)"),config:{cx:0,cy:0}},this.model=new u,this.collection.add(this.model),this.guideline=new n({base:this.base,height:this.$el.height(),clock:this.clock,maxPos:this.clock.config.startAngle-2,autoAttach:!1,classes:{line:"histogram__guideline"}}),this.dataLine=new r({clock:this.clock,max:0,min:this.$el.height(),base:this.base,alias:this.metric.alias,metric:this.metric,points:this.metricPoints,offset:0,classes:{line:"histogram__data-line",group:"histogram__data-line-group"},autoAttach:!1}),this.backgroundAxisY=new i({base:this.base,dataLine:this.dataLine,clock:this.clock,rangeLabels:!0,max:this.clock.config.startAngle,$outer:this.$outer,offset:{x:0,y:0}}),this.backgroundAxisX=new i({base:this.base,dataLine:this.dataLine,clock:this.clock,$outer:this.$outer,horizontal:!0,steps:3,max:this.$el.height()}),this.rangeLine=new a({dataLine:this.dataLine,base:this.base,max:0,min:this.$el.height(),alias:this.metric.alias,autoAttach:!0,clock:this.clock,metric:this.metric}),this.dataLine.attach(),this.delaySegment=new o({base:this.base,clock:this.clock,metric:this.metric,metricPoints:this.metricPoints}),this.guideline.attach(),this.handle=new s({base:this.base,radialLine:this.dataLine,alias:this.metric.alias,guideline:this.guideline}),this.lineView=new l({radialLine:this.dataLine,model:this.model}),this.metricDisplay=new c({el:this.$outer.find(".histogram__value-label")[0],handle:this.handle,model:this.model,metric:this.metric});var f=this.$outer.find(".histogram__title");$.subscribe(this.clock.channelId+".timeChange",function(){var t=e.clock.currentAngle,n=(_.max([t+2,0]),e.clock.currentAngle/e.clock.config.startAngle<.35);f.toggleClass("dim",n)});var g=function(){if(!e.dataLine.radiusScale)return!1;var t=e.dataLine.radiusScale.range(),n=e.dataLine.radiusScale.domain(),r=d3.scale.linear();return r.domain(t).range(n),r};this.mouseLabel={},this.mouseLabel.$cloak=$('.event-cloak__listing[data-metric="'+this.config.metric.alias+'"]'),this.mouseLabel.maxX=this.mouseLabel.$cloak.width(),this.mouseLabel.maxY=this.mouseLabel.$cloak.height()-2,this.mouseLabel.minX=this.mouseLabel.$cloak.data("left"),this.mouseLabel.minY=this.mouseLabel.$cloak.data("top"),this.mouseLabel.$el=this.$outer.find(".histogram__mouse-label"),this.mouseLabel.$value=this.mouseLabel.$el.find(".value-container"),this.mouseLabel.$histogram=$('.histogram__inner[data-metric="'+this.config.metric.alias+'"]').closest(".histogram"),$.subscribe(this.eventCloak.channelId+".movementTracked",function(){if(e.mouseLabel.scale||(e.mouseLabel.scale=g()),!e.mouseLabel.scale)return!1;if("undefined"!=typeof e.mouseLabel.mouseY){e.mouseLabel.$el.css({top:e.mouseLabel.mouseY||0,left:e.mouseLabel.mouseX||0});var t=2;("temperature"===e.metric.alias||"humidity"===e.metric.alias)&&(t=0),e.mouseLabel.$value.html(e.mouseLabel.scale(e.mouseLabel.mouseY).toFixed(t))}}),this.eventCloak.$el.mousemove(function(t){var n=t.pageX-$(this).offset().left,r=t.pageY-$(this).offset().top;e.mouseLabel.$histogram.hasClass("hover")&&(e.mouseLabel.mouseX=n-e.mouseLabel.minX,e.mouseLabel.mouseY=r-e.mouseLabel.minY,e.mouseLabel.mouseX=_.max([0,e.mouseLabel.mouseX]),e.mouseLabel.mouseX=_.min([e.mouseLabel.maxX,e.mouseLabel.mouseX]),e.mouseLabel.mouseY=_.max([0,e.mouseLabel.mouseY]),e.mouseLabel.mouseY=_.min([e.mouseLabel.maxY,e.mouseLabel.mouseY]))}),$.subscribe(this.dataLine.channelId+".dataPointFound",function(t,n){e.mouseLabel.$el.toggleClass("hidden",n.hide),$(e.metricDisplay.el).toggleClass("hidden",n.hide)})},refreshData:function(){this.data=this.graphData.formatAsMetric(this.metric.alias);var t=this.graphData.formatAsMetric(this.metric.alias,"min_"),e=this.graphData.formatAsMetric(this.metric.alias,"max_");this.rangeData=t.concat(e),this.metricPoints=this.data,this.delaySegment.metricPoints=this.metricPoints,this.dataLine.points=this.metricPoints;var n=this;this.dataLine.rangeData=[],_.each(this.data,function(r,i){n.dataLine.rangeData.push({min:t[i].value,max:e[i].value,value:r.value})})},draw:function(){this.refreshData(),this.dataLine.setPoints(this.data),this.rangeLine.setPoints(this.rangeData),this.backgroundAxisY.setLines({scale:this.dataLine.radiusScale}),this.backgroundAxisX.setLines({scale:this.clock.timeScale,steps:this.graphData.steps}),this.delaySegment.draw()}});e.exports=h},{"../backbone_components/data_line_view":2,"../backbone_components/grouped_metric":3,"../backbone_components/histogram_metric_display":4,"./background_axis":11,"./data_line":13,"./delay_segment":16,"./guideline":22,"./handle":23,"./range_line":30,__browserify_Buffer:35,__browserify_process:36}],25:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_data")),r=t("./clock"),i=t("./split_labels"),a=t("./date_filter_nav"),o=t("./date_label"),s=t("./event_cloak"),u=t("./histogram_metric"),l=t("../backbone_components/metric_group"),c=Class.extend({defaults:{endpointAlias:null,metrics:null,apiConfig:null},init:function(t){var e=this;this.config=_.extend({},this.defaults,t),this.metrics=this.config.metrics,_.bindAll(this,"draw"),this.$el=$(".histogram-group"),this.graphData=new n({endpointAlias:this.config.endpointAlias,onReset:this.draw,reverseOrder:!0,apiConfig:this.config.apiConfig}),this.histogramMetrics=[],this.metricGroup=new l,this.clock=new r({endAngle:0,startAngle:this.$el.width()}),this.splitLabels=new i({$el:$(".histogram-split-labels"),width:this.clock.config.startAngle});new a({$el:$('[data-behavior="filter_data_range"]'),graphData:this.graphData,splitLabels:this.splitLabels});this.$dateLabel=new o({clock:this.clock,$el:$(".histogram-date-label"),maxPos:this.clock.config.startAngle});var c=$('<div class="histogram-group__event-cloak" />').prependTo(this.$el);$.each(this.metrics,function(t,e){c.append('<div class="event-cloak__listing" data-metric="'+e.alias+'"></div>')}),this.eventCloak=new s({animate:!0,clock:this.clock,$el:c,width:c.width(),height:c.height(),cx:0,cy:0,offset:0,angular:!1,resetPoint:this.clock.config.endAngle,cloakOffset:18});var h=c.find(".event-cloak__listing");h.each(function(){var t=$(this);t.data("top",t.position().top),t.data("left",t.position().left),t.data("right",t.position().left+t.outerWidth()),t.data("bottom",t.position().top+t.outerHeight()),t.data("histogram",$('.histogram[data-metric="'+t.data("metric")+'"]'))}),h.hide(),c.mousemove(function(t){var e=t.pageX-c.offset().left,n=t.pageY-c.offset().top;h.each(function(){var t=$(this),r=e>=t.data("left")&&e<=t.data("right"),i=n>=t.data("top")&&n<=t.data("bottom");r&&i?t.data("histogram").addClass("hover"):t.data("histogram").removeClass("hover")})}),c.mouseout(function(){h.each(function(){$(this).data("histogram").removeClass("hover")})}),_.each(this.metrics,function(t){e.histogramMetrics.push(new u({collection:e.metricGroup,clock:e.clock,metric:t,graphData:e.graphData,eventCloak:e.eventCloak}))})},draw:function(){var t=_.map(this.graphData.data,function(t){return t.timestamp});this.clock.refresh(t,null,this.graphData.rangeValue,this.graphData.rangeUnit),_.each(this.histogramMetrics,function(t){t.draw()}),this.clock.setCurrentTimeFromAngle(0)}});e.exports=c},{"../backbone_components/metric_group":7,"./clock":12,"./date_filter_nav":14,"./date_label":15,"./event_cloak":18,"./graph_data":21,"./histogram_metric":24,"./split_labels":31,__browserify_Buffer:35,__browserify_process:36}],26:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./util")),r=Class.extend({defaults:{$el:null,width:26,height:26,inner_radius:6,outer_radius:13,graphData:null,cy:null,cx:null,intervalMs:6e4,timerMs:1e3,classes:{svg:"interval-icon__svg",arc:"interval-icon__arc"}},init:function(t){var e=this;this.config=_.extend({},this.defaults,t),_.bindAll(this,"updateArc"),null===this.config.cx&&(this.config.cx=this.config.width/2),null===this.config.cy&&(this.config.cy=this.config.height/2),this.$el=this.config.$el,this.currentTimer=0,this.graphData=this.config.graphData,this.svg=d3.select(this.$el[0]).append("svg:svg"),this.svg.classed(this.config.classes.svg,!0),this.svg.attr("width",this.config.width).attr("height",this.config.height),this.arc=d3.svg.arc().innerRadius(this.config.inner_radius).outerRadius(this.config.outer_radius).startAngle(0).endAngle(function(t){return t.value}),this.data=function(){for(var t,r=[],i=0;i<e.config.intervalMs/e.config.timerMs;i++)t=e.config.timerMs/e.config.intervalMs*360*i,r.push({value:n.toRadians(t)});return r}(),this.svg.append("path").data(this.data).attr("d",this.arc).attr("transform","translate("+this.config.cx+","+this.config.cy+")").classed(this.config.classes.arc,!0),this.interval=null,this.$timer=$("#countdown-timer"),this.$standardMsg=$("#standard-msg"),this.$processingMsg=$("#processing-msg")},displayError:function(){var t=this;this.$processingMsg.show(),this.$standardMsg.hide(),this.$timer.html(t.config.intervalMs/1e3+" seconds"),this.updateArc(),setTimeout(function(){t.$processingMsg.hide(),t.$standardMsg.show(),t.setTimer()},3e3)},updateArc:function(){this.svg.selectAll("."+this.config.classes.arc).attr("d",this.arc(this.data[this.currentTimer]))},setTimer:function(){!function(t){t.interval&&window.clearInterval(t.interval),t.interval=setInterval(function(){t.updateArc();var e=t.config.intervalMs-t.currentTimer*t.config.timerMs;t.$timer.html(e/1e3+" seconds"),t.currentTimer+1===t.config.intervalMs/t.config.timerMs?(t.currentTimer=0,t.$timer.html(e/1e3+" seconds"),$.publish(t.channelId+".timerReset"),clearInterval(t.interval)):t.currentTimer++},t.config.timerMs)}(this)}});e.exports=r},{"./util":32,__browserify_Buffer:35,__browserify_process:36}],27:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{dataLine:null,maxStrokeWidth:2,minStrokeWidth:.2,classes:{line:"line-trail"}},init:function(t){_.bindAll(this,"draw"),this._super(t),this.dataLine=this.config.dataLine},draw:function(){var t=this;this.strokeScale=this.__createScale();var e=_.clone(this.dataLine.pathDict);e.pop();var n=!1;this.dataLine.group.selectAll("."+this.config.classes.line).remove(),this.dataLine.group.selectAll("."+this.config.classes.line).data(e).enter().append("svg:line").attr("class",this.config.classes.line+" "+this.dataLine.config.alias).attr("stroke-width",function(e){return t.strokeScale(e.dataValue.date)}).attr("x1",function(t){return t.x}).attr("y1",function(t){return t.y}).attr("x2",function(e,n){return t.dataLine.pathDict[n+1]?t.dataLine.pathDict[n+1].x:0}).attr("y2",function(e,n){return t.dataLine.pathDict[n+1]?t.dataLine.pathDict[n+1].y:0}).classed("hidden",function(e,r){return t.dataLine.pathDict[r].dataValue.startDelay?n=!0:t.dataLine.pathDict[r].dataValue.endDelay&&(n=!1),n})},__createScale:function(){var t=d3.scale.linear();return t.domain(this.dataLine.clock.domain),t.range([this.config.maxStrokeWidth,this.config.minStrokeWidth]),t}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],28:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=t("./util"),i=n.extend({defaults:{position:-90,clock:null,cx:null,cy:null,classes:{line:"guideline"}},init:function(t){this._super(t),_.bindAll(this,"goToCurrentPosition"),this.clock=this.config.clock,this.lineFn=d3.svg.line.radial(),this.__inheritFromBase(["cx","cy","inner_radius","outer_radius"]),this.attach(),this.__setPathFromPosition(this.config.position),this.currentPosition=this.config.position,this.render(),$.subscribe(this.clock.channelId+".timeChange",this.goToCurrentPosition)
},goToCurrentPosition:function(){this.goToPosition(this.clock.currentAngle)},goToPosition:function(t){this.__setPathFromPosition(t),this.currentPosition=t,this.v1=$V([this.guidePoints[0][0],this.guidePoints[0][1],0]),this.v2=$V([this.guidePoints[1][0]-this.guidePoints[0][0],this.guidePoints[1][1]-this.guidePoints[0][1],0]),this.render()},__setPathFromPosition:function(t){this.pathData=this.lineFn(this.getDataFromPosition(t)),this.guidePoints=r.pathToPoints(this.pathData)},attach:function(){this.svgGroup=this.base.svg.append("svg:g").attr("transform","translate("+this.config.cx+","+this.config.cy+")"),this.svg=this.svgGroup.append("path").attr("class",this.config.classes.line)},render:function(){this.svg.attr("d",this.pathData)},getDataFromPosition:function(t){var e=r.toRadians(t),n=[this.base.config.inner_radius,e],i=[this.base.config.outer_radius,e];return[n,i]}});e.exports=i},{"./graph_component":20,"./util":32,__browserify_Buffer:35,__browserify_process:36}],29:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./data_line")),r=t("./util"),i=n.extend({init:function(t){this._super(t)},drawPath:function(t){var e=d3.svg.line.radial(),n=e(t);return n},setData:function(){var t=this;return _.map(this.points,function(e){var n=t.clock.getAngleFromTime(e.date,0),i=t.radiusScale(e.value);return[i,r.toRadians(n)]})},__normalizeAngle:function(t){return r.normalizeAngle(t)},parseAngle:function(t){return r.toDegrees(t)}});e.exports=i},{"./data_line":13,"./util":32,__browserify_Buffer:35,__browserify_process:36}],30:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{dataLine:null,clock:null,min:0,max:100,offset:0,autoAttach:!0,classes:{line:"histogram__range-line",group:"histogram__range-line-group"}},init:function(t){var e=this;_.bindAll(this,"draw"),this._super(t),this.dataLine=this.config.dataLine,this.clock=this.config.clock,this.metric=this.config.metric,this.nest=d3.nest().key(function(t){return t.key}),this.stack=d3.layout.stack().offset("zero").values(function(t){return t.values}).x(function(t){return t.date}).y(function(t){return t.value}),this.area=d3.svg.area().x(function(t){return e.clock.getAngleFromTime(t.date)}).y0(function(t){return e.radiusScale(t.y0)}).y1(function(t){return e.radiusScale(t.y)}),this.config.autoAttach&&this.attach()},attach:function(){this.group=this.group||this.base.svg.append("svg:g").attr("transform","translate("+(this.base.config.cx+this.config.offset)+","+this.base.config.cy+")").classed(this.config.classes.group,!0)},draw:function(){var t=this;return this.points?(this.radiusScale=this.__createRadiusScale(),this.group.selectAll("."+t.config.classes.line).remove(),void this.group.selectAll("."+t.config.classes.line).data(this.points).enter().append("path").attr("d",function(e){return t.area(e.values)}).attr("class",this.config.classes.line+" "+this.config.alias)):!1},setPoints:function(t){t=t||[],t.length&&(this.data=t,this.points=this.stack(this.nest.entries(this.data))),this.attach(),this.draw()},__createRadiusScale:function(){var t=d3.scale.linear(),e=this.dataLine.radiusScale.domain();return t.domain(e),t.range([this.config.min,this.config.max]),t}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],31:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_component")),r=n.extend({defaults:{$el:null,steps:7,width:null,suffix:" days ago",classes:{label:"histogram-split-labels__label"}},init:function(t){this.config=_.extend({},this.defaults,t),this.steps=this.config.steps,this.suffix=this.config.suffix,this.$el=this.config.$el},draw:function(t){this.$el.empty(),this.steps="undefined"!=typeof t.steps?t.steps:this.config.steps,this.suffix="undefined"!=typeof t.suffix?t.suffix:this.config.suffix,this.rangeValue="undefined"!=typeof t.rangeValue?t.rangeValue:null;var e,n,r=this.config.width/this.steps;for(e=0;e<this.steps;e++)n=$("<div />",{"class":this.config.classes.label}),n.css("left",r*e),this.rangeValue&&n.html(this.rangeValue-this.rangeValue/this.steps*e),this.$el.append(n)}});e.exports=r},{"./graph_component":20,__browserify_Buffer:35,__browserify_process:36}],32:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),{pathToPoints:function(t){for(var e=t.split(/z|Z/),n=0;n<e.length;n++){t=e[n].split(/l|L/),t[0]=t[0].replace(/m|M/,"");for(var r in t){t[r]=t[r].split(",");for(var i in t[r])t[r][i]=parseFloat(t[r][i])}}return t},toDegrees:function(t){return 180*t/Math.PI},toRadians:function(t){return t*Math.PI/180},toCelsius:function(t){return 5*(t-32)/9},getAngleFromOrigin:function(t,e){var r=Math.atan2(t[1]-e[1],t[0]-e[0]);return n.toDegrees(r)},normalizeAngle:function(t,e){return e=e||360,t%=e,0>=t&&(t+=e),t}});e.exports=n},{__browserify_Buffer:35,__browserify_process:36}],33:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./graph_data")),r=t("./clock"),i=t("./graph_base"),a=t("./radial_guideline"),o=t("./wheel_graph_metric"),s=t("./interval_icon"),u=t("./event_cloak"),l=t("./donut"),c=t("./util"),h=t("../backbone_components/metric_group"),f=t("../backbone_components/metric_display_group"),g=t("../backbone_components/clock_display"),d=Class.extend({defaults:{endpointAlias:null,metrics:null,apiConfig:null},init:function(t){var e=this;this.config=_.extend({},this.defaults,t),this.metrics=this.config.metrics,this.wheelGraphMetrics=[],_.bindAll(this,"draw"),this.graphData=new n({endpointAlias:this.config.endpointAlias,onReset:this.draw,reverseOrder:!0,isWheel:!0,apiConfig:this.config.apiConfig,onError:function(){e.intervalIcon.displayError()}});var d=_.map(this.graphData.data,function(t){return t.timestamp});this.clock=new r({timestamps:d,radial:!0}),this.metricGroup=new h,this.metricDisplayGroup=new f({el:$(".metric-display-group"),collection:this.metricGroup}),this.$wheelGraph=$(".wheel-graph"),this.wheelGraphBase=new i({width:this.$wheelGraph.width(),height:this.$wheelGraph.height(),$el:this.$wheelGraph}),this.donut=new l({base:this.wheelGraphBase}),this.guideline=new a({base:this.wheelGraphBase,clock:this.clock,classes:{line:"wheel-graph__guideline"}}),this.clockDisplay=new g({el:$(".clock-display")[0],clock:this.clock}),window.lineTrails=[],_.each(this.metrics,function(t){e.wheelGraphMetrics.push(new o({metric:t,base:e.wheelGraphBase,clock:e.clock,collection:e.metricGroup,displayGroup:e.metricDisplayGroup,guideline:e.guideline,graphData:e.graphData,donut:e.donut}))}),function(){var t=e.wheelGraphBase.svg.append("circle").attr("class","wheel-graph__handle").attr("r",5);$.subscribe(e.clock.channelId+".timeChange",function(){var n=c.normalizeAngle(e.clock.currentAngle)-90,r=69,i=r*Math.cos(c.toRadians(n))+e.wheelGraphBase.config.cx,a=r*Math.sin(c.toRadians(n))+e.wheelGraphBase.config.cy;t.attr("cx",i).attr("cy",a).classed("center-handle",!0)})}(),this.eventCloak=new u({animate:!1,clock:this.clock,$el:$(".wheel-graph-event-cloak"),width:this.wheelGraphBase.config.width,height:this.wheelGraphBase.config.height,cx:this.wheelGraphBase.config.cx,cy:this.wheelGraphBase.config.cy,resetPoint:this.clock.config.startAngle}),this.intervalIcon=new s({$el:$(".interval-icon"),graphData:this.graphData}),$.subscribe(this.intervalIcon.channelId+".timerReset",function(){e.graphData.reset()}),this.$innerNote=$("<div />",{"class":"wheel-graph__note inner"}),this.$innerNote.appendTo(this.wheelGraphBase.$el),this.$outerNote=$("<div />",{"class":"wheel-graph__note outer"}),this.$outerNote.appendTo(this.wheelGraphBase.$el),this.$mouseNote=$("<div />",{"class":"wheel-graph__note mouse"}),this.$mouseNote.appendTo(this.wheelGraphBase.$el),this.$mouseNote.html(""),$.subscribe("current_radial_line",function(t,n){if(n.radiusScale){var r=2,i="";("temperature"===n.metric.alias||"humidity"===n.metric.alias)&&(r=0),"temperature"===n.metric.alias&&(i="°"),"humidity"===n.metric.alias&&(i="%"),e.$innerNote.html(n.radiusScale.domain()[0].toFixed(r)+i),e.$outerNote.html(n.radiusScale.domain()[1].toFixed(r)+i)}})},draw:function(){this.intervalIcon.setTimer();var t=_.map(this.graphData.data,function(t){return t.timestamp});this.clock.refresh(t),_.each(this.wheelGraphMetrics,function(t){t.draw()}),_.each(this.wheelGraphMetrics,function(t){t.handle.reattach()}),this.clock.setCurrentTimeFromAngle(360)}});e.exports=d},{"../backbone_components/clock_display":1,"../backbone_components/metric_display_group":6,"../backbone_components/metric_group":7,"./clock":12,"./donut":17,"./event_cloak":18,"./graph_base":19,"./graph_data":21,"./interval_icon":26,"./radial_guideline":28,"./util":32,"./wheel_graph_metric":34,__browserify_Buffer:35,__browserify_process:36}],34:[function(t,e){var n=(t("__browserify_process"),t("__browserify_Buffer"),t("./radial_line")),r=t("./delay_segment"),i=t("./line_trail"),a=t("./handle"),o=t("../backbone_components/grouped_metric"),s=t("../backbone_components/data_line_view"),u=t("../backbone_components/temperature_metric_display"),l=t("../backbone_components/percentage_metric_display"),c=t("../backbone_components/metric_display"),h=Class.extend({defaults:{metric:null,base:null,clock:null},init:function(t){this.config=_.extend({},this.defaults,t),this.metric=this.config.metric,this.base=this.config.base,this.clock=this.config.clock,this.collection=this.config.collection,this.displayGroup=this.config.displayGroup,this.guideline=this.config.guideline,this.donut=this.config.donut,this.graphData=this.config.graphData,this.metricPoints=this.graphData.formatAsMetric(this.metric.alias),this.model=new o({metric:this.metric}),this.radialLine=new n({base:this.base,min:this.base.config.inner_radius,max:this.base.config.outer_radius,points:this.metricPoints,alias:this.metric.alias,clock:this.clock,model:this.model,metric:this.metric,lineDataKey:1}),this.delaySegment=new r({base:this.base,clock:this.clock,donut:this.donut,radial:!0,metric:this.metric,metricPoints:this.metricPoints}),this.radialLine.delaySegment=this.delaySegment,this.lineTrail=new i({dataLine:this.radialLine,classes:{line:"wheel-graph__line-trail"}}),window.lineTrails.push(this.lineTrail),this.collection.add(this.model),this.$metricDisplay=this.displayGroup.$el.find('.metric-display[data-metric="'+this.metric.alias+'"]'),this.radialLineView=new s({radialLine:this.radialLine,model:this.model});var e={el:this.$metricDisplay[0],group:this.displayGroup,model:this.model,dataLineView:this.radialLineView},h=this.$metricDisplay.data("view-mode");this.metricDisplayView="temperature"===h?new u(e):"percentage"===h?new l(e):new c(e),this.handle=new a({base:this.base,radialLine:this.radialLine,alias:this.metric.alias,guideline:this.guideline})},draw:function(){var t=this.graphData.formatAsMetric(this.metric.alias);this.metricPoints=t,this.delaySegment.metricPoints=this.metricPoints,this.radialLine.setPoints(t),this.delaySegment.draw()}});e.exports=h},{"../backbone_components/data_line_view":2,"../backbone_components/grouped_metric":3,"../backbone_components/metric_display":5,"../backbone_components/percentage_metric_display":8,"../backbone_components/temperature_metric_display":9,"./delay_segment":16,"./handle":23,"./line_trail":27,"./radial_line":29,__browserify_Buffer:35,__browserify_process:36}],35:[function(t,e){t=function n(e,r,i){function a(s,u){if(!r[s]){if(!e[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n?n:t)},c,c.exports,n,e,r,i)}return r[s].exports}for(var o="function"==typeof t&&t,s=0;s<i.length;s++)a(i[s]);return a}({PcZj9L:[function(t,e,n){function r(t,e){var n=typeof t;if("base64"===e&&"string"===n)for(t=ue(t);t.length%4!==0;)t+="=";var i;if("number"===n)i=ge(t);else if("string"===n)i=r.byteLength(t,e);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=ge(t.length)}var a=he(new Te(i));if(r.isBuffer(t))a.set(t);else if(de(t))for(var o=0;i>o;o++)a[o]=r.isBuffer(t)?t.readUInt8(o):t[o];else"string"===n&&a.write(t,0,e);return a}function i(t,e,n,i){n=Number(n)||0;var a=t.length-n;i?(i=Number(i),i>a&&(i=a)):i=a;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[n+s]=u}return r._charsWritten=2*s,s}function a(t,e,n,i){return r._charsWritten=_e(me(e),t,n,i)}function o(t,e,n,i){return r._charsWritten=_e(ve(e),t,n,i)}function s(t,e,n,r){return o(t,e,n,r)}function u(t,e,n,i){return r._charsWritten=_e(ye(e),t,n,i)}function l(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var l=r;r=e,e=n,n=l}e=Number(e)||0;var c=this.length-e;switch(n?(n=Number(n),n>c&&(n=c)):n=c,r=String(r||"utf8").toLowerCase()){case"hex":return i(this,t,e,n);case"utf8":case"utf-8":return a(this,t,e,n);case"ascii":return o(this,t,e,n);case"binary":return s(this,t,e,n);case"base64":return u(this,t,e,n);default:throw new Error("Unknown encoding")}}function c(t,e,n){var r=this instanceof ce?this._proxy:this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,n=void 0!==n?Number(n):n=r.length,n===e)return"";switch(t){case"hex":return v(r,e,n);case"utf8":case"utf-8":return d(r,e,n);case"ascii":return p(r,e,n);case"binary":return m(r,e,n);case"base64":return g(r,e,n);default:throw new Error("Unknown encoding")}}function h(){return{type:"Buffer",data:Array.prototype.slice.call(this,0)}}function f(t,e,n,r){var i=this;if(n||(n=0),r||0===r||(r=this.length),e||(e=0),r!==n&&0!==t.length&&0!==i.length){if(n>r)throw new Error("sourceEnd < sourceStart");if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);for(var a=0;r-n>a;a++)t[a+e]=this[a+n]}}function g(e,n,r){var i=e.slice(n,r);return t("base64-js").fromByteArray(i)}function d(t,e,n){for(var r=t.slice(e,n),i="",a="",o=0;o<r.length;)r[o]<=127?(i+=be(a)+String.fromCharCode(r[o]),a=""):a+="%"+r[o].toString(16),o++;return i+be(a)}function p(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a++)i+=String.fromCharCode(r[a]);return i}function m(t,e,n){return p(t,e,n)}function v(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",a=e;n>a;a++)i+=pe(t[a]);return i}function y(t,e){var n=this.length;return t=fe(t,n,0),e=fe(e,n,n),he(this.subarray(t,e))}function _(t,e){var n=this;return e||(ke(void 0!==t&&null!==t,"missing offset"),ke(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n[t]}function b(t,e,n,r){r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(void 0!==e&&null!==e,"missing offset"),ke(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){if(e+1===i){var a=new Se(new Ae(2));return a.setUint8(0,t[i-1]),a.getUint16(0,n)}return t._dataview.getUint16(e,n)}}function w(t,e){return b(this,t,!0,e)}function x(t,e){return b(this,t,!1,e)}function M(t,e,n,r){r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(void 0!==e&&null!==e,"missing offset"),ke(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){if(e+3>=i){for(var a=new Se(new Ae(4)),o=0;i>o+e;o++)a.setUint8(o,t[o+e]);return a.getUint32(0,n)}return t._dataview.getUint32(e,n)}}function k(t,e){return M(this,t,!0,e)}function E(t,e){return M(this,t,!1,e)}function S(t,e){var n=this;return e||(ke(void 0!==t&&null!==t,"missing offset"),ke(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n._dataview.getInt8(t)}function A(t,e,n,r){r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(void 0!==e&&null!==e,"missing offset"),ke(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){if(e+1===i){var a=new Se(new Ae(2));return a.setUint8(0,t[i-1]),a.getInt16(0,n)}return t._dataview.getInt16(e,n)}}function T(t,e){return A(this,t,!0,e)}function L(t,e){return A(this,t,!1,e)}function D(t,e,n,r){r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(void 0!==e&&null!==e,"missing offset"),ke(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){if(e+3>=i){for(var a=new Se(new Ae(4)),o=0;i>o+e;o++)a.setUint8(o,t[o+e]);return a.getInt32(0,n)}return t._dataview.getInt32(e,n)}}function P(t,e){return D(this,t,!0,e)}function C(t,e){return D(this,t,!1,e)}function $(t,e,n,r){return r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(e+3<t.length,"Trying to read beyond buffer length")),t._dataview.getFloat32(e,n)}function I(t,e){return $(this,t,!0,e)}function N(t,e){return $(this,t,!1,e)}function F(t,e,n,r){return r||(ke("boolean"==typeof n,"missing or invalid endian"),ke(e+7<t.length,"Trying to read beyond buffer length")),t._dataview.getFloat64(e,n)}function B(t,e){return F(this,t,!0,e)}function O(t,e){return F(this,t,!1,e)}function R(t,e,n){var r=this;n||(ke(void 0!==t&&null!==t,"missing value"),ke(void 0!==e&&null!==e,"missing offset"),ke(e<r.length,"trying to write beyond buffer length"),we(t,255)),e>=r.length||(r[e]=t)}function j(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+1<t.length,"trying to write beyond buffer length"),we(e,65535));var a=t.length;if(!(n>=a))if(n+1===a){var o=new Se(new Ae(2));o.setUint16(0,e,r),t[n]=o.getUint8(0)}else t._dataview.setUint16(n,e,r)}function U(t,e,n){j(this,t,e,!0,n)}function V(t,e,n){j(this,t,e,!1,n)}function z(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+3<t.length,"trying to write beyond buffer length"),we(e,4294967295));var a=t.length;if(!(n>=a))if(n+3>=a){var o=new Se(new Ae(4));o.setUint32(0,e,r);for(var s=0;a>s+n;s++)t[s+n]=o.getUint8(s)}else t._dataview.setUint32(n,e,r)}function Y(t,e,n){z(this,t,e,!0,n)}function q(t,e,n){z(this,t,e,!1,n)}function H(t,e,n){var r=this;n||(ke(void 0!==t&&null!==t,"missing value"),ke(void 0!==e&&null!==e,"missing offset"),ke(e<r.length,"Trying to write beyond buffer length"),xe(t,127,-128)),e>=r.length||r._dataview.setInt8(e,t)}function G(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+1<t.length,"Trying to write beyond buffer length"),xe(e,32767,-32768));var a=t.length;if(!(n>=a))if(n+1===a){var o=new Se(new Ae(2));o.setInt16(0,e,r),t[n]=o.getUint8(0)}else t._dataview.setInt16(n,e,r)}function W(t,e,n){G(this,t,e,!0,n)}function Z(t,e,n){G(this,t,e,!1,n)}function X(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+3<t.length,"Trying to write beyond buffer length"),xe(e,2147483647,-2147483648));var a=t.length;if(!(n>=a))if(n+3>=a){var o=new Se(new Ae(4));o.setInt32(0,e,r);for(var s=0;a>s+n;s++)t[s+n]=o.getUint8(s)}else t._dataview.setInt32(n,e,r)}function J(t,e,n){X(this,t,e,!0,n)}function K(t,e,n){X(this,t,e,!1,n)}function Q(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+3<t.length,"Trying to write beyond buffer length"),Me(e,3.4028234663852886e38,-3.4028234663852886e38));var a=t.length;if(!(n>=a))if(n+3>=a){var o=new Se(new Ae(4));o.setFloat32(0,e,r);for(var s=0;a>s+n;s++)t[s+n]=o.getUint8(s)}else t._dataview.setFloat32(n,e,r)}function te(t,e,n){Q(this,t,e,!0,n)}function ee(t,e,n){Q(this,t,e,!1,n)}function ne(t,e,n,r,i){i||(ke(void 0!==e&&null!==e,"missing value"),ke("boolean"==typeof r,"missing or invalid endian"),ke(void 0!==n&&null!==n,"missing offset"),ke(n+7<t.length,"Trying to write beyond buffer length"),Me(e,1.7976931348623157e308,-1.7976931348623157e308));var a=t.length;if(!(n>=a))if(n+7>=a){var o=new Se(new Ae(8));o.setFloat64(0,e,r);for(var s=0;a>s+n;s++)t[s+n]=o.getUint8(s)}else t._dataview.setFloat64(n,e,r)}function re(t,e,n){ne(this,t,e,!0,n)}function ie(t,e,n){ne(this,t,e,!1,n)}function ae(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");for(var r=e;n>r;r++)this[r]=t}}function oe(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=pe(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"}function se(){return new r(this).buffer}function ue(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function le(){var t=new Te(0);t.foo=function(){return 42};try{return 42===t.foo()}catch(e){return!1}}function ce(t){this._arr=t,0!==t.byteLength&&(this._dataview=new Se(t.buffer,t.byteOffset,t.byteLength))}function he(t){if(void 0===Le&&(Le=le()),Le)return t.write=l,t.toString=c,t.toLocaleString=c,t.toJSON=h,t.copy=f,t.slice=y,t.readUInt8=_,t.readUInt16LE=w,t.readUInt16BE=x,t.readUInt32LE=k,t.readUInt32BE=E,t.readInt8=S,t.readInt16LE=T,t.readInt16BE=L,t.readInt32LE=P,t.readInt32BE=C,t.readFloatLE=I,t.readFloatBE=N,t.readDoubleLE=B,t.readDoubleBE=O,t.writeUInt8=R,t.writeUInt16LE=U,t.writeUInt16BE=V,t.writeUInt32LE=Y,t.writeUInt32BE=q,t.writeInt8=H,t.writeInt16LE=W,t.writeInt16BE=Z,t.writeInt32LE=J,t.writeInt32BE=K,t.writeFloatLE=te,t.writeFloatBE=ee,t.writeDoubleLE=re,t.writeDoubleBE=ie,t.fill=ae,t.inspect=oe,t.toArrayBuffer=se,t._isBuffer=!0,0!==t.byteLength&&(t._dataview=new Se(t.buffer,t.byteOffset,t.byteLength)),t;var e=new ce(t),n=new Proxy(e,De);return e._proxy=n,n}function fe(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function ge(t){return t=~~Math.ceil(+t),0>t?0:t}function de(t){return Array.isArray(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function pe(t){return 16>t?"0"+t.toString(16):t.toString(16)}function me(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function ve(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function ye(e){return t("base64-js").toByteArray(e)}function _e(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function be(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function we(t,e){ke("number"==typeof t,"cannot write a non-number as a number"),ke(t>=0,"specified a negative value for writing an unsigned value"),ke(e>=t,"value is larger than maximum value for type"),ke(Math.floor(t)===t,"value has a fractional component")}function xe(t,e,n){ke("number"==typeof t,"cannot write a non-number as a number"),ke(e>=t,"value larger than maximum allowed value"),ke(t>=n,"value smaller than minimum allowed value"),ke(Math.floor(t)===t,"value has a fractional component")}function Me(t,e,n){ke("number"==typeof t,"cannot write a non-number as a number"),ke(e>=t,"value larger than maximum allowed value"),ke(t>=n,"value smaller than minimum allowed value")}function ke(t,e){if(!t)throw new Error(e||"Failed assertion")}var Ee=t("typedarray"),Se="undefined"==typeof DataView?Ee.DataView:DataView,Ae="undefined"==typeof ArrayBuffer?Ee.ArrayBuffer:ArrayBuffer,Te="undefined"==typeof Uint8Array?Ee.Uint8Array:Uint8Array;n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var Le;r.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},r.isBuffer=function(t){return t&&t._isBuffer},r.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return me(t).length;case"ascii":case"binary":return t.length;case"base64":return ye(t).length;default:throw new Error("Unknown encoding")}},r.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\nlist should be an Array.");var n,i;if(0===t.length)return new r(0);if(1===t.length)return t[0];if("number"!=typeof e)for(e=0,n=0;n<t.length;n++)i=t[n],e+=i.length;var a=new r(e),o=0;for(n=0;n<t.length;n++)i=t[n],i.copy(a,o),o+=i.length;return a},ce.prototype.write=l,ce.prototype.toString=c,ce.prototype.toLocaleString=c,ce.prototype.toJSON=h,ce.prototype.copy=f,ce.prototype.slice=y,ce.prototype.readUInt8=_,ce.prototype.readUInt16LE=w,ce.prototype.readUInt16BE=x,ce.prototype.readUInt32LE=k,ce.prototype.readUInt32BE=E,ce.prototype.readInt8=S,ce.prototype.readInt16LE=T,ce.prototype.readInt16BE=L,ce.prototype.readInt32LE=P,ce.prototype.readInt32BE=C,ce.prototype.readFloatLE=I,ce.prototype.readFloatBE=N,ce.prototype.readDoubleLE=B,ce.prototype.readDoubleBE=O,ce.prototype.writeUInt8=R,ce.prototype.writeUInt16LE=U,ce.prototype.writeUInt16BE=V,ce.prototype.writeUInt32LE=Y,ce.prototype.writeUInt32BE=q,ce.prototype.writeInt8=H,ce.prototype.writeInt16LE=W,ce.prototype.writeInt16BE=Z,ce.prototype.writeInt32LE=J,ce.prototype.writeInt32BE=K,ce.prototype.writeFloatLE=te,ce.prototype.writeFloatBE=ee,ce.prototype.writeDoubleLE=re,ce.prototype.writeDoubleBE=ie,ce.prototype.fill=ae,ce.prototype.inspect=oe,ce.prototype.toArrayBuffer=se,ce.prototype._isBuffer=!0,ce.prototype.subarray=function(){return this._arr.subarray.apply(this._arr,arguments)},ce.prototype.set=function(){return this._arr.set.apply(this._arr,arguments)};var De={get:function(t,e){return e in t?t[e]:t._arr[e]},set:function(t,e,n){t._arr[e]=n}}},{"base64-js":3,typedarray:4}],"native-buffer-browserify":[function(t,e){e.exports=t("PcZj9L")},{}],3:[function(t,e){!function(){"use strict";function t(t){var e,n,i,a,o,s;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(o=t.indexOf("="),o=o>0?t.length-o:0,s=[],i=o>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)a=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),s.push((16711680&a)>>16),s.push((65280&a)>>8),s.push(255&a);return 2===o?(a=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,s.push(255&a)):1===o&&(a=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,s.push(a>>8&255),s.push(255&a)),s}function n(t){function e(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}var n,i,a,o=t.length%3,s="";for(n=0,a=t.length-o;a>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],s+=e(i);switch(o){case 1:i=t[t.length-1],s+=r[i>>2],s+=r[i<<4&63],s+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],s+=r[i>>10],s+=r[i>>4&63],s+=r[i<<2&63],s+="="}return s}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}],4:[function(t,e,n){function r(t){if(B&&F){var e,n=B(t);for(e=0;e<n.length;e+=1)F(t,n[e],{value:t[n[e]],writable:!1,enumerable:!1,configurable:!1})}}function i(t){function e(e){F(t,e,{get:function(){return t._getter(e)},set:function(n){t._setter(e,n)},enumerable:!0,configurable:!1})}if(F){if(t.length>A)throw new RangeError("Array too large for polyfill");var n;for(n=0;n<t.length;n+=1)e(n)}}function a(t,e){var n=32-e;return t<<n>>n}function o(t,e){var n=32-e;return t<<n>>>n}function s(t){return[255&t]}function u(t){return a(t[0],8)}function l(t){return[255&t]}function c(t){return o(t[0],8)}function h(t){return t=N(Number(t)),[0>t?0:t>255?255:255&t]}function f(t){return[t>>8&255,255&t]}function g(t){return a(t[0]<<8|t[1],16)}function d(t){return[t>>8&255,255&t]}function p(t){return o(t[0]<<8|t[1],16)}function m(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function v(t){return a(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function y(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function _(t){return o(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function b(t,e,n){function r(t){var e=P(t),n=t-e;return.5>n?e:n>.5?e+1:e%2?e+1:e}var i,a,o,s,u,l,c,h=(1<<e-1)-1;for(t!==t?(a=(1<<e)-1,o=I(2,n-1),i=0):1/0===t||t===-1/0?(a=(1<<e)-1,o=0,i=0>t?1:0):0===t?(a=0,o=0,i=1/t===-1/0?1:0):(i=0>t,t=D(t),t>=I(2,1-h)?(a=$(P(C(t)/L),1023),o=r(t/I(2,a)*I(2,n)),o/I(2,n)>=2&&(a+=1,o=1),a>h?(a=(1<<e)-1,o=0):(a+=h,o-=I(2,n))):(a=0,o=r(t/I(2,1-h-n)))),u=[],s=n;s;s-=1)u.push(o%2?1:0),o=P(o/2);for(s=e;s;s-=1)u.push(a%2?1:0),a=P(a/2);for(u.push(i?1:0),u.reverse(),l=u.join(""),c=[];l.length;)c.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return c}function w(t,e,n){var r,i,a,o,s,u,l,c,h=[];for(r=t.length;r;r-=1)for(a=t[r-1],i=8;i;i-=1)h.push(a%2?1:0),a>>=1;return h.reverse(),o=h.join(""),s=(1<<e-1)-1,u=parseInt(o.substring(0,1),2)?-1:1,l=parseInt(o.substring(1,1+e),2),c=parseInt(o.substring(1+e),2),l===(1<<e)-1?0!==c?0/0:1/0*u:l>0?u*I(2,l-s)*(1+c/I(2,n)):0!==c?u*I(2,-(s-1))*(c/I(2,n)):0>u?-0:0}function x(t){return w(t,11,52)}function M(t){return b(t,11,52)}function k(t){return w(t,8,23)}function E(t){return b(t,8,23)}var S=void 0,A=1e5,T=function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(e){return t.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,e){return e in t},HasOwnProperty:function(t,n){return e.call(t,n)},IsCallable:function(t){return"function"==typeof t},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}}(),L=Math.LN2,D=Math.abs,P=Math.floor,C=Math.log,$=Math.min,I=Math.pow,N=Math.round,F=Object.defineProperty||function(t,e,n){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return T.HasProperty(n,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,n.get),T.HasProperty(n,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,n.set),T.HasProperty(n,"value")&&(t[e]=n.value),t},B=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e,n=[];for(e in t)T.HasOwnProperty(t,e)&&n.push(e);return n};!function(){function t(t,n,o){var s;return s=function(t,n,a){var o,u,l,c;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===s)for(o=arguments[0],this.length=o.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)this._setter(l,o._getter(l));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===T.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===T.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=T.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=T.ToUint32(a),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(u=arguments[0],this.length=T.ToUint32(u.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)c=u[l],this._setter(l,Number(c));else{if(this.length=T.ToInt32(arguments[0]),0>a)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=s,r(this),i(this)},s.prototype=new a,s.prototype.BYTES_PER_ELEMENT=t,s.prototype._pack=n,s.prototype._unpack=o,s.BYTES_PER_ELEMENT=t,s.prototype._getter=function(t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");
if(t=T.ToUint32(t),t>=this.length)return S;var e,n,r=[];for(e=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,n+=1)r.push(this.buffer._bytes[n]);return this._unpack(r)},s.prototype.get=s.prototype._getter,s.prototype._setter=function(t,e){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(t=T.ToUint32(t),t>=this.length)return S;var n,r,i=this._pack(e);for(n=0,r=this.byteOffset+t*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)this.buffer._bytes[r]=i[n]},s.prototype.set=function(){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var t,e,n,r,i,a,o,s,u,l;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(t=arguments[0],n=T.ToUint32(arguments[1]),n+t.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(s=this.byteOffset+n*this.BYTES_PER_ELEMENT,u=t.length*this.BYTES_PER_ELEMENT,t.buffer===this.buffer){for(l=[],i=0,a=t.byteOffset;u>i;i+=1,a+=1)l[i]=t.buffer._bytes[a];for(i=0,o=s;u>i;i+=1,o+=1)this.buffer._bytes[o]=l[i]}else for(i=0,a=t.byteOffset,o=s;u>i;i+=1,a+=1,o+=1)this.buffer._bytes[o]=t.buffer._bytes[a]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(e=arguments[0],r=T.ToUint32(e.length),n=T.ToUint32(arguments[1]),n+r>this.length)throw new RangeError("Offset plus length of array is out of range");for(i=0;r>i;i+=1)a=e[i],this._setter(n+i,Number(a))}},s.prototype.subarray=function(t,e){function n(t,e,n){return e>t?e:t>n?n:t}t=T.ToInt32(t),e=T.ToInt32(e),arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),0>t&&(t=this.length+t),0>e&&(e=this.length+e),t=n(t,0,this.length),e=n(e,0,this.length);var r=e-t;return 0>r&&(r=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,r)},s}var e=function(t){if(t=T.ToInt32(t),0>t)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=t,this._bytes=[],this._bytes.length=t;var e;for(e=0;e<this.byteLength;e+=1)this._bytes[e]=0;r(this)};n.ArrayBuffer=n.ArrayBuffer||e;var a=function(){},o=t(1,s,u),b=t(1,l,c),w=t(1,h,c),A=t(2,f,g),L=t(2,d,p),D=t(4,m,v),P=t(4,y,_),C=t(4,E,k),$=t(8,M,x);n.Int8Array=n.Int8Array||o,n.Uint8Array=n.Uint8Array||b,n.Uint8ClampedArray=n.Uint8ClampedArray||w,n.Int16Array=n.Int16Array||A,n.Uint16Array=n.Uint16Array||L,n.Int32Array=n.Int32Array||D,n.Uint32Array=n.Uint32Array||P,n.Float32Array=n.Float32Array||C,n.Float64Array=n.Float64Array||$}(),function(){function t(t,e){return T.IsCallable(t.get)?t.get(e):t[e]}function e(e){return function(n,r){if(n=T.ToUint32(n),n+e.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");n+=this.byteOffset;var i,o=new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT),s=[];for(i=0;i<e.BYTES_PER_ELEMENT;i+=1)s.push(t(o,i));return Boolean(r)===Boolean(a)&&s.reverse(),t(new e(new Uint8Array(s).buffer),0)}}function i(e){return function(n,r,i){if(n=T.ToUint32(n),n+e.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var o,s,u=new e([r]),l=new Uint8Array(u.buffer),c=[];for(o=0;o<e.BYTES_PER_ELEMENT;o+=1)c.push(t(l,o));Boolean(i)===Boolean(a)&&c.reverse(),s=new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT),s.set(c)}}var a=function(){var e=new n.Uint16Array([4660]),r=new n.Uint8Array(e.buffer);return 18===t(r,0)}(),o=function(t,e,n){if(0===arguments.length)t=new ArrayBuffer(0);else if(!(t instanceof ArrayBuffer||"ArrayBuffer"===T.Class(t)))throw new TypeError("TypeError");if(this.buffer=t||new ArrayBuffer(0),this.byteOffset=T.ToUint32(e),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:T.ToUint32(n),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");r(this)};o.prototype.getUint8=e(n.Uint8Array),o.prototype.getInt8=e(n.Int8Array),o.prototype.getUint16=e(n.Uint16Array),o.prototype.getInt16=e(n.Int16Array),o.prototype.getUint32=e(n.Uint32Array),o.prototype.getInt32=e(n.Int32Array),o.prototype.getFloat32=e(n.Float32Array),o.prototype.getFloat64=e(n.Float64Array),o.prototype.setUint8=i(n.Uint8Array),o.prototype.setInt8=i(n.Int8Array),o.prototype.setUint16=i(n.Uint16Array),o.prototype.setInt16=i(n.Int16Array),o.prototype.setUint32=i(n.Uint32Array),o.prototype.setInt32=i(n.Int32Array),o.prototype.setFloat32=i(n.Float32Array),o.prototype.setFloat64=i(n.Float64Array),n.DataView=n.DataView||o}()},{}]},{},[]),e.exports=t("native-buffer-browserify").Buffer},{}],36:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[10]);